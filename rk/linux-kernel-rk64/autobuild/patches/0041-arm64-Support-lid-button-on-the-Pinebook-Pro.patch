From 1aa32ed527c6f22f9f93cf344a85183079687695 Mon Sep 17 00:00:00 2001
From: Tobias Schramm <tobias@t-sys.eu>
Date: Sat, 9 Nov 2019 21:20:25 +0100
Subject: [PATCH 41/44] arm64: Support lid button on the Pinebook Pro

---
 .../boot/dts/rockchip/rk3399-pinebook-pro.dts  | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts b/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
index f8d6fb740d35..15816f4a5413 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-pinebook-pro.dts
@@ -93,17 +93,24 @@
 		compatible = "gpio-keys";
 		autorepeat;
 		pinctrl-names = "default";
-		pinctrl-0 = <&pwrbtn>;
+		pinctrl-0 = <&pwrbtn &lidbtn>;
 
 		power {
-			debounce-interval = <100>;
+			debounce-interval = <20>;
 			gpios = <&gpio0 RK_PA5 GPIO_ACTIVE_LOW>;
-			label = "GPIO Key Power";
+			label = "Power";
 			linux,code = <KEY_POWER>;
 			wakeup-source;
 		};
-	};
 
+		lid {
+			debounce-interval = <20>;
+			gpios = <&gpio1 RK_PA1 GPIO_ACTIVE_LOW>;
+			label = "Lid";
+			linux,code = <SW_LID>;
+			linux,input-type = <EV_SW>;
+		};
+	};
 	
 	backlight: edp-backlight {
 		compatible = "pwm-backlight";
@@ -817,6 +824,9 @@
 		pwrbtn: pwrbtn {
 			rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_up>;
 		};
+		lidbtn: lidbtn {
+			rockchip,pins = <1 RK_PA1 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
 	};
 
 	dc-charger {
-- 
2.23.0

