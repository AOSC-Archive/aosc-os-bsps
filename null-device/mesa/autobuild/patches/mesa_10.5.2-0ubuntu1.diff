--- mesa-10.5.2.orig/.dir-locals.el
+++ mesa-10.5.2/.dir-locals.el
@@ -0,0 +1,12 @@
+((prog-mode
+  (indent-tabs-mode . nil)
+  (tab-width . 8)
+  (c-basic-offset . 3)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ (makefile-mode (indent-tabs-mode . t))
+ )
--- mesa-10.5.2.orig/Android.common.mk
+++ mesa-10.5.2/Android.common.mk
@@ -0,0 +1,66 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# use c99 compiler by default
+ifeq ($(LOCAL_CC),)
+ifeq ($(LOCAL_IS_HOST_MODULE),true)
+LOCAL_CC := $(HOST_CC) -std=c99
+else
+LOCAL_CC := $(TARGET_CC) -std=c99
+endif
+endif
+
+LOCAL_C_INCLUDES += \
+	$(MESA_TOP)/include
+
+MESA_VERSION=$(shell cat $(MESA_TOP)/VERSION)
+# define ANDROID_VERSION (e.g., 4.0.x => 0x0400)
+LOCAL_CFLAGS += \
+	-DPACKAGE_VERSION=\"$(MESA_VERSION)\" \
+	-DPACKAGE_BUGREPORT=\"https://bugs.freedesktop.org/enter_bug.cgi?product=Mesa\" \
+	-DANDROID_VERSION=0x0$(MESA_ANDROID_MAJOR_VERSION)0$(MESA_ANDROID_MINOR_VERSION)
+
+LOCAL_CFLAGS += \
+	-DHAVE_PTHREAD=1 \
+	-fvisibility=hidden \
+	-Wno-sign-compare
+
+ifeq ($(strip $(MESA_ENABLE_ASM)),true)
+ifeq ($(TARGET_ARCH),x86)
+LOCAL_CFLAGS += \
+	-DUSE_X86_ASM \
+	-DHAVE_DLOPEN \
+
+endif
+endif
+
+LOCAL_CPPFLAGS += \
+	-Wno-error=non-virtual-dtor \
+	-Wno-non-virtual-dtor
+
+# uncomment to keep the debug symbols
+#LOCAL_STRIP_MODULE := false
+
+ifeq ($(strip $(LOCAL_MODULE_TAGS)),)
+LOCAL_MODULE_TAGS := optional
+endif
--- mesa-10.5.2.orig/Android.mk
+++ mesa-10.5.2/Android.mk
@@ -0,0 +1,100 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# BOARD_GPU_DRIVERS should be defined.  The valid values are
+#
+#   classic drivers: i915 i965
+#   gallium drivers: swrast freedreno i915g ilo nouveau r300g r600g radeonsi vmwgfx
+#
+# The main target is libGLES_mesa.  For each classic driver enabled, a DRI
+# module will also be built.  DRI modules will be loaded by libGLES_mesa.
+
+MESA_TOP := $(call my-dir)
+
+MESA_ANDROID_MAJOR_VERSION := $(word 1, $(subst ., , $(PLATFORM_VERSION)))
+MESA_ANDROID_MINOR_VERSION := $(word 2, $(subst ., , $(PLATFORM_VERSION)))
+MESA_ANDROID_VERSION := $(MESA_ANDROID_MAJOR_VERSION).$(MESA_ANDROID_MINOR_VERSION)
+
+MESA_COMMON_MK := $(MESA_TOP)/Android.common.mk
+MESA_PYTHON2 := python
+
+DRM_GRALLOC_TOP := hardware/drm_gralloc
+
+classic_drivers := i915 i965
+gallium_drivers := swrast freedreno i915g ilo nouveau r300g r600g radeonsi vmwgfx
+
+MESA_GPU_DRIVERS := $(strip $(BOARD_GPU_DRIVERS))
+
+# warn about invalid drivers
+invalid_drivers := $(filter-out \
+	$(classic_drivers) $(gallium_drivers), $(MESA_GPU_DRIVERS))
+ifneq ($(invalid_drivers),)
+$(warning invalid GPU drivers: $(invalid_drivers))
+# tidy up
+MESA_GPU_DRIVERS := $(filter-out $(invalid_drivers), $(MESA_GPU_DRIVERS))
+endif
+
+# host and target must be the same arch to generate matypes.h
+ifeq ($(TARGET_ARCH),$(HOST_ARCH))
+MESA_ENABLE_ASM := true
+else
+MESA_ENABLE_ASM := false
+endif
+
+ifneq ($(filter $(classic_drivers), $(MESA_GPU_DRIVERS)),)
+MESA_BUILD_CLASSIC := true
+else
+MESA_BUILD_CLASSIC := false
+endif
+
+ifneq ($(filter $(gallium_drivers), $(MESA_GPU_DRIVERS)),)
+MESA_BUILD_GALLIUM := true
+else
+MESA_BUILD_GALLIUM := false
+endif
+
+# add subdirectories
+ifneq ($(strip $(MESA_GPU_DRIVERS)),)
+
+SUBDIRS := \
+	src/loader \
+	src/mapi \
+	src/glsl \
+	src/mesa \
+	src/util \
+	src/egl/main
+
+ifeq ($(strip $(MESA_BUILD_CLASSIC)),true)
+SUBDIRS += \
+	src/egl/drivers/dri2 \
+	src/mesa/drivers/dri
+endif
+
+ifeq ($(strip $(MESA_BUILD_GALLIUM)),true)
+SUBDIRS += src/gallium
+endif
+
+mkfiles := $(patsubst %,$(MESA_TOP)/%/Android.mk,$(SUBDIRS))
+include $(mkfiles)
+
+endif
--- mesa-10.5.2.orig/CleanSpec.mk
+++ mesa-10.5.2/CleanSpec.mk
@@ -0,0 +1,7 @@
+$(call add-clean-step, rm -rf $(PRODUCT_OUT)/obj/STATIC_LIBRARIES/libmesa_*_intermediates)
+$(call add-clean-step, rm -rf $(PRODUCT_OUT)/obj/SHARED_LIBRARIES/i9*5_dri_intermediates)
+$(call add-clean-step, rm -rf $(PRODUCT_OUT)/obj/SHARED_LIBRARIES/libglapi_intermediates)
+$(call add-clean-step, rm -rf $(PRODUCT_OUT)/obj/SHARED_LIBRARIES/libGLES_mesa_intermediates)
+$(call add-clean-step, rm -rf $(OUT_DIR)/host/$(HOST_OS)-$(HOST_ARCH)/obj/EXECUTABLES/mesa_*_intermediates)
+$(call add-clean-step, rm -rf $(OUT_DIR)/host/$(HOST_OS)-$(HOST_ARCH)/obj/EXECUTABLES/glsl_compiler_intermediates)
+$(call add-clean-step, rm -rf $(OUT_DIR)/host/$(HOST_OS)-$(HOST_ARCH)/obj/STATIC_LIBRARIES/libmesa_glsl_utils_intermediates)
--- mesa-10.5.2.orig/bin/.cherry-ignore
+++ mesa-10.5.2/bin/.cherry-ignore
@@ -0,0 +1,26 @@
+# Cherry-picked without -x
+# nir: resolve nir.h dependency list (fix make distcheck)
+556fc4b84df99a1cd4b18c11fb16f7854a948b2a 
+
+# nir: add missing header to the sources list
+72e602905dd9d86450a936d5a22bf21758844b38
+
+# configure: rework wayland_scanner handling(fix make distcheck)
+153539bd9d4445b504110958306f00632222f840
+
+# auxiliary/vl: bring back the VL code for the dri targets
+c39dbfdd0f764b1aaa7319b4694e7335692993dd
+
+# mesa: rename format_info.c to format_info.h
+3f6c28f2a976e35128b7a4a513cfa60af00301e1
+# mesa: fix dependency tracking of generated sources
+d22391cb165af4ed2f9a9e5d6233072a432cc969
+# mesa: drop Makefile from get_hash.h dependency list
+2c0f72d5389a9838cc4fbf4cc4f4291aa56c7845
+# mapi: fix *glapi dependency tracking
+fe5fddd7e2df74233a2a02ae021418485f39d11c
+# xmlpool: make sure we ship options.h
+8d8ca64c28170ec7e9ffa01638bcf8fd30a96088
+
+# The optimisations mentioned are not available in 10.5
+627c68308683abbd6e563a09af6013a33938a790 i965/fs: in MAD optimizations, switch last argument to be immediate
--- mesa-10.5.2.orig/bin/bugzilla_mesa.sh
+++ mesa-10.5.2/bin/bugzilla_mesa.sh
@@ -0,0 +1,52 @@
+#!/bin/bash
+
+# This script is used to generate the list of fixed bugs that
+# appears in the release notes files, with HTML formatting.
+#
+# Note: This script could take a while until all details have
+#       been fetched from bugzilla.
+#
+# Usage examples:
+#
+# $ bin/bugzilla_mesa.sh mesa-9.0.2..mesa-9.0.3
+# $ bin/bugzilla_mesa.sh mesa-9.0.2..mesa-9.0.3 > bugfixes
+# $ bin/bugzilla_mesa.sh mesa-9.0.2..mesa-9.0.3 | tee bugfixes
+# $ DRYRUN=yes bin/bugzilla_mesa.sh mesa-9.0.2..mesa-9.0.3
+# $ DRYRUN=yes bin/bugzilla_mesa.sh mesa-9.0.2..mesa-9.0.3 | wc -l
+
+
+# regex pattern: trim before url
+trim_before='s/.*\(http\)/\1/'
+
+# regex pattern: trim after url
+trim_after='s/\(show_bug.cgi?id=[0-9]*\).*/\1/'
+
+# regex pattern: always use https
+use_https='s/http:/https:/'
+
+# extract fdo urls from commit log
+urls=$(git log $* | grep 'bugs.freedesktop.org/show_bug' | sed -e $trim_before -e $trim_after -e $use_https | sort | uniq)
+
+# if DRYRUN is set to "yes", simply print the URLs and don't fetch the
+# details from fdo bugzilla.
+#DRYRUN=yes
+
+if [ "x$DRYRUN" = xyes ]; then
+	for i in $urls
+	do
+		echo $i
+	done
+else
+	echo "<ul>"
+	echo ""
+
+	for i in $urls
+	do
+		id=$(echo $i | cut -d'=' -f2)
+		summary=$(wget --quiet -O - $i | grep -e '<title>.*</title>' | sed -e 's/ *<title>Bug [0-9]\+ &ndash; \(.*\)<\/title>/\1/')
+		echo "<li><a href=\"$i\">Bug $id</a> - $summary</li>"
+		echo ""
+	done
+
+	echo "</ul>"
+fi
--- mesa-10.5.2.orig/bin/get-pick-list.sh
+++ mesa-10.5.2/bin/get-pick-list.sh
@@ -0,0 +1,35 @@
+#!/bin/sh
+
+# Script for generating a list of candidates for cherry-picking to a stable branch
+#
+# Usage examples:
+#
+# $ bin/get-pick-list.sh
+# $ bin/get-pick-list.sh > picklist
+# $ bin/get-pick-list.sh | tee picklist
+
+# Grep for commits with "cherry picked from commit" in the commit message.
+git log --reverse --grep="cherry picked from commit" origin/master..HEAD |\
+	grep "cherry picked from commit" |\
+	sed -e 's/^[[:space:]]*(cherry picked from commit[[:space:]]*//' -e 's/)//' > already_picked
+
+# Grep for commits that were marked as a candidate for the stable tree.
+git log --reverse --pretty=%H -i --grep='^\([[:space:]]*NOTE: .*[Cc]andidate\|CC:.*mesa-stable\)' HEAD..origin/master |\
+while read sha
+do
+	# Check to see whether the patch is on the ignore list.
+	if [ -f bin/.cherry-ignore ] ; then
+		if grep -q ^$sha bin/.cherry-ignore ; then
+			continue
+		fi
+	fi
+
+	# Check to see if it has already been picked over.
+	if grep -q ^$sha already_picked ; then
+		continue
+	fi
+
+	git log -n1 --pretty=oneline $sha | cat
+done
+
+rm -f already_picked
--- mesa-10.5.2.orig/bin/perf-annotate-jit
+++ mesa-10.5.2/bin/perf-annotate-jit
@@ -0,0 +1,251 @@
+#!/usr/bin/env python
+#
+# Copyright 2012 VMware Inc
+# Copyright 2008-2009 Jose Fonseca
+#
+# Permission is hereby granted, free of charge, to any person obtaining a copy
+# of this software and associated documentation files (the "Software"), to deal
+# in the Software without restriction, including without limitation the rights
+# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
+# copies of the Software, and to permit persons to whom the Software is
+# furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included in
+# all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
+# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
+# THE SOFTWARE.
+#
+
+"""Perf annotate for JIT code.
+
+Linux `perf annotate` does not work with JIT code.  This script takes the data
+produced by `perf script` command, plus the diassemblies outputed by gallivm
+into /tmp/perf-XXXXX.map.asm and produces output similar to `perf annotate`.
+
+See docs/llvmpipe.html for usage instructions.
+
+The `perf script` output parser was derived from the gprof2dot.py script.
+"""
+
+
+import sys
+import os.path
+import re
+import optparse
+import subprocess
+
+
+class Parser:
+    """Parser interface."""
+
+    def __init__(self):
+        pass
+
+    def parse(self):
+        raise NotImplementedError
+
+
+class LineParser(Parser):
+    """Base class for parsers that read line-based formats."""
+
+    def __init__(self, file):
+        Parser.__init__(self)
+        self._file = file
+        self.__line = None
+        self.__eof = False
+        self.line_no = 0
+
+    def readline(self):
+        line = self._file.readline()
+        if not line:
+            self.__line = ''
+            self.__eof = True
+        else:
+            self.line_no += 1
+        self.__line = line.rstrip('\r\n')
+
+    def lookahead(self):
+        assert self.__line is not None
+        return self.__line
+
+    def consume(self):
+        assert self.__line is not None
+        line = self.__line
+        self.readline()
+        return line
+
+    def eof(self):
+        assert self.__line is not None
+        return self.__eof
+
+
+mapFile = None
+
+def lookupMap(filename, matchSymbol):
+    global mapFile
+    mapFile = filename
+    stream = open(filename, 'rt')
+    for line in stream:
+        start, length, symbol = line.split()
+
+        start = int(start, 16)
+        length = int(length,16)
+
+        if symbol == matchSymbol:
+            return start
+
+    return None
+
+def lookupAsm(filename, desiredFunction):
+    stream = open(filename + '.asm', 'rt')
+    while stream.readline() != desiredFunction + ':\n':
+        pass
+
+    asm = []
+    line = stream.readline().strip()
+    while line:
+        addr, instr = line.split(':', 1)
+        addr = int(addr)
+        asm.append((addr, instr))
+        line = stream.readline().strip()
+
+    return asm
+
+
+
+samples = {}
+
+
+class PerfParser(LineParser):
+    """Parser for linux perf callgraph output.
+
+    It expects output generated with
+
+        perf record -g
+        perf script
+    """
+
+    def __init__(self, infile, symbol):
+        LineParser.__init__(self, infile)
+	self.symbol = symbol
+
+    def readline(self):
+        # Override LineParser.readline to ignore comment lines
+        while True:
+            LineParser.readline(self)
+            if self.eof() or not self.lookahead().startswith('#'):
+                break
+
+    def parse(self):
+        # read lookahead
+        self.readline()
+
+        while not self.eof():
+            self.parse_event()
+
+        asm = lookupAsm(mapFile, self.symbol)
+
+        addresses = samples.keys()
+        addresses.sort()
+        total_samples = 0
+
+	sys.stdout.write('%s:\n' % self.symbol)
+        for address, instr in asm:
+            try:
+                sample = samples.pop(address)
+            except KeyError:
+                sys.stdout.write(6*' ')
+            else:
+                sys.stdout.write('%6u' % (sample))
+                total_samples += sample
+            sys.stdout.write('%6u: %s\n' % (address, instr))
+        print 'total:', total_samples
+        assert len(samples) == 0
+
+        sys.exit(0)
+
+    def parse_event(self):
+        if self.eof():
+            return
+
+        line = self.consume()
+        assert line
+
+        callchain = self.parse_callchain()
+        if not callchain:
+            return
+
+    def parse_callchain(self):
+        callchain = []
+        while self.lookahead():
+            function = self.parse_call(len(callchain) == 0)
+            if function is None:
+                break
+            callchain.append(function)
+        if self.lookahead() == '':
+            self.consume()
+        return callchain
+
+    call_re = re.compile(r'^\s+(?P<address>[0-9a-fA-F]+)\s+(?P<symbol>.*)\s+\((?P<module>[^)]*)\)$')
+
+    def parse_call(self, first):
+        line = self.consume()
+        mo = self.call_re.match(line)
+        assert mo
+        if not mo:
+            return None
+
+        if not first:
+            return None
+
+        function_name = mo.group('symbol')
+        if not function_name:
+            function_name = mo.group('address')
+
+        module = mo.group('module')
+
+        function_id = function_name + ':' + module
+
+        address = mo.group('address')
+        address = int(address, 16)
+
+        if function_name != self.symbol:
+            return None
+
+        start_address = lookupMap(module, function_name)
+        address -= start_address
+
+        #print function_name, module, address
+
+        samples[address] = samples.get(address, 0) + 1
+
+        return True
+
+
+def main():
+    """Main program."""
+
+    optparser = optparse.OptionParser(
+        usage="\n\t%prog [options] symbol_name")
+    (options, args) = optparser.parse_args(sys.argv[1:])
+    if len(args) != 1:
+        optparser.error('wrong number of arguments')
+
+    symbol = args[0]
+
+    p = subprocess.Popen(['perf', 'script'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
+    parser = PerfParser(p.stdout, symbol)
+    parser.parse()
+
+
+if __name__ == '__main__':
+    main()
+
+
+# vim: set sw=4 et:
--- mesa-10.5.2.orig/bin/shortlog_mesa.sh
+++ mesa-10.5.2/bin/shortlog_mesa.sh
@@ -0,0 +1,29 @@
+#!/bin/bash
+
+# This script is used to generate the list of changes that
+# appears in the release notes files, with HTML formatting.
+#
+# Usage examples:
+#
+# $ bin/shortlog_mesa.sh mesa-9.0.2..mesa-9.0.3
+# $ bin/shortlog_mesa.sh mesa-9.0.2..mesa-9.0.3 > changes
+# $ bin/shortlog_mesa.sh mesa-9.0.2..mesa-9.0.3 | tee changes
+
+
+typeset -i in_log=0
+
+git shortlog $* | while read l
+do
+    if [ $in_log -eq 0 ]; then
+	echo '<p>'$l'</p>'
+	echo '<ul>'
+	in_log=1
+    elif echo "$l" | egrep -q '^$' ; then
+	echo '</ul>'
+	echo
+	in_log=0
+    else
+        mesg=$(echo $l | sed 's/ (cherry picked from commit [0-9a-f]\+)//;s/\&/&amp;/g;s/</\&lt;/g;s/>/\&gt;/g')
+	echo '  <li>'${mesg}'</li>'
+    fi
+done
--- mesa-10.5.2.orig/debian/README.Debian
+++ mesa-10.5.2/debian/README.Debian
@@ -0,0 +1,18 @@
+Documentation for the libegl1-x11, libgles1, and libgles2 virtual
+packages.
+
+Although there are is no standardised linux ABI for GL|ES, there is
+a “strongly encouraged” set of standard headers, type and linkage definitions
+supplied by the Khronos group[1].  The mesa implementation provides this ABI.
+Any non-mesa implementation that wants to provide these packages should
+conform to the Khronos group's de-facto ABI.
+
+The case of EGL is similar; Khronos again supplies a de-facto linux ABI.
+The EGL ABI is necessarily tied to the native windowing system by the
+eglNativeDisplayType, eglNativeWindowType, and eglNativePixmapType typedefs.
+The EGL virtual package therefore includes the name of the x11 windowing
+system to leave room should further windowing ABIs be standardised.
+
+[1]: http://www.khronos.org/registry/implementers_guide.html#uncontrolled
+
+ -- Cyril Brulebois <kibi@debian.org>, Sat, 22 Jan 2011 06:03:46 +0100
--- mesa-10.5.2.orig/debian/README.source
+++ mesa-10.5.2/debian/README.source
@@ -0,0 +1,41 @@
+------------------------------------------------------
+Quick Guide To Patching This Package For The Impatient
+------------------------------------------------------
+
+1. Make sure you have quilt installed
+2. Unpack the package as usual with "dpkg-source -x"
+3. Run the "patch" target in debian/rules
+4. Create a new patch with "quilt new" (see quilt(1))
+5. Edit all the files you want to include in the patch with "quilt edit" 
+   (see quilt(1)).
+6. Write the patch with "quilt refresh" (see quilt(1))
+7. Run the "clean" target in debian/rules
+
+Alternatively, instead of using quilt directly, you can drop the patch in to 
+debian/patches and add the name of the patch to debian/patches/series.
+
+
+The X Strike Force team maintains X packages in git repositories on
+git.debian.org in the pkg-xorg subdirectory. Most upstream packages
+are actually maintained in git repositories as well, so they often
+just need to be pulled into git.debian.org in a "upstream-*" branch.
+
+The .orig.tar.gz is upstream's mesa tarball.
+
+While building from git, dpkg-source can complain about symlinks vs.
+normal files mismatches. To work around this issue, before uploading,
+and without committing:
+
+  find -type l | while read dest; do src=$(readlink -f $dest); rm $dest; cp $src $dest; done
+
+The Debian packaging is added by creating the "debian-*" git branch
+which contains the aforementioned "upstream-*" branch plus the debian/
+repository files.
+When a patch has to be applied to the Debian package, two solutions
+are involved:
+* If the patch is available in one of the upstream branches, it
+  may be git'cherry-picked into the Debian repository. In this
+  case, it appears directly in the .diff.gz.
+* Otherwise, the patch is added to debian/patches/ which is managed
+  with quilt as documented in /usr/share/doc/quilt/README.source.
+  Thus, the patching system requires a build dependency on quilt.
--- mesa-10.5.2.orig/debian/changelog
+++ mesa-10.5.2/debian/changelog
@@ -0,0 +1,3609 @@
+mesa (10.5.2-0ubuntu1) vivid; urgency=medium
+
+  * Merge from unreleased experimental git
+    - new upstream bugfix release
+  * egl-platform-mir.patch: Refreshed.
+
+ -- Timo Aaltonen <tjaalton@debian.org>  Mon, 30 Mar 2015 15:07:30 +0300
+
+mesa (10.5.2-1) UNRELEASED; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+  * Update watch file.
+
+  [ Timo Aaltonen ]
+  * libegl1-mesa.symbols: Updated.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 16 Feb 2015 09:35:43 +0100
+
+mesa (10.5.0-0ubuntu1) vivid; urgency=medium
+
+  * Merge with unreleased debian-experimental.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 09 Mar 2015 14:10:00 +0100
+
+mesa (10.5.0~rc3-0ubuntu1) vivid; urgency=medium
+  
+  * Merge with unreleased debian-experimental.
+  * Drop skl-implement-wadisable1ddepthstencil.diff, upstreamed.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 02 Mar 2015 11:45:53 +0100
+
+mesa (10.5.0~rc2-0ubuntu1) vivid; urgency=medium
+  
+  * Merge with unreleased debian-experimental.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 16 Feb 2015 09:35:43 +0100
+
+mesa (10.5.0~rc1-0ubuntu2) vivid; urgency=medium
+
+  * Add a couple of backported fixes for Skylake:
+    skl-use-1-register-for-uniform-pull.diff
+    skl-use-vec4-datatypes-for-message-header.diff
+    skl-implement-wadisable1ddepthstencil.diff
+
+ -- Timo Aaltonen <tjaalton@debian.org>  Fri, 20 Feb 2015 08:54:44 +0200
+
+mesa (10.5.0~rc1-0ubuntu1) vivid; urgency=medium
+
+  [ Timo Aaltonen ]
+  * Update Mir patch.
+
+  [ Maarten Lankhorst ]
+  * Merge from unreleased debian-experimental.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 19 Feb 2015 11:28:53 +0100
+
+mesa (10.4.2-2ubuntu5) vivid; urgency=medium
+
+  * Fix ftbfs from no longer including libmirclient-dev.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 11 Feb 2015 09:21:54 +0100
+
+mesa (10.4.2-2ubuntu4) vivid; urgency=medium
+
+  * debian/control:
+    - Change build-dep for mir to mir-client-platform-mesa-dev.
+  * debian/patches/egl-platform-mir.patch:
+    - Fix potential double free (LP: #1414999).
+    - Fix gbm_device leak (LP: #1419704).
+    - Fix dri_buffers[front/back] leak (LP: #1419710).
+    - Use mir-client-platform-mesa-dev to get Mir build flags.
+
+ -- Alexandros Frantzis <alexandros.frantzis@canonical.com>  Mon, 09 Feb 2015 12:35:56 +0200
+
+mesa (10.4.2-2ubuntu3) vivid; urgency=medium
+
+  * egl-platform-mir.patch: Fix memory leak. (LP:#1418486)
+
+ -- Timo Aaltonen <tjaalton@debian.org>  Fri, 06 Feb 2015 12:12:01 +0200
+
+mesa (10.4.2-2ubuntu2) vivid; urgency=medium
+
+  * Flip the switch to llvm 3.6 with patches backported from upstream.
+  * Add upstream workaround for hangs on gen4. (LP: #1388612)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 29 Jan 2015 13:27:10 +0100
+
+mesa (10.4.2-2ubuntu1) vivid; urgency=medium
+
+  [ Timo Aaltonen ]
+  * Merge from Debian experimental.
+
+  [ Maarten Lankhorst ]
+  * Disable opencl after it was re-enabled accidentally in the merge.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 20 Jan 2015 10:30:20 +0100
+
+mesa (10.4.2-2) unstable; urgency=medium
+
+  * rules: Drop dh_makeshlibs exception on gbm_gallium_drm.so as it's
+    gone now.
+  * control: Add depends on libwayland-egl1-mesa to libegl1-mesa-dev,
+    since it ships libwayland-egl.so on Linux.
+  * control: Mark libegl1-mesa-drivers M-A: same again. (Closes:
+    #775370)
+
+ -- Timo Aaltonen <tjaalton@debian.org>  Thu, 15 Jan 2015 15:28:40 +0200
+
+mesa (10.4.2-1) experimental; urgency=medium
+
+  * New upstream release.
+  * control, rules, libopenvg*, libgbm1, libegl1-mesa-drivers:
+    Drop EGL/GBM state trackers and OpenVG.
+  * control: Make libegl1-mesa-drivers transitional.
+
+ -- Timo Aaltonen <tjaalton@debian.org>  Tue, 13 Jan 2015 13:43:51 +0200
+
+mesa (10.3.2-0ubuntu1) vivid; urgency=medium
+
+  * Merge from unreleased debian-unstable.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 27 Oct 2014 08:43:19 +0100
+
+mesa (10.3.2-1) unstable; urgency=medium
+
+  [ Sven Joachim ]
+  * New upstream stable release.
+    - Fixes crashes in vdpau with the r600g driver (Closes: #766058).
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 27 Oct 2014 11:40:24 +0100
+
+mesa (10.3.1-1ubuntu1) utopic; urgency=medium
+
+  * Merge with released debian unstable, no changes in packaging.
+    - New upstream release. (LP: #1384289)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 23 Oct 2014 12:50:53 +0200
+
+mesa (10.3.1-1) unstable; urgency=medium
+
+  * Build libgbm on kfreebsd (fixes FTBFS).
+  * New upstream stable release.
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 13 Oct 2014 17:56:27 +0200
+
+mesa (10.3.0-2) experimental; urgency=medium
+
+  * Add missing Replaces/Breaks for the gallium-pipe move.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 10 Oct 2014 00:09:47 +0200
+
+mesa (10.3.0-0ubuntu3) utopic; urgency=medium
+
+  [ Andreas Pokorny ]
+  * debian/patches/egl-platform-mir.patch:
+    - Add support for get_image_buffers and KHR_image_pixmap.
+
+  [ Alexandros Frantzis ]
+  * debian/patches/egl-platform-mir.patch:
+    - Update for Mesa 10.3 (LP: #1377853).
+
+ -- Alexandros Frantzis <alexandros.frantzis@canonical.com>  Tue, 07 Oct 2014 13:06:26 +0300
+
+mesa (10.3.0-0ubuntu2) utopic; urgency=medium
+
+  * Add depends on libgl1-mesa-dri to some packages.
+    - libgl1-mesa-glx, libegl1-mesa and libgbm1 depend on the dri
+      files to be installed, even for swrast support. (LP: #1374131)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 29 Sep 2014 14:33:23 +0200
+
+mesa (10.3.0-0ubuntu1) utopic; urgency=medium
+
+  * New upstream release. (LP: #1364003)
+  * Merge from released debian-experimental.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 22 Sep 2014 15:42:27 +0200
+
+mesa (10.3.0-1) experimental; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+  * Remove upstreamed patch.
+    - 01_gallium-util-add-missing-u_debug-include.patch
+
+  [ Andreas Boll ]
+  * Move gallium-pipe installation from libgl1-mesa-dri.install.linux.in
+    to mesa-opencl-icd.install.in, because it's only needed for opencl.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 08 Oct 2014 10:30:05 +0200
+
+mesa (10.3.0~rc3-3) experimental; urgency=medium
+
+  [ Andreas Boll ]
+  * Bump llvm-3.5-dev and libclang-3.5-dev to 1:3.5-1, should fix FTBFS on
+    kfreebsd-*.
+  * Bump compat to v9 for changed dh_strip behavior:
+    - dh_strip puts separated debug symbols in a location based on their
+      build-id (Closes: #755921).
+  * Drop redundant libegl1-mesa-drivers.install.linux.in.
+
+  [ Dima Kogan ]
+  * All -dev packages are now Multi-Arch: same (Closes: #689088, #678040).
+
+  [ Julien Cristau ]
+  * Upload clean source without partial Ubuntu alternatives patches (closes: #761678)
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 15 Sep 2014 22:39:15 +0200
+
+mesa (10.3.0~rc3-2) experimental; urgency=medium
+
+  [ Andreas Boll ]
+  * Add 01_gallium-util-add-missing-u_debug-include.patch, fixes FTBFS on
+    big endian archs.
+  * Enable --with-egl-platforms=drm on kfreebsd-any, should fix FTBFS.
+  * Don't try to install vdpau hardlinks on hurd, should fix FTBFS.
+
+  [ Fabio Pedretti ]
+  * debian/rules: minor cleanup.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 15 Sep 2014 11:01:55 +0200
+
+mesa (10.3.0~rc3-1) experimental; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * Build with llvm 3.5.
+  * New upstream release.
+  * Remove mention of tdfx.
+
+  [ Timo Aaltonen ]
+  * mesa-common-dev: Add glcorearb.h.
+  * not-installed: Skip libglapi.so.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 08 Sep 2014 15:50:42 +0200
+
+mesa (10.2.6-1ubuntu3) utopic; urgency=medium
+
+  * And revert again for now.. (LP: #1360241)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Fri, 22 Aug 2014 15:02:30 +0200
+
+mesa (10.2.6-1ubuntu2) utopic; urgency=medium
+
+  * Fixup typo.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 21 Aug 2014 18:39:52 +0200
+
+mesa (10.2.6-1ubuntu1) utopic; urgency=medium
+
+  * Drop 101_ubuntu_hidden_glname.patch.
+    - 8 years old patch supposedly to fix glx-tls, but if it was
+      important nowadays I would have expected it in upstream by now.
+  * Rebuild against llvm 3.5-rc3.
+  * Add explicit depends on llvm 3.5-rc3 for libgl1-mesa-dri.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 21 Aug 2014 15:27:00 +0200
+
+mesa (10.2.6-1) unstable; urgency=medium
+
+  * New upstream release.
+  * Drop x32-updates.diff, upstream.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 21 Aug 2014 15:06:36 +0200
+
+mesa (10.2.5-1ubuntu2) utopic; urgency=medium
+
+  * Temporarily revert to llvm 3.4, too many regressions.
+
+ -- Maarten Lankhorst <maarten.lankhorst@canonical.com>  Wed, 13 Aug 2014 23:11:15 +0200
+
+mesa (10.2.5-1ubuntu1) utopic; urgency=low
+
+  * Rebuild with llvm 3.5.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 12 Aug 2014 13:05:29 +0200
+
+mesa (10.2.5-1) unstable; urgency=medium
+
+  [ Andreas Boll ]
+  * New upstream release.
+    - nv50: fix build failure on m68k due to invalid struct alignment
+      assumptions (Closes: #728053).
+    - i915: Fix up intelInitScreen2 for DRI3 (Closes: #754297).
+
+  [ Matthias Klose ]
+  * Add patch to fix FTBFS on x32. (Closes: #757703)
+    - x32-updates.patch
+
+  [ Maarten Lankhorst ]
+  * Enable support for freedreno.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 11 Aug 2014 13:34:58 +0200
+
+mesa (10.2.4-1) unstable; urgency=medium
+
+  * New upstream release.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 20 Jul 2014 10:20:05 +0200
+
+mesa (10.2.3-0ubuntu1) utopic; urgency=low
+
+  * Merge from unreleased unstable to fix vmwgfx.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 09 Jul 2014 11:57:29 +0200
+
+mesa (10.2.3-1) unstable; urgency=low
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+
+  [ Julien Cristau ]
+  * Add debian/upstream/signing-key.asc, and add pgpsigurlmangle option to
+    debian/watch so uscan can check signatures on release tarballs.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 09 Jul 2014 19:39:06 +0200
+
+mesa (10.2.2-1ubuntu1) utopic; urgency=medium
+
+  * Merge with released debian unstable.
+    - New upstream release.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 03 Jul 2014 11:44:05 +0200
+
+mesa (10.2.2-1) unstable; urgency=medium
+
+  [ Andreas Boll ]
+  * New upstream release.
+    - glx: Don't crash on swap event for a Window (non-GLXWindow)
+      (Closes: #685328).
+    - 01_targets-xa-limit-the-amount-of-exported-symbols.diff dropped,
+      upstream
+  * Cherry-pick commit b4dcf87 (glxext: Send the Drawable's ID in the
+    GLX_BufferSwapComplete event) from upstream, fixes intel + dri3.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 03 Jul 2014 09:54:48 +0200
+
+mesa (10.2.1-2ubuntu3) utopic; urgency=low
+
+  * Fix segfault in Mir EGL platform on i965 (LP: #1336854)
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Thu, 03 Jul 2014 11:52:41 +1000
+
+mesa (10.2.1-2ubuntu2) utopic; urgency=medium
+
+  * Fix FTBFS by fixing 117-static-gallium.patch
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 25 Jun 2014 11:41:13 +0200
+
+mesa (10.2.1-2ubuntu1) utopic; urgency=medium
+
+  * Merge with released debian unstable.
+    - New upstream release.
+    - Drop upstreamed patches.
+    - Refresh mir patch.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 23 Jun 2014 15:52:33 +0200
+
+mesa (10.2.1-2) unstable; urgency=medium
+
+  * Upload to unstable.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 23 Jun 2014 12:00:09 +0200
+
+mesa (10.2.1-1) experimental; urgency=medium
+
+  [ Andreas Boll ]
+  * New upstream release.
+    - 01_glapi-Duplicate-GLES1-prototypes-in-glapi_dispatch.c.diff
+      dropped, upstream
+  * Add 01_targets-xa-limit-the-amount-of-exported-symbols.diff, fixes
+    FTBFS with gcc-4.9.
+  [ Maarten Lankhorst ]
+  * Attempt to fix a FTBFS on hurd.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 16 Jun 2014 15:41:59 +0200
+
+mesa (10.2.0~rc4-2) experimental; urgency=medium
+
+  [ Andreas Boll ]
+  * Add 01_glapi-Duplicate-GLES1-prototypes-in-glapi_dispatch.c.diff,
+    should fix FTBFS on non-i386 and non-amd64.
+
+  [ Emilio Pozuelo Monfort ]
+  * Upload to experimental.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Sat, 31 May 2014 00:44:19 +0200
+
+mesa (10.2.0~rc4-1) experimental; urgency=medium
+
+  [ Fabio Pedretti ]
+  * debian/rules: remove unused --with-llvm-shared-libs configure option
+  * debian/control: remove python-libxml2 dependency
+
+  [ Julien Cristau ]
+  * Bump libdrm-dev build-dep to 2.4.54 per configure.ac.
+  * Bump libxcb-dri2 and libxcb-glx build-deps per configure.ac.
+  * Remove Cyril Brulebois from Uploaders.
+  * debian/rules: explicitly disable omx.
+
+  [ Maarten Lankhorst ]
+  * New upstream release candidate.
+
+  [ Andreas Boll ]
+  * New upstream release candidate.
+    - 01_no_undefined.diff dropped, upstream
+  * Don't try to enable xa on !linux.
+
+  [ Emilio Pozuelo Monfort ]
+  * Upload to experimental.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Sat, 24 May 2014 15:16:23 +0200
+
+mesa (10.2.0~rc1-1) experimental; urgency=medium
+
+  [ Timo Aaltonen ]
+  * New upstream release candidate.
+    - 02_gbm_no_undefined.diff dropped, upstream
+    - 03_gbm_make_devices_static.diff dropped, upstream
+  * control: Bump libdrm-dev build-dependency.
+  * Drop a symbol from libxatracker2.
+  * libosmesa6: Bump the soname to upstream default (8), drop
+    04_osmesa_version.diff. Add a symlink with the old name to point to
+    the new lib.
+
+  [ Julien Cristau ]
+  * Add 01_no_undefined.diff to actually add -Wl,--no-undefined to the linker
+    flags for our shared libraries.
+
+  [ Andreas Boll ]
+  * Relax ocl-icd-libopencl1 dependency to allow the generic virtual
+    libopencl1 as a valid alternative (Closes: #745765).
+  * Add missing separator between dependency items '${misc:Depends}'
+    and 'libglapi-mesa (= ${binary:Version})'.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 14 May 2014 22:57:08 +0200
+
+mesa (10.1.4-1) unstable; urgency=medium
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+
+  [ Andreas Boll ]
+  * New upstream release.
+  * Bump llvm-3.4-dev and libclang-3.4-dev to 1:3.4.1-3
+    - Enables geometry shaders on radeonsi
+
+  [ Emilio Pozuelo Monfort ]
+  * Upload to unstable.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Tue, 27 May 2014 12:05:35 +0200
+
+mesa (10.1.3-0ubuntu1) utopic; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * Merge from unreleased debian-unstable.
+
+  [ Timo Aaltonen ]
+  * fix-gpu-hangs-on-bdw.diff: Upstream commit to fix various GPU hangs
+    on Broadwell. (LP: #1318589)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 12 May 2014 09:51:08 +0000
+
+mesa (10.1.2-1) unstable; urgency=medium
+
+  [ Andreas Boll ]
+  * New upstream release.
+    + i965: Don't enable reset notification support on Gen4-5 (Closes: #746557)
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 06 May 2014 09:31:26 +0200
+
+mesa (10.1.1-1) unstable; urgency=low
+
+  [ Andreas Boll ]
+  * New upstream release.
+  * Relax ocl-icd-libopencl1 dependency to allow the generic virtual
+    libopencl1 as a valid alternative (Closes: #745765).
+  * Add missing separator between dependency items '${misc:Depends}'
+    and 'libglapi-mesa (= ${binary:Version})'.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 27 Apr 2014 19:51:45 +0200
+
+mesa (10.1.0-4ubuntu5) trusty; urgency=medium
+
+  * enable-bdw.diff: Enable Broadwell support. (LP: #1300258)
+  * fix-unity-on-bdw.diff: Fix rendering on unity.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Mon, 14 Apr 2014 09:59:17 +0300
+
+mesa (10.1.0-4ubuntu4) trusty; urgency=medium
+
+  * Cherry-pick patches to improve stability with vmware. (LP: #1284134)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 10 Apr 2014 12:08:10 +0200
+
+mesa (10.1.0-4ubuntu3) trusty; urgency=medium
+
+  * i965-dont-call-abort-on-unknown-dev.diff: Allow using a fallback
+    driver when the native one doesn't support the device.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Wed, 09 Apr 2014 12:42:49 +0300
+
+mesa (10.1.0-4ubuntu2) trusty; urgency=medium
+
+  * fix-kwin.diff: i965; Don't check reset status on gen4/5. (LP: #1299499)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 01 Apr 2014 16:58:02 +0300
+
+mesa (10.1.0-4ubuntu1) trusty; urgency=medium
+
+  * Merge from unreleased debian sid.
+  * Add explicit libudev1 | libudev0 dependency. (LP: #1296947)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 31 Mar 2014 09:56:17 +0000
+
+mesa (10.1.0-5) unstable; urgency=low
+
+  [ Maarten Lankhorst ]
+  * Add explicit libudev1 dependency (LP: #1296947)
+    - libudev is being dlopened now, but still a dependency.
+
+  [ Julien Cristau ]
+  * Fix libegl1-mesa-dev installability on hurd, which doesn't have
+    libegl1-mesa-drivers (closes: #742335).  Thanks, Pino Toscano!
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 31 Mar 2014 15:58:53 +0200
+
+mesa (10.1.0-4) unstable; urgency=medium
+
+  [ Andreas Boll ]
+  * Fix unsatisfiable libwayland-egl1-mesa and libwayland-dev dependency on
+    !linux (Closes: #742306).
+  * Install /etc/drirc on hurd (Closes: #741572).
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 22 Mar 2014 10:39:12 +0100
+
+mesa (10.1.0-3) unstable; urgency=medium
+
+  [ Andreas Boll ]
+  * Build OpenCL only on architectures where we have LLVM enabled.
+  * Actually enable radeonsi on kfreebsd.
+
+  [ Sven Joachim ]
+  * Drop dependency of libegl1-mesa-drivers on libgl1-mesa-dri again.
+
+  [ Julien Cristau ]
+  * Steal Ubuntu patch to work around build failure on armhf
+    (https://bugs.freedesktop.org/show_bug.cgi?id=72064)
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 19 Mar 2014 22:48:14 +0100
+
+mesa (10.1.0-2) experimental; urgency=medium
+
+  [ Sjoerd Simons ]
+  * Install libwayland-egl in a separate library package (libwayland-egl1-mesa)
+    and provide a virtual libwayland-egl1 package. (Closes: #739269).
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 17 Mar 2014 23:11:14 +0100
+
+mesa (10.1.0-1ubuntu1) trusty; urgency=medium
+
+  * Merge from released debian-experimental.
+  * Rename libvdpau1-drivers-mesa to mesa-vdpau-drivers.
+    - This makes ubuntu package names identical to debian.
+  * Disable opencl for now.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 13 Mar 2014 16:30:35 +0100
+
+mesa (10.1.0-1) experimental; urgency=low
+
+  [ Andreas Boll ]
+  * Disable dri3 on !linux
+  * Enable building drivers for libvdpau1 (Closes: #705558).
+  * New upstream release.
+  * Drop 01-hurd.diff, upstream in 10.1.0.
+  * Next attempt to fix FTBFS on hurd
+
+  [ Sven Joachim ]
+  * Drop dependency of libegl1-mesa-drivers on libgl1-mesa-dri.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 07 Mar 2014 22:16:32 +0100
+
+mesa (10.1.0~rc3-0ubuntu3) trusty; urgency=medium
+
+  * Add --dynamic-list to undo damage from -Bsymbolic-functions.
+    - This fixes vdpau interop properly.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 06 Mar 2014 10:28:47 +0100
+
+mesa (10.1.0~rc3-0ubuntu2) trusty; urgency=medium
+
+  * Install libegl-wayland in /mesa-egl again.
+    - Fixes FTBFS for g-c-c.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 05 Mar 2014 10:17:21 +0100
+
+mesa (10.1.0~rc3-0ubuntu1) trusty; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * Merge from unreleased debian-experimental.
+  * Enable egl, libopenvg, gbm and vdpau for all archs.
+    - This simplifies the build rules considerably, and
+      is closer to debian behavior.
+  * Cherry pick fixes for playback of interlaced videos. (LP: #1287326)
+  * Cherry pick fixes for crashes related to vdpau interop.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 25 Feb 2014 14:29:26 +0100
+
+mesa (10.1.0~rc2-1) experimental; urgency=medium
+
+  [ Maarten Lankhorst ]
+  * Add missing depends to keep lib(e)gl1-dev usable.
+  * Bump to rc2.
+
+  [ Emilio Pozuelo Monfort ]
+  * Update build dependencies and dependencies minimum versions. Thanks to
+    Fabio Pedretti <fabio.ped@libero.it> for the patch.
+
+  [ Andreas Boll ]
+  * Attempt to fix FTBFS on hurd.
+  * Cherry pick some fixes for GLX fbconfig. (Closes: #739691)
+
+  [ Samuel Thibault ]
+  * Enable egl and gles on hurd (closes: #729260)
+
+  [ Julien Cristau ]
+  * libgbm1.symbols: try to avoid listing private symbols.
+  * Enable radeon/r200/r300/r600/radeonsi on kfreebsd (closes: #732337).
+    Thanks, Robert Millan!
+  * gallium: fix build failure on powerpcspe (closes: #695746).  Thanks, Roland
+    Stigge!
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 02 Mar 2014 20:22:47 +0100
+
+mesa (10.1.0~rc1-1ubuntu4) trusty; urgency=medium
+
+  * Merge from debian git
+    - Enable building drivers for libvdpau1
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 20 Feb 2014 21:46:24 +0200
+
+mesa (10.1.0~rc1-1ubuntu3) trusty; urgency=low
+
+  [ Robert Hooker ]
+  * Add more missing depends to lib(e)gl1-mesa-dev.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 19 Feb 2014 19:38:33 +0100
+
+mesa (10.1.0~rc1-1ubuntu2) trusty; urgency=low
+
+  * Add libxcb-dri3-dev to lib(e)gl1-mesa-dev depends.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 19 Feb 2014 19:06:29 +0100
+
+mesa (10.1.0~rc1-1ubuntu1) trusty; urgency=low
+
+  * First mesa 10.1 release candidate.
+  * Refresh egl-platform-mir.patch and drop upstreamed bits.
+  * Merge more upstream fixes post rc1.
+  * Cherry pick some fixes for GLX fbconfig. (LP: #1278168)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 19 Feb 2014 17:19:12 +0100
+
+mesa (10.1.0~rc1-1) experimental; urgency=low
+
+  * New upstream release.
+  * Add new build-depends for dri3.
+  * Refresh libegl1-mesa and gbm symbols.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 12 Feb 2014 11:50:39 +0100
+
+mesa (10.0.2-1) experimental; urgency=low
+
+  [ Maarten Lankhorst ]
+  * Stop building libgl1-mesa-dri-experimental (Closes: #685104).
+    - It's been empty since 8.0.
+  [ Matthias Klose ]
+  * Move to llvm-3.4.
+
+  [ Julien Cristau ]
+  * Fix FTBFS on kfreebsd.
+  * ... and attempt to fix FTBFS on hurd.
+  * New upstream stable release.
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 25 Jan 2014 10:44:22 +0100
+
+mesa (10.0.1-1ubuntu2) trusty; urgency=medium
+
+  [ Matthias Klose ]
+  * Build using llvm-3.4.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 19 Dec 2013 19:21:03 +0100
+
+mesa (10.0.1-1ubuntu1) trusty; urgency=low
+
+  * New upstream release.
+  * Do not enable llvmpipe on armhf. (LP: #1260068)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 19 Dec 2013 18:03:32 +0100
+
+mesa (10.0.1-1) experimental; urgency=low
+
+  * New upstream release.
+  * Do not attempt to build i915 and i965 on arm.
+  * Enable radeonsi on arm.
+  * Disable llvmpipe on armhf, it regresses.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 18 Dec 2013 15:18:25 +0100
+
+mesa (10.0.0-1ubuntu4) trusty; urgency=medium
+
+  * libegl1-mesa-dev: Don't depend on libmirclient-dev on ppc64.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 16 Dec 2013 10:51:02 +0100
+
+mesa (10.0.0-1ubuntu3) trusty; urgency=low
+
+  * Refresh Mir EGL platform patch.
+    + Adds EGL_KHR_image support, needed for nested Mir-on-Mir support
+    + Adds resize support (LP: #1227744)
+    + Properly free()s surface front and back buffers on destroy (LP: #1211982)
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Wed, 11 Dec 2013 12:24:46 +0800
+
+mesa (10.0.0-1ubuntu2) trusty; urgency=low
+
+  * Do not require libdrm-intel on arm, fixes FTBFS regression.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 09 Dec 2013 19:20:07 +0100
+
+mesa (10.0.0-1ubuntu1) trusty; urgency=low
+
+  * Merge from released debian-experimental, changes:
+    - Reset versions on libxatracker2 symbols.
+    - Enable llvmpipe on armhf.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 09 Dec 2013 11:59:03 +0100
+
+mesa (10.0.0-1) experimental; urgency=low
+
+  [ Emilio Pozuelo Monfort ]
+  * debian/control:
+    + Let libegl1-mesa-dev depend on libwayland-dev as wayland-egl.pc
+      requires wayland-client.pc.
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+  * Refresh patches for 10.0-rc1.
+  * Bump libdrm-dev requirement to 2.4.48 for intel.
+  * Add breaks on xserver-xorg-core without support for loading megadriver.
+  * Cherry pick commit to hide some gbm symbols.
+  * Manually install *_dri.so to preserve mega-driver hardlinks.
+
+  [ Timo Aaltonen ]
+  * rules: Enable llvmpipe on armhf, should work now.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 08 Dec 2013 15:17:17 +0100
+
+mesa (10.0.0-0ubuntu1) trusty; urgency=low
+
+  * Merge from unreleased debian-experimental.
+  * Drop upstreamed aarch64 patch.
+  * Refresh patches.
+  * Disable 118-dricore-gallium.patch for now, requires porting.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 09 Dec 2013 11:11:41 +0100
+
+mesa (9.2.2-1ubuntu2) trusty; urgency=medium
+
+  * Build without Mir backend on ppc64.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sat, 07 Dec 2013 14:42:44 +0100
+
+mesa (9.2.2-1ubuntu1) trusty; urgency=low
+
+  * Merge from released debian-unstable.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 22 Oct 2013 12:17:27 +0200
+
+mesa (9.2.2-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 22 Oct 2013 10:59:20 +0200
+
+mesa (9.2.1-1ubuntu3) saucy; urgency=low
+
+  * libegl1-mesa-dev: Don't depend on libmirclient-dev on AArch64.
+
+ -- Matthias Klose <doko@ubuntu.com>  Thu, 10 Oct 2013 16:25:10 +0200
+
+mesa (9.2.1-1ubuntu2) saucy; urgency=low
+
+  * Build without Mir backend on AArch64.
+
+ -- Matthias Klose <doko@ubuntu.com>  Wed, 09 Oct 2013 23:11:33 +0000
+
+mesa (9.2.1-1ubuntu1) saucy; urgency=low
+
+  [ Robert Hooker ]
+  * Add i915-dont-default-to-2.1.patch: Stop defaulting to OpenGL 2.1 that is not
+    fully implemented in hardware on gen3 GPUs, the software fallbacks make Unity
+    unusably slow. (LP: #1222602)
+  [ Maarten Lankhorst ]
+  * New upstream bugfix release. (LP: #1232940)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 07 Oct 2013 10:39:18 +0200
+
+mesa (9.2.1-1) experimental; urgency=low
+
+  * New upstream release.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 07 Oct 2013 10:00:39 +0200
+
+mesa (9.2-1ubuntu3) saucy; urgency=low
+
+  * Create a libglapi.so symlink. (LP: #1232000)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 01 Oct 2013 13:09:38 +0200
+
+mesa (9.2-1ubuntu2) saucy; urgency=low
+
+  * Fix double-free in Mir EGL platform (LP: #1221974)
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Tue, 17 Sep 2013 12:05:36 -0400
+
+mesa (9.2-1ubuntu1) saucy; urgency=low
+
+  * Merge from debian-experimental, remaining changes:
+    - Add support for aarch64.
+    - Build libgallium and libmesagallium shared.
+    - Enable mir support.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 28 Aug 2013 14:02:08 +0200
+
+mesa (9.2-1) experimental; urgency=low
+
+  [ Jon Severinsson ]
+  * control: Recommend libtxc-dxtn-s2tc0 | libtxc-dxtn0, not just the virtual libtxc-dxtn0.
+  * control: Bump libdrm-dev build-dependency to 2.4.45.
+  * control: Add versioned libglapi-mesa dependency to libosmesa6.
+  * libgl1-mesa(-swx11)-dev.install.in: Install the correct pkgconfig/gl.pc files.
+  * rules: Add --disable-shared-glapi to the swx11-i386-i686 target.
+
+  [ Maarten Lankhorst ]
+  * Bump libdrm-dev to 2.4.46.
+
+  [ Sven Joachim ]
+  * Remove the workaround for sparc introduced in version 7.10-2.
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+  * Refresh 02_gbm_no_undefined.diff.
+  * Drop 12_fix_glapi_gen.diff, upstreamed.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 28 Aug 2013 10:28:20 +0200
+
+mesa (9.2~rc1-1) experimental; urgency=low
+
+  * New upstream release.
+  * Refresh patches for 9.2:
+    - 02_gbm_no_undefined.diff.
+    - 04_osmesa_version.diff
+    - 06_kfreebsd-ftbfs.diff
+  * Removed writes to srcdir, fixing parallel builds.
+    - 12_fix_glapi_gen.diff
+  * Require llvm-3.3-dev >= 1:3.3-4 and libelf-dev.
+  * Update symbols files.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 20 Aug 2013 15:42:31 +0200
+
+mesa (9.1.7-1) unstable; urgency=low
+
+  [ Andreas Beckmann ]
+  * libgl1-mesa-glx: Add Breaks: glx-diversions (<< 0.4) because the old
+    versions were not aware of libGL.so.1.2.0.  (Closes: #720069)
+
+  [ Maarten Lankhorst ]
+  * New upstream release.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 07 Oct 2013 11:34:34 +0200
+
+mesa (9.1.6-2ubuntu2) saucy; urgency=low
+
+  * Import missing powerpc build fixes.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 13 Aug 2013 16:23:32 +0200
+
+mesa (9.1.6-2ubuntu1) saucy; urgency=low
+
+  * New upstream release.
+  * Merge from RELEASED debian-unstable. \o/
+  * Remaining changes:
+    - Building mir.
+    - Add support for aarch64.
+    - Linking against shared dricore/gallium.
+  * Drop fix-osmesa-exports.diff, upstreamed.
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 13 Aug 2013 15:39:43 +0200
+
+mesa (9.1.6-2) unstable; urgency=low
+
+  * Don't run 'make -j' if DEB_BUILD_OPTIONS doesn't set parallel.  Oops.
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 12 Aug 2013 08:00:21 +0200
+
+mesa (9.1.6-1) unstable; urgency=low
+
+  [ Andreas Boll ]
+  * New upstream release. (Closes: #717410)
+  * Cherry-pick commit 0dbbfa0 (mesa: Fix MESA_PATCH version) from
+    upstream.
+
+  [ Julien Cristau ]
+  * Don't run configure for different builds in parallel.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 11 Aug 2013 18:15:58 +0200
+
+mesa (9.1.4-0ubuntu8) saucy; urgency=low
+
+  * hide the now missing Mir symbol on powerpc.
+
+ -- Didier Roche <didrocks@ubuntu.com>  Mon, 05 Aug 2013 13:43:52 +0200
+
+mesa (9.1.4-0ubuntu7) saucy; urgency=low
+
+  * rules,control: Don't build Mir support on powerpc as it's not available
+    there.
+
+ -- Didier Roche <didrocks@ubuntu.com>  Mon, 05 Aug 2013 12:59:59 +0200
+
+mesa (9.1.4-0ubuntu6) saucy; urgency=low
+
+  * Add Mir EGL platform
+
+ -- Christopher James Halse Rogers <raof@ubuntu.com>  Fri, 02 Aug 2013 13:30:23 +1000
+
+mesa (9.1.4-0ubuntu5) saucy; urgency=low
+
+  * Fix the build on Aarch64, disabling most of the acceleration
+    packages.
+
+ -- Matthias Klose <doko@ubuntu.com>  Mon, 22 Jul 2013 14:29:24 +0200
+
+mesa (9.1.4-0ubuntu4) saucy; urgency=low
+
+  * Fix build on Aarch64.
+  * debian/rules: Split out a configure target to be able to restart
+    builds.
+
+ -- Matthias Klose <doko@ubuntu.com>  Sun, 21 Jul 2013 13:43:45 +0200
+
+mesa (9.1.4-0ubuntu3) saucy; urgency=low
+
+  * Add fix-os-mesa-exports.diff from upstream. (LP: #1066599)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 16 Jul 2013 11:29:32 +0200
+
+mesa (9.1.4-0ubuntu2) saucy; urgency=low
+
+  * control, rules: Again, add llvm-3.2-dev to build-depends for
+    powerpc, enable gallium llvm and shared libs (FTBFS).
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 02 Jul 2013 15:26:47 +0300
+
+mesa (9.1.4-0ubuntu1) saucy; urgency=low
+
+  * Merge from unreleased debian git, remaining changes:
+    - don't build libgl1-mesa-swx11*
+    - use alternatives for libEGL, libGL*, libOpenVG
+    - build a common libgallium library to save disk space
+    - clean up extra po files
+  * Drop patches now upstream.
+  * Update revert-a64c1eb9b110.diff.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 02 Jul 2013 10:06:51 +0300
+
+mesa (9.1.4-1) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * Don't call wayland_buffer_is_drm from libgbm, it's in libEGL
+    (closes: #712556).
+  * Make sure libgbm doesn't have undefined symbols.
+
+  [ Andreas Boll ]
+  * Use dpkg-buildflags.
+  * Disable silent rules.
+  * Cherry-pick commit 0829b89 (mesa: Fix ieee fp on Alpha) from upstream
+    (Fixes FTBFS on alpha)
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+
+  [ Julien Cristau ]
+  * libegl1-mesa-drivers depends on libgl1-mesa-dri for libllvmradeon
+    (closes: #714828)
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 06 Jul 2013 11:37:34 +0200
+
+mesa (9.1.3-6) unstable; urgency=low
+
+  * Team upload.
+
+  * debian/libegl1-mesa.symbols:
+    + More kfreebsd build fixes. Mark some symbols as linux-any.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Fri, 07 Jun 2013 20:27:55 +0200
+
+mesa (9.1.3-5) unstable; urgency=low
+
+  * Team upload.
+
+  [ Andreas Boll ]
+  * debian: Don't install libllvmradeon*.so on kfreebsd-*, fixes FTBFS.
+
+  [ Emilio Pozuelo Monfort ]
+  * Upload to unstable.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Fri, 07 Jun 2013 14:12:43 +0200
+
+mesa (9.1.3-4) unstable; urgency=low
+
+  * Team upload.
+
+  [ Andreas Boll ]
+  * debian: Fix another kfreebsd-* FTBFS with adding libgl1-mesa-
+    dri.install.kfreebsd.in, where we don't install gallium-pipe/*.so
+
+  [ Emilio Pozuelo Monfort ]
+  * Release to unstable.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Fri, 07 Jun 2013 00:50:34 +0200
+
+mesa (9.1.3-3) experimental; urgency=low
+
+  [ Andreas Boll ]
+  * debian/not-installed: Remove /etc/drirc, it's shipped since 8.0.5-1.
+    Fixes build on hurd.
+  * debian: Fix build regression on !hurd.
+    Fix it with libgl1-mesa-dri.install.hurd.in, where we don't install drirc.
+  * Cherry-pick commit 7de78ce5, 07f2dee and 9622049 from upstream
+    (Fixes FTBFS on kfreebsd-*)
+    - configure.ac: Remove redundant checks of enable_dri.
+    - configure.ac: Build dricommon for DRI gallium drivers
+    - configure.ac: Build dricommon for gallium swrast
+  * Memory corruption (OOB read/write) in i965 driver [CVE-2013-1872]
+
+  [ Julien Cristau ]
+  * Build i915 and i965 on kfreebsd.
+
+ -- Cyril Brulebois <kibi@debian.org>  Thu, 06 Jun 2013 10:29:15 +0200
+
+mesa (9.1.3-2) experimental; urgency=low
+
+  * Team upload.
+
+  [ Julien Cristau ]
+  * Fix build of swrast only without libdrm, causing build failure on hurd
+    (cherry-picked from upstream).  Thanks, Andreas Boll!
+
+  [ Andreas Boll ]
+  * debian/not-installed: Remove glut headers
+  * debian/patches: Drop 05_kfreebsd-egl-x11.diff, fixed by eglibc (2.17-4)
+  * debian/rules: Use rm -f instead of rm for deleting libdricore*.so, fixes
+    build failure on kfreebsd-*.
+  * glapi: Add some missing static_dispatch=false annotations to
+    es_EXT.xml. Fixes FTBFS on powerpc and ia64 (cherry-picked from
+    upstream).
+
+  [ Emilio Pozuelo Monfort ]
+  * Release to experimental.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Mon, 03 Jun 2013 15:25:19 +0200
+
+mesa (9.1.3-1) experimental; urgency=low
+
+  * Team upload.
+  * New upstream release.
+    - Set close on exec flag when opening dri devices (Closes: #651370).
+    - Don't emit a .note.ABI-tag section anymore (Closes: #628758).
+
+  [ Timo Aaltonen ]
+  * Refresh patches
+    - disable 05_kfreebsd-egl-x11.diff for now.
+  * control: Added libtool to build-depends.
+  * rules: Drop special handling of config.{guess,sub}, not needed anymore.
+  * rules, libosmesa*: Build only the 32bit OSMesa library.
+  * control: Bump libdrm build-dep to 2.4.39.
+  * control: Bump libwayland-dev build-dep to 0.95.
+  * rules: Update the clean target.
+  * rules: Add --disable-shared-glapi to the swx11 targets.
+  * libosmesa*.install.in: Install files from the correct path.
+  * rules: --with-driver= is deprecated, use --enable-foo.
+  * rules: Purge .la files before dh_install.
+  * Update symbols.
+  * libgl1-mesa-dri.install*.in: Add libdricore.
+  * control: Add new dependencies to libgl1-mesa-dev.
+  * rules, libgl1-mesa-dri.install.linux.in: Add support for radeonsi.
+  * rules: Build llvm shared libs on platforms that support llvm.
+  * control, rules, libglu*: Remove libglu packaging, since it's been split
+    off upstream.
+  * rules: Disable dri for the swx11 targets.
+  * not-installed: Updated.
+  * Update symbols for libgles2-mesa and libxatracker1.
+  * libegl1-mesa-drivers.install.linux: Bump libwayland-egl.so version
+  * control: Add libdrm-dev to mesa-common-dev Depends.
+  * control: Build-depend on llvm-3.2-dev (Closes: #678822).
+  * libgl1-mesa-dri.install.in: Include gallium-pipe/*.so and libllvmradeon*.so.
+  * rules: Add files to clean.
+  * control: Add libxcb-dri2-0-dev to libgl1-mesa-dev depends.
+
+  [ Steve Langasek ]
+  * Install all dri drivers from the DESTDIR tree, instead of copying them
+    from the build tree; this simplifies the install rules since we know
+    already that we're only building drivers that we want to ship, and
+    avoids rpath problems with libtool linking to in-tree convenience
+    libraries.
+  * debian/rules: don't install libdricore*.so, this isn't a public library.
+  * Add Pre-Depends on multiarch-support to libgl1-mesa-dri, since we're
+    shipping a shared library in the package; not an issue in practice since
+    this is all post-wheezy / post-precise, but it's an archive reject error
+    in Debian right now so let's just be complete.
+
+  [ Maarten Lankhorst ]
+  * Bump standards-version to 3.9.3.
+  * control: Bump libwayland-dev build-dep to 1.0.2.
+  * Remove 13-llvm-config-pick-a-version.diff and just pass a flag to configure.
+
+  [ Robert Hooker ]
+  * Drop xutils-dev build dep, makedepend is no longer required
+  * Recommend libtxc-dxtn0 in libgl1-mesa-dri for easier use with multiarch
+    installs (Closes: #668645).
+  * Drop 02_use-ieee-fp-on-s390-and-m68k.patch, upstream in 9.1.2.
+  * Drop 10-hurd-configure-tweaks.diff, upstream in 9.1.2.
+
+  [ Sven Joachim ]
+  * Bump libdrm-dev build-dependency to 2.4.42.
+
+  [ Rico Tzschichholz ]
+  * Update packaging mesa packaging with xorg-edgers
+
+  [ Emilio Pozuelo Monfort ]
+  * integer overflows calculating memory needs for replies [CVE-2013-1993]
+  * Bump llvm-3.2-dev build dependency to 1:3.2repack-7~ for a fixed
+    llvm-config-3.2 --libdir, otherwise configure fails.
+
+ -- Emilio Pozuelo Monfort <pochu@debian.org>  Tue, 28 May 2013 21:15:55 +0200
+
+mesa (9.1.3-0ubuntu3) saucy; urgency=low
+
+  * Added patches to add/fix Haswell pci-id's (LP: #1175533)
+    - add-vlv-ids.diff
+    - fix-hsw-gt3-names.diff
+    - fix-missing-gt3-id.diff
+    - add-more-reserved-hsw-ids.diff
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Wed, 19 Jun 2013 14:16:47 +0200
+
+mesa (9.1.3-0ubuntu2) saucy; urgency=low
+
+  * Add back a patch that reverts a change which made blur slow on i915,
+    add two other reverts so the big one applies cleanly. (LP: #1187500)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Fri, 07 Jun 2013 15:11:32 +0300
+
+mesa (9.1.3-0ubuntu1) saucy; urgency=low
+
+  [ Robert Hooker ]
+  * New upstream bug-fix release.
+  * Drop upstream patches:
+     - 0001-nv50-fix-3D-render-target-setup.patch
+     - 0002-nv50-nvc0-disable-DEPTH_RANGE_NEAR-FAR-clipping-duri.patch
+     - 0003-nv50-nvc0-fix-3d-blits-restore-viewport-after-blit.patch
+     - 0004-nvc0-fix-for-2d-engine-R-source-formats-writing-RRR1.patch
+     - 100_no_abi_tag.patch
+     - 119-libllvmradeon-link.patch
+     - vbo-fix-crash.diff
+  * debian/patches/117-static-gallium.patch: Refresh for minor change
+    in 9.1.2
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 23 May 2013 10:06:41 +0200
+
+mesa (9.1.1-0ubuntu3) raring; urgency=low
+
+  * Hide x86sse symbols on i386, preventing conflicts. (LP: #1170074)
+    - 120-hide-x86sse.patch
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 18 Apr 2013 12:27:32 +0200
+
+mesa (9.1.1-0ubuntu2) raring; urgency=low
+
+  * control, rules: Add llvm-3.2-dev to build-depends for powerpc, enable
+    gallium llvm and shared libs (FTBFS).
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Wed, 17 Apr 2013 01:42:38 -0600
+
+mesa (9.1.1-0ubuntu1) raring; urgency=low
+
+  [ Timo Aaltonen ]
+  * Merge from unreleased debian git
+    - new upstream release (LP: #1112147, #1164093)
+  * Revert a commit to fix slow blur on intel.
+  * vbo-fix-crash.diff: Patch from the stable tree that fixes a crasher
+    with shared display lists.
+
+  [ Maarten Lankhorst ]
+  * Add some more patches to fix image copy regressions on nouveau.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 16 Apr 2013 15:35:32 +0300
+
+mesa (9.1~git20130207.f1c46c84-0ubuntu1) UNRELEASED; urgency=low
+
+  [ Timo Aaltonen ]
+  * Merge from unreleased debian git.
+  * Refresh patches.
+
+  [ Robert Hooker ]
+  * Drop ubuntu specific libtxc-dxtn-s2tc0 recommends from libgl1-mesa-glx,
+    libgl1-mesa-dri now recommends libtxc-dxtn0.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 07 Feb 2013 18:09:58 +0200
+
+mesa (9.0.3-0ubuntu1) raring; urgency=low
+
+  * New upstream release. (LP: #1134466)
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Thu, 14 Mar 2013 12:18:29 +0100
+
+mesa (9.0.2-0ubuntu1) raring; urgency=low
+
+  * New upstream release.
+  * Decrease size of mesa's libgl1-mesa-dri again
+    - re-enable 117-static-gallium.patch
+    - add 118-dricore-gallium.patch to link against libdricore again
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Tue, 22 Jan 2013 11:54:09 +0100
+
+mesa (9.0.1-0ubuntu1) raring; urgency=low
+
+  * Merge from unreleased debian git.
+    - release 9.0.1
+  * add 118-automake-ldrm.patch to ease backport to precise
+    - upstream commit, targeted for 9.0.2
+
+ -- Maarten Lankhorst <maarten.lankhorst@ubuntu.com>  Mon, 19 Nov 2012 12:03:50 +0100
+
+mesa (9.0-0ubuntu2) raring; urgency=low
+
+  * patches/118-wayland-0.99.diff: Upstream port to wayland 0.99 API
+  * patches/119-wayland-no-0.85.diff: Drop wayland 0.85 defines
+  * patches/120-wayland-no-egl-pixmap.diff: Drop wl_egl_pixmap usage
+  * debian/control: Adjust build-depends to match the above patches
+
+ -- Adam Conrad <adconrad@ubuntu.com>  Sun, 18 Nov 2012 02:52:31 +0000
+
+mesa (9.0-0ubuntu1) quantal; urgency=low
+
+  * Merge from unreleased debian git.
+    - final 9.0 release.
+  * rules: Don't try building gallium swrast for arm, since it doesn't
+    work and wasn't actually built anyway.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Tue, 09 Oct 2012 15:55:51 +0300
+
+mesa (9.0~git20121004.b2048c5e-0ubuntu1) quantal; urgency=low
+
+  * Merge from unreleased debian git.
+    - new snapshot leading to final 9.0.
+  * Drop patch 118, obsolete.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Wed, 03 Oct 2012 18:23:24 +0300
+
+mesa (9.0~git20120917.7cfd42ce-0ubuntu3) quantal; urgency=low
+
+  * Add 118-undefined-symbols.patch, fixing libglapi and libosmesa
+    missing symbols. (LP: #1053088)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 20 Sep 2012 13:25:46 +0300
+
+mesa (9.0~git20120917.7cfd42ce-0ubuntu2) quantal; urgency=low
+
+  * Add Recommends on libtxc-dxtn-s2tc0, required by Bastion, Psychonauts,
+    Amnesia and other games on Intel graphics.  This package provides
+    patent-free s3tc texture support.
+    (LP: #1053029)
+
+ -- Bryce Harrington <bryce@ubuntu.com>  Tue, 18 Sep 2012 21:17:11 -0700
+
+mesa (9.0~git20120917.7cfd42ce-0ubuntu1) quantal; urgency=low
+
+  * Merge from unreleased debian git. (LP: #1047306)
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Mon, 17 Sep 2012 13:24:35 +0300
+
+mesa (9.0~git20120903.e1673d20-0ubuntu1) quantal; urgency=low
+
+  * Merge from unreleased debian git.
+  * Remove 118-remove-assertion.diff, included upstream.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 06 Sep 2012 18:09:56 +0300
+
+mesa (9.0~git20120821.c1114c61-0ubuntu2) quantal; urgency=low
+
+  * Added 118-remove-assertion.diff from upstream (LP: #1042293).
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Mon, 27 Aug 2012 21:12:44 +0300
+
+mesa (9.0~git20120821.c1114c61-0ubuntu1) quantal; urgency=low
+
+  * Merge from unreleased debian git.
+    - Includes support for ATI Trinity PCI IDs (LP: #1009089)
+  * rules, control, libgl1-mesa-swx11*: Remove swx11 support.
+  * Refresh patches:
+    - drop 115_llvm_dynamic_linking.diff,
+      117_nullptr_check_in_query_version.patch, and
+      118_glsl_initialize_samplers.patch, all upstream
+    - disable 116_use_shared_galliumcore.diff until it's reviewed and
+      reworked to apply
+  * not-installed, libegl1-mesa-drivers-install.linux.in: Updated to
+    match the single-pass build.
+  * libgl1-mesa-dri.*install.in: Drop libglsl.so, it's included in
+    libdricore.so now.
+  * rules: Don't disable GLU on the common flags, we need to build it
+    on the dri target.
+  * libglu*install.in: Fix the source file paths to match the build target.
+    Drop the static lib from -dev since only shared libs get built.
+  * libgl1-mesa-dev.install.in: Fix the source file paths to match the
+    build target.
+  * libgl1-mesa-dri.install.linux.in: Don't try to install libgallium.so,
+    which isn't built yet.
+  * rules: Enable llvmpipe on armhf to see if it works or not.
+  * rules: Remove bin/install-sh on clean, and don't create a symlink for
+    it.
+  * control: Add Pre-Depends on dpkg-dev due to the binaries using xz
+    compression.
+
+ -- Timo Aaltonen <tjaalton@ubuntu.com>  Thu, 23 Aug 2012 15:37:30 +0300
+
+mesa (8.0.5-4) unstable; urgency=low
+
+  * Cherry-pick commit 17f1cb1d99 (dri/nouveau: fix crash in
+    nouveau_flush) from upstream master branch.
+
+ -- Sven Joachim <svenjoac@gmx.de>  Wed, 13 Mar 2013 17:52:18 +0100
+
+mesa (8.0.5-3) unstable; urgency=high
+
+  * mesa: add bounds checking for uniform array access (CVE-2012-5129).
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 06 Dec 2012 10:20:40 +0100
+
+mesa (8.0.5-2) unstable; urgency=low
+
+  * Fix regression in 8.0.5 (spurious GL_INVALID_ENUM errors):
+    mesa: test for GL_EXT_framebuffer_sRGB in glPopAttrib().
+    Thanks to Simon Chopin for the report.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 28 Nov 2012 22:09:14 +0100
+
+mesa (8.0.5-1) unstable; urgency=low
+
+  * New upstream stable release
+  * Pull a couple more fixes from upstream's 8.0 branch, including:
+    - nvfx: handle some unknown PIPE_CAPs (closes: 674965)
+  * Install drirc in libgl1-mesa-dri package with some settings for i965
+    (closes: #671747).
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 04 Nov 2012 16:55:17 +0100
+
+mesa (8.0.4-2) unstable; urgency=high
+
+  * Use xz for all binary packages not just *-dbg.
+  * glsl/linker: Avoid buffer over-run in
+    parcel_out_uniform_storage::visit_field (CVE-2012-2864; closes: #685667).
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 24 Aug 2012 00:09:47 +0200
+
+mesa (8.0.4-1) unstable; urgency=low
+
+  [ Sven Joachim ]
+  * New upstream stable release (Closes: #682703).
+  * Cherry-pick commit fbf86c7f0f (i965/gen7: Reduce GT1 WM thread count
+    according to updated BSpec.) from upstream.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 29 Jul 2012 13:17:06 +0200
+
+mesa (8.0.3-1) unstable; urgency=low
+
+  [ Robert Hooker ]
+  * New upstream stable release (Closes: #673532)
+  * Refresh patches.
+
+ -- Cyril Brulebois <kibi@debian.org>  Wed, 13 Jun 2012 14:58:54 +0200
+
+mesa (8.0.2-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 01 May 2012 21:42:35 +0200
+
+mesa (8.0.2-1) experimental; urgency=low
+
+  [ Timo Aaltonen ]
+  * New upstream bugfix release. (LP: #926379)
+  * control: libegl1-mesa-dev should depend on -drivers so that the
+    symlinks work.
+
+  [ Robert Hooker ]
+  * Add libudev-dev to libgbm-dev dependencies.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 29 Apr 2012 15:51:10 +0200
+
+mesa (8.0-2) experimental; urgency=low
+
+  [ Julien Cristau ]
+  * Only build the radeon, r200, i915 and i965 dri drivers on Linux.  They
+    require KMS.
+
+  [ Cyril Brulebois ]
+  * Fix FTBFS on GNU/kFreeBSD with libgl1-mesa-dri.install.kfreebsd.in:
+    there's no *_dri.so file left in the top directory, only swrast is
+    built and shipped under gallium/. So mention it explicitly, in the
+    same way as it is done in the libgl1-mesa-dri.install.linux.in file.
+  * Enable wayland support again, but only on Linux. Wayland needs some
+    porting (it uses *CLOEXEC flags and epoll). For that, add those files
+    since EGL packages are also shipped on GNU/kFreeBSD, and we need to
+    add a few files for Wayland, but only for Linux:
+    - libegl1-mesa-dev.install.linux.in
+    - libegl1-mesa-drivers.install.linux.in
+  * Limit the wl_drm_interface symbol to arch=linux-any accordingly,
+    and bump the version.
+  * Limit the build-dependency on libwayland-dev to linux-any too, and
+    bump it.
+  * Automatically revert changes to bin/{config.{guess,sub},install-sh} in
+    the clean target. The first two are modified, the last one needs to be
+    turned back into a symlink.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 14 Feb 2012 16:18:14 +0100
+
+mesa (8.0-1) experimental; urgency=low
+
+  [ Cyril Brulebois ]
+  * New upstream release.
+  * Disable patch temporarily (needs a refresh):
+    - 11-hurd-ftbfs-again.diff
+  * Drop patch, no longer needed since swrastg was renamed to swrast:
+    - 14-load-swrastg-before-swrast.diff
+  * Update rules file to strop building DRI1 drivers, they went away
+    with the following upstream commit:
+    - dri: Remove all DRI1 drivers (e4344161bd).
+  * Update not-installed for removed files.
+  * Stop trying to ship swrastg through libgl1-mesa-dri-experimental,
+    it replaced the non-gallium variant.
+
+  [ Timo Aaltonen ]
+  * Refresh patches.
+  * control: Add libxcb-glx0-dev to build-depends.
+  * control: Drop libglw1-mesa, libglw1-mesa-dev, glw got moved to a
+    separate source package.
+  * libegl-mesa.symbols, libgles2-mesa.symbols: Add new symbols.
+  * rules: Drop obsolete configure options.
+  * Enable vmwgfx gallium driver & xatracker. (Closes: #652501).
+  * Build llvmpipe swrast only on non-hurd x86, traditional for the
+    rest.
+  * rules: No need to copy nouveau_vieux to the gallium dir, it's
+    installed in libgl1-mesa-dri now.
+  * rules: Handle installing r300_dri.so like other gallium drivers,
+    in libgl1-mesa-dri.install.linux.in.
+
+  [ Robert Hooker ]
+  * Bump libdrm build dep to 2.4.30, x11proto-gl-dev to 1.4.14, and
+    x11proto-dri2-dev to 2.6.
+  * Add libxatracker packaging.
+  * Add libxcb-glx0-dev to libegl1-mesa-dev depends.
+
+  [ Christopher James Halse Rogers ]
+  * debian/control: Add libx11-xcb-dev to libegl1-mesa-dev depends.
+
+ -- Cyril Brulebois <kibi@debian.org>  Fri, 10 Feb 2012 14:02:04 +0100
+
+mesa (7.11.2-1) unstable; urgency=low
+
+  * New upstream release:
+    - Fix a few intel bugs.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 11 Dec 2011 15:43:40 +0100
+
+mesa (7.11.1-1) unstable; urgency=low
+
+  [ Sven Joachim ]
+  * New upstream release.
+  * Move the Nouveau drivers to the libgl1-mesa-dri package
+    (Closes: #645239).
+  * Install the swrastg driver in the libgl1-mesa-dri-experimental package
+    (Closes: #605444).
+    - New patch 14-load-swrastg-before-swrast.diff to prefer swrastg over
+      swrast.
+    - Build-depend on llvm-2.9-dev also on kfreebsd-{amd64,i386}.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 27 Nov 2011 18:54:24 +0100
+
+mesa (7.11-6) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * Inline what's left of debian/scripts/choose-configs in debian/rules.
+  * Enable texture-float for dri (closes: #635651).
+  * Update from upstream's 7.11 branch (commit e7794048)
+  * Merge changes from 7.10.3-4, including:
+    - Fix comments in libegl1-mesa.symbols to avoid impending FTBFS with the
+      upcoming dpkg-dev 1.16.1 (closes: #642690)
+
+  [ Cyril Brulebois ]
+  * Document the symlink dance in README.source.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sat, 24 Sep 2011 20:32:55 +0200
+
+mesa (7.11-5) unstable; urgency=low
+
+  * Merge patch from Pino Tiscano (thanks!):
+    - Use hurd-any instead of: hurd-i386 (“wildcard archs are free”).
+    - Use any-i386 instead of: i386 kfreebsd-i386 hurd-i386.
+    - Rewrite a check in debian/rules to follow the same logic.
+    - Switch libgbm1-dbg to arch: linux-any. This fixes uninstallability
+      on kfreebsd-* by getting rid of this package there.
+    - Switch libglapi-mesa{,-dbg} arch: any. This fixes the FTBFS on
+      hurd-i386^Wany.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 28 Aug 2011 19:07:48 +0200
+
+mesa (7.11-4) unstable; urgency=low
+
+  * Use xz compression for dbg packages.
+  * Simplify dh_strip calls a bit using make variables.
+  * libgbm-dev is also linux-only, not just libgbm1.
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 27 Aug 2011 12:02:42 +0200
+
+mesa (7.11-3) unstable; urgency=low
+
+  * Don't build libgbm on kfreebsd, it needs KMS/udev.
+  * Build/ship r300g on all Linux architectures, not just x86.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 26 Aug 2011 11:04:45 +0200
+
+mesa (7.11-2) unstable; urgency=low
+
+  * Work around the lack of O_CLOEXEC on kfreebsd, fix FTBFS.
+  * Don't crash on BadRequest from DRI2Connect, just fall back to sw or
+    indirect.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 25 Aug 2011 23:13:35 +0200
+
+mesa (7.11-1) unstable; urgency=low
+
+  [ Christopher James Halse Rogers ]
+  * New upstream release.
+    - Fix regression from 7.10, missing characters in text display with
+      intel drivers (Closes: #631516). Thanks to Martin Steigerwald for
+      the report and the tests.
+  * Temporarily disable Wayland EGL backend as it requires a newer
+    libwayland-dev
+  * Update rules for configure changes
+  * debian/lib{egl1,openvg1}-mesa.install.in:
+  * debian/libegl1-mesa-drivers.install.in:
+    - Stop trying to install st_{GL,OpenVG} and pipe_*
+      as they are all now built in to egl_gallium.so
+  * Add libgbm{1,1-dbg,-dev} packages for the new buffer-manager library.
+  * Drop 12-llvm-config-check.diff; upstream.
+  * Refresh 13-llvm-config-pick-a-version.diff for new upstream.
+  * Add strictly versioned dependencies on libglapi-mesa to libgl1-mesa-glx
+    and libegl1-mesa-drivers as they also now depend on this internal library.
+  * debian/rules:
+  * debian/libgl1-mesa-dri.install.linux.in:
+    - Manually install r300g only when we actually build it.  Fixes build on
+      non-i386, non-amd64 linux.
+
+  [ Julien Cristau ]
+  * Don't use dh_testroot in clean.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 25 Aug 2011 00:15:27 +0200
+
+mesa (7.11~0-2) experimental; urgency=low
+
+  * Thank you sbuild for giving a green light when that's not actually the
+    case. Fix missing Pre-Depends for the libegl1-mesa-drivers package
+    (multiarch-support).
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 19 Jun 2011 21:26:00 +0200
+
+mesa (7.11~0-1) experimental; urgency=low
+
+  * New upstream snapshot, from the master branch (up to 2fe39b46e7).
+  * Drop 05_hurd-ftbfs.diff, merged upstream (as 758561786c).
+  * Refresh 06_kfreebsd-ftbfs.diff (due to 8fd8de3995).
+  * Refresh 08-kfreebsd-gallium.diff (adjust offsets).
+  * Add 10-hurd-configure-tweaks.diff to enable x86 assembler on Hurd,
+    thanks to Pino Toscano.
+  * Refresh 11-hurd-ftbfs-again.diff (adjust offsets and drop the
+    src/gallium/auxiliary/os/os_time.c hunk, which should be OK since
+    PIPE_OS_UNIX is used there, and should happily replace the use of
+    PIPE_OS_HURD; and adapt for the removal of the PIPE_OS_EMBEDDED check).
+  * debian/libegl1-mesa.install.in: Stop trying to install egl_dri2.so and
+    egl_glx.so, since they are now built-in (since c98ea26e16).
+  * debian/libgles{1,2}-mesa.install.in: Stop trying to install
+    st_GLESv{1,2}_CM.so (respectively), which got removed. Quoting the
+    commit message: “Remove GLES overlay. With core mesa doing runtime API
+    checks, GLES overlay is no longer needed.” (12583174c5).
+  * Drop --enable-gles-overlay from debian/rules accordingly.
+  * Add 12-llvm-config-check.diff to handle --disable-gallium more
+    properly.
+  * Add 13-llvm-config-pick-a-version.diff, so that llvm-config-2.9 is
+    searched by configure, instead of unversioned llvm-config.
+  * Add a NOT_INSTALLED_EITHER variable to debian/not-installed. A few
+    files might have to be removed, but only if that's a git snapshot
+    (those files aren't in the released tarballs). Let's consider it's OK
+    to run “rm -f” on them: {,dri/}usr/include/GL/glut{,f90}.h
+  * Add libglapi-mesa{,-dbg} packages.
+  * Use a package-name-doesnt-match-sonames override accordingly.
+  * Update libegl1-mesa.symbols with new symbols.
+  * Update libgles{1,2}-mesa.symbols now that internal symbols (_glapi_*
+    and _glthread_GetID) moved to libglapi-mesa.
+  * Add a gentarball target, to generate tarballs for git snapshots.
+  * Replace “The OpenGL utility library…” with “Mesa OpenGL utility
+    library…” in the description of the libglu1-mesa* packages.
+  * Replace radeon with r300 in GALLIUM_DRIVERS to match upstream renaming
+    (5722286be2).
+  * Build r300 classic (through DRI_DRIVERS) everywhere, since r300g comes
+    with a few additional requirements: LLVM is needed for this driver,
+    and apparently only works fine on x86 platform. As a consequence, only
+    build r300g on amd and i386, and add llvm-2.9-dev build-dep on those
+    platforms accordingly. Disable it explicitly on other platforms.
+  * Stop building i915g at all, it's apparently never going to be a
+    suitable replacement for i915c.
+  * Add libwayland-dev build-dep.
+  * Add wayland to EGL_DISPLAYS on Linux.
+  * Ship wayland-egl.pc and libwayland-egl.so in libegl1-mesa-dev; and ship
+    libwayland-egl.so.1* in libegl1-mesa-drivers.
+  * Update libegl1-mesa.symbols with new wl_drm_interface symbol.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 19 Jun 2011 19:01:52 +0200
+
+mesa (7.10.3-4) unstable; urgency=medium
+
+  [ Cyril Brulebois ]
+  * Accept libmotif-dev as an alternative to lesstif2-dev in
+    libglw1-mesa-dev's dependencies, as requested by Michael Hanke
+    (Closes: #631236).
+  * Merge upstream 7.10 branch up to e041956cb2.
+  * Wrap Breaks fields.
+  * Add Breaks: {xserver-xorg-core,libgl1-mesa-glx}-no-multiarch to
+    libgl1-mesa-dri* to handle upgrades from squeeze-backports (without
+    multiarch) to wheezy (with multiarch).
+  * Add lintian overrides for breaks-without-version accordingly, those
+    packages are only provided in squeeze-backports.
+  * Replace “The OpenGL utility library…” with “Mesa OpenGL utility
+    library…” in the description of the libglu1-mesa* packages.
+  * Rename all remaining *.install files as *.install.in and use
+    “${DEB_HOST_MULTIARCH}” instead of “*”.
+  * Use the sed substitution on all debian/*.in files accordingly.
+  * Remove debian/clean, and use the same for loop to remove the generated
+    files.
+  * Set urgency to “medium” to speed things up. Migration to testing is
+    a prerequisite for squeeze backports.
+
+  [ Sven Joachim ]
+  * Fix comments in libegl1-mesa.symbols to avoid impending FTBFS with
+    the upcoming dpkg-dev 1.16.1.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 07 Aug 2011 21:50:46 +0200
+
+mesa (7.10.3-3) unstable; urgency=low
+
+  * Update the “Breaks: xserver-xorg-core” from “(<= 2:1.10.2-1)” to
+    “(<< 2:1.10.2-2)”. The first binNMU migrated to testing too soon,
+    so it was needed to rebuild it again, in testing. Updating the
+    Breaks makes sure that a multiarch mesa doesn't get installed with
+    a server built against a pre-multiarch mesa.
+  * Merge upstream 7.10 branch up to 1ad06c7a25.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 19 Jun 2011 17:31:17 +0200
+
+mesa (7.10.3-2) unstable; urgency=low
+
+  [ Cyril Brulebois ]
+  * Add Breaks against nvidia and fglrx packages, since they are also
+    affected by the multiarch changes, and need fixing. Until fixed
+    packages reach the archive, nvidia and fglrx users should stick to
+    mesa 7.10.2-3 packages, currently available in testing. Thanks to
+    Andreas and Patrick for the version strings (Closes: #630710).
+  * Set CXXFLAGS along with CFLAGS (Closes: #630602). Thanks for the
+    report and the patch, Fabio Pedretti!
+
+  [ Julien Cristau ]
+  * Prepend the multiarch dir to the dri driver search path.  ${ORIGIN}/dri
+    works for libGL, but not for egl_dri2.so (which lives in /usr/lib/*/egl/).
+    Thanks to Michel Dänzer for the heads-up!
+
+ -- Cyril Brulebois <kibi@debian.org>  Fri, 17 Jun 2011 11:46:20 +0200
+
+mesa (7.10.3-1) unstable; urgency=low
+
+  * New upstream release.
+  * Add flex and bison build-deps (even though the generated files are
+    stored in VCS, and shipped…).
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 14 Jun 2011 15:37:41 +0200
+
+mesa (7.10.2-4) unstable; urgency=low
+
+  [ Steve Langasek ]
+  * Build for multiarch.
+
+  [ Cyril Brulebois ]
+  * Explanation of the “Breaks: xserver-xorg-core” part for our users: the
+    server queries the DRI driver path at build time, which is getting
+    changed for multiarch, so the server needs be rebuilt; a binNMU will
+    take care of getting the server ready.
+  * Many thanks for multiarch, Steve!
+  * Update Uploaders list. Thanks, David and Brice!
+  * Wrap Build-Depends.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 14 Jun 2011 12:19:33 +0200
+
+mesa (7.10.2-3) unstable; urgency=low
+
+  * Merge upstream 7.10 branch up to eaadbacb5c.
+  * Ship r600g again, it should be more usable now.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 31 May 2011 17:48:47 +0200
+
+mesa (7.10.2-2) unstable; urgency=low
+
+  [ Cyril Brulebois ]
+  * Merge upstream 7.10 branch up to b8c6362389.
+  * Get rid of leading article in short descriptions, taking care of this
+    lintian tag for almost all binary packages:
+    - description-synopsis-starts-with-article
+  * Get rid of libgl1-mesa-dri-i686, already commented out in control file.
+
+  [ Sven Joachim ]
+  * Avoid installing the nouveau_vieux driver into libgl1-mesa-dri
+    (Closes: #622222).
+
+ -- Cyril Brulebois <kibi@debian.org>  Mon, 02 May 2011 12:29:37 +0200
+
+mesa (7.10.2-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 10 Apr 2011 23:42:41 +0200
+
+mesa (7.10.1-1) experimental; urgency=low
+
+  [ Cyril Brulebois ]
+  * Revert to r600 classic, r600 gallium doesn't seem ready yet, after all
+    (Closes: #612609).
+
+  [ Julien Cristau ]
+  * Set the DRI driver search path to "${ORIGIN}/dri", allowing libGL to find
+    the drivers after being relocated to /usr/lib32 by ia32-libs
+    (closes: #466790).  Thanks to Javier Serrano Polo for the suggestion.
+
+  [ Christopher James Halse Rogers ]
+  * New upstream release
+    - Lots of intel bugfixes, mainly for Sandybridge.
+    - Lots of GLSL spec conformance fixes
+    - Drop 12-fix-fdo-31940.diff; included included in new release.
+  * Remove talloc from build-depends.  This has been re-implemented in-tree.
+  * Also drop patch fixing talloc linking.
+  * Cherry-pick fix from master for changed nouveau headers in libdrm 2.4.24.
+    - Also bump build-depend on libdrm to 2.4.24
+  * Build and install nouveau_vieux driver in libgl1-mesa-dri-experimental.
+    (Closes: #586062)
+
+ -- Cyril Brulebois <kibi@debian.org>  Sun, 03 Apr 2011 21:26:05 +0200
+
+mesa (7.10-4) unstable; urgency=low
+
+  * debian/not-installed: Ignore the same files on *i386.
+  * debian/local/control: Report-with: xserver-xorg{,-core}.
+  * debian/local/script: New bug script, calling glxinfo if available,
+    then the server's bug script.
+  * New patch, thanks to Pino Toscano, fixing FTBFS on GNU/Hurd:
+    - 11-hurd-ftbfs-again.diff
+  * Make a lot of binary packages linux-any kfreebsd-any:
+    - libegl1-mesa
+    - libegl1-mesa-dbg
+    - libegl1-mesa-dev
+    - libegl1-mesa-drivers
+    - libegl1-mesa-drivers-dbg
+    - libopenvg1-mesa
+    - libopenvg1-mesa-dbg
+    - libopenvg1-mesa-dev
+    - libgles1-mesa
+    - libgles1-mesa-dbg
+    - libgles1-mesa-dev
+    - libgles2-mesa
+    - libgles2-mesa-dbg
+    - libgles2-mesa-dev
+  * Disable EGL/Gallium/GLES/state trackers on GNU/Hurd.
+  * Fix FTBFS on sparc64, treat it the same way as sparc. Thanks, Aurélien
+    Jarno! (Closes: #613106).
+  * Add patch for a crash in dri2_invalidate_drawable, thanks to Kai
+    Wasserbäch (Closes: #612640):
+    - 12-fix-fdo-31940.diff
+
+ -- Cyril Brulebois <kibi@debian.org>  Wed, 16 Feb 2011 11:53:26 +0100
+
+mesa (7.10-3) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * debian/rules: RIP lpia.
+
+  [ Cyril Brulebois ]
+  * Cherry-pick from upstream (thanks to Dave Airlie for the hint):
+    - radeon: fix build on non-KMS systems.
+    This fixes the FTBFS on GNU/kFreeBSD.
+  * Ship r300g (r300 gallium) on Linux only: Introduce Linux-specific
+    libgl1-mesa-dri.install.linux to that effect.
+  * According to Michel Dänzer, r600g (r600 gallium) is working well
+    enough to be shipped now. Let's ship it, then!
+  * Cherry-pick from upstream, fixing X's failure to start with UMS on
+    r300g (Closes: #612380):
+    - dri_util: fail driCreateNewScreen if InitScreen is NULL
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 08 Feb 2011 16:06:38 +0100
+
+mesa (7.10-2) unstable; urgency=low
+
+  * Fix FTBFS on i386: Add some files to debian/not-installed, on a
+    per-architecture fashion (those are under /usr/lib/i686/cmov/).
+  * Work around FTBFS on sparc due to new symbols: pass -c1 to
+    dpkg-gensymbols instead of -c4 (on sparc only). Those symbols probably
+    shouldn't be exported, but let's make it possible to build xorg-server
+    1.9 in sid.
+
+ -- Cyril Brulebois <kibi@debian.org>  Sat, 05 Feb 2011 11:16:26 +0100
+
+mesa (7.10-1) experimental; urgency=low
+
+  * New upstream release.
+  * Add patch: 10-fix-talloc-linking.diff
+  * Use debian/not-installed to keep track of files which aren't getting
+    installed for now. Delete them before running dh_install. Use the list
+    of files appearing in the build logs for 7.9+repack-2.
+  * Switch from --list-missing to --fail-missing accordingly.
+  * Pass -c4 to dpkg-gensymbols through dh_makeshlibs to make sure
+    symbol-related changes are noticed and dealt with.
+  * Update symbols files with new symbols:
+    - libopenvg1-mesa.symbols
+  * Remove “mesa internal ASM optimized functions” lines from symbols
+    files, those seem to be gone, and with -c4 passed to dpkg-gensymbols,
+    any related issue will break the build:
+    - libgles1-mesa.symbols
+    - libgles2-mesa.symbols
+  * Stop using dh_strip -s --remaining-packages. When a build is resumed
+    (-nc), this dh_strip call is a no-op if it was previously written to
+    the debhelper log files. Specify all remaining packages instead.
+    That's boring, but avoid getting non-stripped packages.
+  * Add debian/git-cleanup.sh script to ease removing files in git which
+    aren't in the release tarballs, and make dpkg-source error out.
+  * Keep my eyes wide shut and add myself to Uploaders.
+
+ -- Cyril Brulebois <kibi@debian.org>  Tue, 25 Jan 2011 00:20:57 +0100
+
+mesa (7.9+repack-2) experimental; urgency=low
+
+  [ Cyril Brulebois ]
+  * Specify PASV in watch file, and mangle +repack.
+
+  [ Christopher James Halse Rogers ]
+  * debian/control:
+    - Add libudev-dev to build-depends.  This is required for the DRI2 EGL
+      driver to work with a drm display.
+
+  [ Sven Joachim ]
+  * Update for the latest libdrm-nouveau API:
+    - Cherry-pick commit c25fcf5a from Mesa master.
+    - Build-depend on libdrm-dev 2.4.23 or newer.
+  * Use linux-any for linux-libc-dev and libudev-dev build-depends.
+
+  [ Julien Cristau ]
+  * Update from upstream 7.9 branch, commit 0ff45dd.
+  * Refresh patches.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 04 Jan 2011 12:46:59 +0100
+
+mesa (7.9+repack-1) experimental; urgency=low
+
+  * Repack the upstream tarball to get rid of duplicate files which make dpkg
+    choke.  Thanks to Luca Falavigna for his help diagnosing this.
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 15 Nov 2010 23:04:45 +0100
+
+mesa (7.9-1) experimental; urgency=low
+
+  [ Christopher James Halse Rogers ]
+  * debian/control:
+    - Add EGL, GLESv1, GLESv2, and OpenVG virtual packages.  The Khronos group
+      specifies a de-facto linux ABI for these libraries.  We have a similar
+      package for libgl1.
+  * debian/README.Debian:
+    - Document the virtual packages above.
+
+  [ Sven Joachim ]
+  * Bump libdrm-dev build dependency to 2.4.21-2~, the Nouveau Gallium
+    driver does not build with squeeze's libdrm-nouveau1.
+
+  [ Julien Cristau ]
+  * New upstream release.
+  * Update patches:
+    - 03_optional-progs-and-install.patch dropped, demos moved to a separate
+      package
+    - 07-nouveau-update.diff and
+      09-intel-fix-invalidate-before-initialisation.diff dropped, they were
+      backports from upstream
+    - 04_osmesa_version.diff updated
+  * Add build-dep on talloc.
+  * Drop the mesa-utils package, demos were moved out of the mesa tree.
+  * Use --with-egl-platforms instead of --with-egl-displays, and replace kms
+    with drm.
+  * Merge some packaging changes from ubuntu:
+    - libegl1-mesa-drivers-x11,kms: There are no longer separate kms or x11
+      drivers for EGL, libegl1-mesa-drivers now contains a single driver that
+      provides both backends (Christopher James Halse Rogers)
+    - Remove pre-generated .pc's, use the ones generated at build time instead
+      (Robert Hooker)
+    - Build the r600 gallium driver
+    - Update symbols files
+  * README.source: we don't need to repack MesaLib.tar.gz anymore.
+  * Kill old sourceforge url from debian/watch.
+  * Ship the gallium r300 driver instead of the classic one.
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 13 Nov 2010 00:36:11 +0100
+
+mesa (7.8.2-2) experimental; urgency=low
+
+  * Add missing dependencies to libegl1-mesa-dev, thanks to Alexandros
+    Frantzis (LP: #600243).
+  * gallium: handle kfreebsd like freebsd, fixing FTBFS (closes: #585618)
+  * intel: Fix invalidate before initialisation (stolen from fdo bugzilla
+    #29091, fixes server 1.9rc crash when starting an app using GLX 1.3)
+  * Pull from 7.8-branch up to commit d06e011.
+  * Fixup hurd and kfreebsd patches to apply.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 20 Jul 2010 15:57:31 +0200
+
+mesa (7.8.2-1) experimental; urgency=low
+
+  [ Robert Hooker ]
+  * Adjust the build system to install the dri target in a separate
+    DESTDIR, no longer passing --libdir=/usr/lib/glx at configure time
+    messing with the .pc's since it is used for a majority of the 
+    packages now.
+  * Fix up the mesa-common-dev header install location.
+
+  [ Julien Cristau ]
+  * Add ${misc:Depends} to all packages.
+  * libc6-dev is build-essential, no need to depend on it.
+  * Replace nonsensical dependency of libglw1-mesa-dev on libxext6 with a
+    dependency on libxt-dev and lesstif2-dev.
+  * Add new lintian overrides for the package-name-doesnt-match-sonames stuff.
+  * Don't ship progs/objviewer in the tarball, it's insanely big and unused.
+  * New upstream release.
+  * Refresh patches.
+  * Stop shipping an upstream git log, it's unlikely to be useful to anyone,
+    and it's big.
+  * debian/scripts/choose-configs: use DEB_HOST_ARCH, not DEB_BUILD_ARCH
+    (closes: #451648).
+  * Rename radeong_dri.so to r300_dri.so in build, not binary.
+
+  [ Christopher James Halse Rogers ]
+  * debian/patches/07-nouveau-update.diff:
+    - Pull in nouveau_class.h header no longer shipped by libdrm 2.4.21 and 
+      update nouveau build to use it.  Fixes FTBFS against libdrm 2.4.21.
+  * debian/rules:
+    - Simplify selecting which gallium drivers are built.  Use this to only
+      act on gallium packages on archs where we're actually building them.
+      Part of the fix for FTBFS on Hurd and kFreeBSD.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 01 Jul 2010 12:50:18 +0200
+
+mesa (7.8.1-2) experimental; urgency=low
+
+  [ Tormod Volden ]
+  * debian/rules: Do not strip the same packages twice
+
+  [ Julien Cristau ]
+  * Stop building the ffb dri driver on sparc, it no longer exists.
+  * Merge changes from 7.7.1-2.
+
+  [ Christopher James Halse Rogers ]
+  * debian/compat:
+    - Bump to v7 for dh_install search path behaviour
+  * debian/rules:
+    - Enable gallium for dri build.
+    - Enable egl for dri build.
+    - Build nouveau, radeon & swrast gallium drivers
+    - Build OpenVG, OpenGL|ES, dri, glx & egl state trackers
+  * debian/libegl1-mesa-dev.install:
+  * debian/libegl1-mesa.install:
+  * debian/libegl1-mesa.symbols:
+    - New libEGL package.
+  * debian/libgles1-mesa-dev.install:
+  * debian/libgles1-mesa.install:
+  * debian/libgles1-mesa.symbols:
+    - New OpenGL|ES v1.x package.
+  * debian/libgles2-mesa-dev.install:
+  * debian/libgles2-mesa.install:
+  * debian/libgles2-mesa.symbols:
+    - New OpenGL|ES v2.x package.
+  * debian/libopenvg1-mesa-dev.install:
+  * debian/libopenvg1-mesa.install:
+  * debian/libopenvg1-mesa.symbols:
+    - New OpenVG package.
+  * debian/libegl1-mesa-drivers-x11.install:
+    - New gallium EGL drivers package.
+  * debian/libegl1-mesa-drivers-kms.install:
+    - New gallium EGL kms driver package.
+  * debian/egl.pc:
+  * debian/vg.pc:
+  * debian/glesv1_cm.pc:
+  * debian/glesv2.pc:
+    - Pull pkg-config files from master and install them in the respective
+      -dev packages.
+  * debian/libgl1-mesa-dri-experimental.install:
+  * debian/libgl1-mesa-dri.install:
+    - “make install” puts classic and gallium drivers in the same path, but
+      builds gallium drivers in the gallium/ subdirectory.  Copy the drivers 
+      directly from the build path, rather than trying to separate them out 
+      post-hock.
+  * debian/control:
+    - Add new packages.
+    - Add new build-depends on libx11-xcb-dev, libxcb-dri2-0-dev, 
+      libxcb-xfixes0-dev and python-libxml2 for gallium.
+    - Bump build-depends on dpkg-dev for regex in symbols files.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 11 Jun 2010 03:19:09 +0200
+
+mesa (7.8.1-1) experimental; urgency=low
+
+  * New upstream release.
+    + Pull from upstream 7.8 branch up to commit db3b3421.
+  * Refresh patches.
+  * Bump build dependency to libdrm-dev 2.4.19, x11proto-gl-dev 1.4.11,
+    and x11proto-dri2-dev 2.1.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sun, 18 Apr 2010 09:25:39 +0200
+
+mesa (7.7.1-2) unstable; urgency=low
+
+  * debian/rules: use DEB_HOST_ARCH_CPU instead of DEB_HOST_GNU_CPU.  Prompted
+    by Ubuntu which changed the latter to i686, breaking their packages on
+    i386.
+  * Pull from mesa_7_7_branch (commit 8ba378d).
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 20 May 2010 17:34:19 +0200
+
+mesa (7.7.1-1) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * Remove Thierry Reding from Uploaders, closes: #572539.
+  * Bump Standards-Version to 3.8.4, no changes needed.
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 30 Mar 2010 17:15:09 +0200
+
+mesa (7.7-4) unstable; urgency=low
+
+  * Pull from upstream mesa_7_7_branch up to commit 293f4d51.
+    + r6xx/r7xx: emit relocation for FRAG & TILE buffer, closes: #569663.
+
+ -- Brice Goglin <bgoglin@debian.org>  Wed, 24 Feb 2010 22:44:11 +0100
+
+mesa (7.7-3) experimental; urgency=low
+
+  * Pull from upstream mesa_7_7_branch up to commit f5145a6e.
+  * Build against libdrm-radeon1 2.4.17 to get DRI2 support.
+
+ -- Brice Goglin <bgoglin@debian.org>  Mon, 01 Feb 2010 22:55:36 +0100
+
+mesa (7.7-2) experimental; urgency=low
+
+  [ Julien Cristau ]
+  * Rename the build directory to not include DEB_BUILD_GNU_TYPE for no
+    good reason.  Thanks, Colin Watson!
+  * Remove myself from Uploaders
+
+  [ Brice Goglin ]
+  * Pull from upstream mesa_7_7_branch up to commit 2f28ca0a.
+    + Fix funky colors on radeon/r200/r300.
+
+ -- Brice Goglin <bgoglin@debian.org>  Wed, 27 Jan 2010 09:14:38 +0100
+
+mesa (7.7-1) experimental; urgency=low
+
+  [ Brice Goglin ]
+  * Bump libdrm build dependency to 2.4.15, closes: #561058.
+  * New upstream release.
+  * Pull from upstream mesa_7_7_branch up to commit 6d6c9c66.
+
+  [ Julien Cristau ]
+  * Add freedesktop.org ftp to watch file since that's where newer upstream
+    tarballs are.
+  * Don't include GLUT sources since we don't use them.
+
+ -- Brice Goglin <bgoglin@debian.org>  Mon, 11 Jan 2010 17:52:31 +0100
+
+mesa (7.7~rc2-1) experimental; urgency=low
+
+  * New upstream release candidate.
+    + s3v and trident DRI drivers removed since they never worked.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sat, 12 Dec 2009 13:02:55 +0100
+
+mesa (7.6.1-1) unstable; urgency=low
+
+  * New upstream release
+    + Pull upstream mesa_7_6_branch up to commit da876fa3
+  * Bump linux-libc-dev build-dep to 2.6.31 for the r600 dri driver (fixes
+    ftbfs on mips).
+  * Drop hunk from 05_hurd-ftbfs.diff that was applied upstream.  Refresh
+    other patches.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 29 Dec 2009 10:42:24 +0000
+
+mesa (7.6.1~rc3-1) unstable; urgency=low
+
+  * New upstream release candidate.
+    + Pull upstream mesa_7_6_branch up to commit 7d41b424.
+    + Includes sparc64 xform asm patch from #560403.
+  * Update debian/rules to fix sparc64 FTBFS, thanks Aurelien Jarno,
+    closes: #560403.
+  * Build r600 DRI driver.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 11 Dec 2009 18:36:36 +0100
+
+mesa (7.6.1~rc2-1) unstable; urgency=low
+
+  * New upstream release candidate.
+    + Pull upstream mesa_7_6_branch up to commit b2953ee.
+    + i965: Fix the bounds emitted in the vertex buffer packets,
+      closes: #556541.
+    + Fix window drawing regression in Kwin on older Radeon hardware,
+      fix assertion failure leading to crash on kwin when compositing
+      is enabled, closes: #549588.
+    + Refresh patches.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sun, 06 Dec 2009 00:14:34 +0100
+
+mesa (7.6-1) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * New upstream release.
+    + Fix software fallback assertion on RS480, closes: #539162.
+    + Fix segfault in _swrast_ReadPixels on i915, closes: #545085.
+
+  [ Julien Cristau ]
+  * Don't run install from the various configs in parallel, hopefully fixing a
+    bug in the previous debian/rules.  Thanks to Bernhard R. Link for the
+    suggestions.
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 29 Sep 2009 11:51:58 +0200
+
+mesa (7.5.1-1) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * New upstream release.
+  * Add README.source.
+  * Bump Standards-Version to 3.8.3.
+
+  [ Julien Cristau ]
+  * Override 'package-name-doesnt-match-sonames' lintian warnings for libGLU,
+    libGLw and both libGLs.
+  * Use dh_lintian and bump debhelper build-dep accordingly.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 04 Sep 2009 11:38:46 +0200
+
+mesa (7.5-3) unstable; urgency=low
+
+  * Pull from upstream mesa_7_5_branch up to commit b4ba6a66
+    (early 7.5.1 release snapshot).
+  * Only install the huge upstream changelog in mesa-common-dev,
+    closes: #538094.
+  * Enable i686 optimized libraries on hurd-i386.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 24 Jul 2009 00:29:28 +0200
+
+mesa (7.5-2) unstable; urgency=low
+
+  * Pull from upstream mesa_7_5_branch up to commit a6b31415
+    + radeon/DRI1: if we have HW stencil, only expose fbconfigs with stencil,
+      closes: #537732.
+  * Install the upstream changelog.
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 21 Jul 2009 22:21:50 +0200
+
+mesa (7.5-1) unstable; urgency=low
+
+  [ Timo Aaltonen ]
+  * Move dri.pc to mesa-common-dev (closes: #521667)
+
+  [ Brice Goglin ]
+  * Enable i686 optimized libraries on kfreebsd-i386, closes: #537345.
+  * New upstream release:
+    + i915: Fix assertion failure on remapping a non-BO-backed VBO,
+      closes: #537147.
+    + GLX/DRI1: Mark GLX visuals with depth != screen depth non-conformant,
+      closes: #532980.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sun, 19 Jul 2009 12:53:41 +0200
+
+mesa (7.5~rc4-1) experimental; urgency=low
+
+  [ Timo Aaltonen ]
+  * New upstream release candidate.
+    + xdriinfo now works with DRI2 (closes: #527132)
+  * rules: Disable EGL.
+  * mesa-common-dev.install: Don't install glxew.h, conflicts with libglew.
+
+  [ Julien Cristau ]
+  * Update patches:
+    + 02_use-ieee-fp-on-s390-and-m68k.patch moved from imports.h to compiler.h
+    + 03_optional-progs-and-install.patch refreshed
+    + 05_hurd-ftbfs.diff partly applied upstream
+    + 06_kfreebsd-ftbfs.diff refreshed
+  * Install dri.pc, which will be needed to build xorg-server 1.7.
+  * Don't build gallium for now.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 28 Jun 2009 20:21:37 +0200
+
+mesa (7.4.4-1) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * New upstream release.
+    + fixes a crash in swrast glXWaitX (closes: #528708)
+  * Don't build hardware dri drivers on s390.
+  * Update 04_osmesa_version.diff, refresh 06_kfreebsd-ftbfs.diff.
+
+  [ Brice Goglin ]
+  * Enable motif in GLw, closes: #527483.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 28 Jun 2009 18:58:27 +0200
+
+mesa (7.4.1-1) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * Make libgl1-mesa-dev and mesa-common-dev 'Architecture: any'.  This gets
+    rid of uninstallability when a new upstream version isn't built on all
+    architectures, and allows us to ship potentially arch-specific .pc files.
+  * Install pkgconfig files for libGLU, libOSMesa and libGLw.
+  * Make libgl1-mesa-dri{,-dbg} 'Architecture: any', as swrast_dri.so should
+    get built everywhere.
+  * Drop the dependency on libgl1-mesa-glx from -dri, and make -glx recommend
+    -dri instead.  The dri drivers are also loaded by the X server, which
+    doesn't need libGL.  On the other hand, libGL needs one of the dri drivers
+    for direct rendering (either software or hardware).  Mark libgl1-mesa-dri
+    as breaking old xserver-xorg-core and libgl1-mesa-glx, to avoid
+    incompatibilities.
+  * Add patch by Samuel Thibault to fix FTBFS on hurd-i386.
+  * Pull from mesa_7_4_branch as of May 3rd (commit 63375254).
+  * Move -dbg packages to new 'debug' section.
+
+  [ Brice Goglin ]
+  * Add patch by Aurelien Jarno to fix FTBFS on kfreebsd-i386, closes: #524690.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 03 May 2009 16:05:09 +0200
+
+mesa (7.4-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 08 Apr 2009 23:53:47 +0100
+
+mesa (7.4-1) experimental; urgency=low
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 01 Apr 2009 20:25:00 +0200
+
+mesa (7.4~rc1-1) experimental; urgency=low
+
+  * New upstream release candidate.
+  * Fix watch file to make uscan not consider release candidates as newer than
+    actual releases.
+  * debian/control: add lpia to the Architecture field for
+    libgl1-mesa-dri{,-dbg} to match Ubuntu.
+  * debian/rules: on lpia, only build the i915 and i965 dri drivers (based on
+    Ubuntu changes).
+  * Build-depend on linux-libc-dev >= 2.6.29 on linux archs.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 25 Mar 2009 11:34:42 +0100
+
+mesa (7.3-1) experimental; urgency=low
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+
+  [ Julien Cristau ]
+  * Try to make the diff a bit smaller by removing directories that are in
+    upstream git but not in tarballs.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 30 Jan 2009 20:00:34 +0100
+
+mesa (7.3~rc3-1) experimental; urgency=low
+
+  [ Timo Aaltonen ]
+  * New upstream release candidate.
+
+  [ Julien Cristau ]
+  * Refresh patches 03 and 04.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 21 Jan 2009 19:01:21 +0100
+
+mesa (7.3~rc1-1) experimental; urgency=low
+
+  * New upstream release candidate.
+    + provides DRI2 (closes: #411141).
+    + i915: fallback for cube map texture.  Fixes GPU hang with scorched3d
+      (closes: #484049).
+
+  [ Timo Aaltonen ]
+  * Remove debian/patches/01_disable-intel-classic-warn.diff, the
+    warning is gone now.
+  * debian/control:
+    - Build-depend on x11proto-dri2-dev (>= 1.99.3)
+
+  [ Julien Cristau ]
+  * Require libdrm-dev 2.4.3.
+  * Merge packaging changes from unstable, from 7.0.3-5 to 7.0.3-7.
+  * Delete unused configs/debian-*, and install-source.sh script.  We've
+    switched to using autoconf, and mesa-swx11-source is gone.
+  * Delete some now unused code from debian/rules.
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 10 Jan 2009 22:14:55 +0100
+
+mesa (7.2-1) experimental; urgency=low
+
+  [ Brice Goglin ]
+  * Fix grammar and punctuation in glxinfo(1), thanks Sam Hocevar,
+    closes: #498595.
+
+  [ Timo Aaltonen ]
+  * New upstream release.
+  * Refresh patch 04_osmesa_version.diff
+
+  [ Julien Cristau ]
+  * Remove the build-dep on dri2proto, DRI2 support has been removed.
+  * intel: don't warn about TTM init failure.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 24 Sep 2008 14:28:21 +0200
+
+mesa (7.1-1) experimental; urgency=low
+
+  * Add parallel build support.
+  * New upstream development release
+    + libGLU now only exports its public interface (closes: #319388)
+  * Some more parallel build updates.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 27 Aug 2008 19:52:24 +0200
+
+mesa (7.1~rc3-1) experimental; urgency=low
+
+  [ Julien Cristau ]
+  * New upstream release candidate (updated to git commit 4fab47b1).
+  * Build against libdrm >= 2.3.1.
+  * 04_osmesa_version.diff: fix libOSMesa versioning, to revert accidental
+    SONAME bump.
+
+  [ Timo Aaltonen ]
+  * Refresh patches, and drop obsolete 00_create-libdir.patch and
+    01_fix-makefile.patch.
+  * Build-depend on x11proto-dri2-dev.
+  * Drop mesa-swx11-source.
+  * Add dri_interface.h to mesa-common-dev.
+  * Add gl.pc to libgl1-mesa-dev
+  * rules: Replace the old build system with the new autotools-based 
+    system.
+  * Run autoreconf before building the various flavours..
+  * Add automake & autoconf to build-deps.
+  * Use --enable-glx-tls for dri.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 13 Jul 2008 19:41:42 +0200
+
+mesa (7.0.3-7) unstable; urgency=low
+
+  * Cherry-pick patch from upstream:
+    Use 3Dnow! x86-64 routines only on processors that support 3Dnow!
+    (closes: #484180).
+  * Also build the x86-specific dri drivers on kfreebsd (closes: #492894).
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 14 Dec 2008 07:34:58 +0530
+
+mesa (7.0.3-6) unstable; urgency=high
+
+  * Update debian/copyright to the SGI Free Software License B, version 2.0.
+    It now mirrors the free X11 license used by X.Org (closes: #368560).
+    http://www.sgi.com/company_info/newsroom/press_releases/2008/september/opengl.html
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 20 Sep 2008 16:30:44 +0200
+
+mesa (7.0.3-5) unstable; urgency=low
+
+  * Disable the i915tex driver, it doesn't build against libdrm 2.3.1.
+  * Pull from mesa_7_0_branch (27425708).
+
+ -- Julien Cristau <jcristau@debian.org>  Sat, 12 Jul 2008 18:56:19 +0200
+
+mesa (7.0.3-4) unstable; urgency=low
+
+  * Pull from mesa_7_0_branch (2ac4919d).
+  * Put back our configs/ changes into the .diff.gz since choose-configs
+    needs them before quilt is invoked. Put 04_cleanup-osmesa-configs.patch
+    there as well for #485161.
+
+ -- Brice Goglin <bgoglin@debian.org>  Wed, 18 Jun 2008 20:59:14 +0200
+
+mesa (7.0.3-3) unstable; urgency=low
+
+  * Pull from mesa_7_0_branch (718724de).
+    + Fix intel_batchbuffer_space on i965, closes: #455817.
+    + Fix busy error in i915_wait_irq for real now, closes: #467319.
+  * Move our configs/ changes from the .diff.gz into our quilt patches,
+    with 04_cleanup-osmesa-configs.patch renamed into 04_debian-configs.patch,
+    closes: #485161.
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 17 Jun 2008 20:00:51 +0200
+
+mesa (7.0.3-2) unstable; urgency=low
+
+  * Pull from mesa_7_0_branch (03447de3).
+  * Set right cliprects for the current draw region on Intel, closes: #467319.
+  * Use BRW_TEXCOORDMODE_CLAMP instead of BRW_TEXCOORDMODE_CLAMP_BORDER
+    to implement GL_CLAMP on i965, closes: #478880.
+  * Fix segment fault with BASE_LEVEL set to 5 for MipMap on i915,
+    closes: #451339.
+  * Disable low impact fallback on r300 by default, closes: #440868.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 13 Jun 2008 06:53:29 +0200
+
+mesa (7.0.3-1) unstable; urgency=low
+
+  * New upstream release.
+  * Only call ProgramStringNotify if program parsing succeeded,
+    closes: #473551.
+
+ -- Brice Goglin <bgoglin@debian.org>  Fri, 11 Apr 2008 08:42:37 +0200
+
+mesa (7.0.3~rc2-2) unstable; urgency=low
+
+  * Pull from mesa_7_0_branch (1e83d70b).
+  * Fixes regression in the i965 dri driver (closes: #470984, #470084)
+  * Update 02_use-ieee-fp-on-s390-and-m68k.patch.
+  * Change libgl1-mesa-swx11-i686's pre-dependency on libgl1-mesa-swx11 to a
+    regular versioned dependency, and add ${shlibs:Depends}.
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 31 Mar 2008 16:47:31 +0200
+
+mesa (7.0.3~rc2-1) unstable; urgency=low
+
+  * New upstream release candidate.
+    + enable user-defined clip planes for R300 (closes: #408679)
+    + 03_optional-progs-and-install.patch: partly applied upstream, fixed up
+  * Stop building with -O0 on hppa. Bug #451047 should be fixed in recent gcc
+    versions.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun, 24 Feb 2008 10:22:54 +0100
+
+mesa (7.0.2-4) unstable; urgency=low
+
+  * Update to mesa_7_0_branch head (commit 48ae5cf0).
+  * Add Vcs-Git, Vcs-Browser and Homepage fields in debian/control.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 17 Jan 2008 22:23:06 +0100
+
+mesa (7.0.2-3) unstable; urgency=low
+
+  * Update to mesa_7_0_branch head (commit 0107acde).
+  * Bump Standards-Version to 3.7.3.
+  * Move libgl1-mesa-swx11-dbg, mesa-common-dev and libosmesa6-dev to section
+    libdevel.
+  * libgl1-mesa-swx11 conflicts with libgl1-mesa-glx.  Move it and
+    libgl1-mesa-swx11-dev to priority extra.
+  * Fix typo in mesa-common-dev's long description.
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 18 Dec 2007 19:13:18 +0100
+
+mesa (7.0.2-2) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * Don't set -fno-strict-aliasing in configs/debian-default.  It is set
+    upstream now.
+  * Workaround gcc ICE on hppa: build libOSMesa with -O0 (see bug#451047).
+  * Add build-dep on libxext-dev.  Thanks, Timo Aaltonen!
+
+ -- Brice Goglin <bgoglin@debian.org>  Tue, 13 Nov 2007 21:43:40 +0100
+
+mesa (7.0.2-1) unstable; urgency=low
+
+  * New upstream release.
+    + Fix Blender crash in triangle_twoside(), closes: #439668, #446315.
+    + Fix crash in _generic_read_RGBA_span_RGB565_MMX(), closes: #445313.
+    + Fix the new __gluInvertMatrix() function, closes: #440137 ,#441071.
+    + Refresh 03_optional-progs-and-install.patch since libGLU is not
+      built when building progs/xdemos.
+    + Refresh 04_cleanup-osmesa-configs.patch.
+    + Drop 05_static-nonpic.patch,, applied upstream.
+    + Remove DESTDIR from INSTALL_DIR in configs/debian-default since
+      the upstream Makefiles now support DESTDIR.
+  * Add myself to Uploaders.
+
+ -- Brice Goglin <bgoglin@debian.org>  Sun, 11 Nov 2007 11:53:26 +0100
+
+mesa (7.0.1-2) unstable; urgency=low
+
+  * Update to latest git (from mesa_7_0_branch)
+    + adds support for some new intel chipsets (i915 and i915_tex dri drivers)
+      (closes: #437333)
+    + broken inline asm in dri drivers fixed (closes: #423739)
+
+ -- Julien Cristau <jcristau@debian.org>  Tue, 28 Aug 2007 12:11:30 +0200
+
+mesa (7.0.1-1) unstable; urgency=low
+
+  * New upstream release.
+  * Upload to unstable.
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 09 Aug 2007 11:56:16 +0200
+
+mesa (7.0.1~rc2-1) experimental; urgency=low
+
+  [ David Nusinow ]
+  * New upstream release candidate
+  * Bite the bullet and add myself to uploaders
+
+  [ Julien Cristau ]
+  * Modify the short descriptions of various packages so they fit in .changes
+    files without being cut off.  Thanks, Marc 'HE' Brockschmidt!
+  * Add a shlibs file for libgl1-mesa-swx11-i686.
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 27 Jul 2007 20:17:48 +0200
+
+mesa (6.5.3-1) experimental; urgency=low
+
+  [ David Nusinow ]
+  * New upstream release
+
+  [ Julien Cristau ]
+  * Cherry-pick commit 65faf023679988f93da82b4c7ebdc689f2094459 by Michel
+    Dänzer to fix r300 crash.
+
+ -- Julien Cristau <jcristau@debian.org>  Mon, 21 May 2007 11:34:51 +0200
+
+mesa (6.5.3~rc3-1) experimental; urgency=low
+
+  [ Brice Goglin ]
+  * Split out libGLw libs and headers from libgl1-mesa-swx11 and ship both
+    static and shared libraries, creating libglw1-mesa and libglw1-mesa-dev
+    (closes: #374904).
+
+  [ Julien Cristau ]
+  * New upstream release candidate.
+    + 06_fix_texture_data_corruption.patch,
+      07_call_radeonSetCliprects_from_radeonMakeCurrent.patch,
+      08_r300_update_window_state_when_bound_but_stamp_changed.patch,
+      09_i915_always_enable_pixel_fog.patch: remove, included upstream.
+    + 01_fix-makefile.patch, 02_use-ieee-fp-on-s390-and-m68k.patch: refresh.
+  * Add build-dependencies on libxdamage-dev and libxfixes-dev.
+  * Resync debian/scripts/install-source.sh.
+  * Build mesa-swx11-source only in binary-indep.
+  * Update from upstream git (commit
+    dee1b0d5bbe91f83854813cbbcd3090327bcb5c2).
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 25 Apr 2007 10:36:50 +0200
+
+mesa (6.5.2-7) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * libgl1-mesa-dev does not need to depend on libgl1-mesa-dri,
+    libgl1-mesa-glx is enough (since their split in 6.4.1-0.1);
+    closes: #432081.  Thanks, Samuel Thibault!
+
+  [ Julien Cristau ]
+  * libgl1-mesa-dev Depends on libgl1-mesa-glx (>= ${source:Upstream-Version})
+    instead of >= ${Source-Version}.  This way it's still installable on
+    architectures where mesa isn't built yet when a minor revision is
+    uploaded.
+
+ -- Julien Cristau <jcristau@debian.org>  Wed, 11 Jul 2007 05:50:45 +0200
+
+mesa (6.5.2-6) unstable; urgency=low
+
+  * libgl1-mesa-swx11 needs to depend on libosmesa6 (>= 6.5.2-1) because
+    it used to contain libOSMesa.so.6.  This means that programs linked
+    against this lib got a dependency on -swx11 which was broken since
+    6.5.2-1.
+  * Fix build on hurd-i386 (build libgl1-mesa-glx without dri support and
+    don't build the dri drivers); closes: #420403.  Thanks, Samuel Thibault!
+
+ -- Julien Cristau <jcristau@debian.org>  Thu, 05 Jul 2007 00:56:35 +0200
+
+mesa (6.5.2-5) unstable; urgency=low
+
+  [ Brice Goglin ]
+  * Add 07_call_radeonSetCliprects_from_radeonMakeCurrent.patch
+    (closes: #420164). Thanks to Christian Ohm.
+  * Add 08_r300_update_window_state_when_bound_but_stamp_changed.patch
+  * Add 09_i915_always_enable_pixel_fog.patch
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 18 May 2007 13:36:25 +0200
+
+mesa (6.5.2-4) unstable; urgency=low
+
+  [ Julien Cristau ]
+  * debian/control: libgl1-mesa-dri now suggests libglide3, with an
+    explanation in the description (closes: #387339).
+  * Upload to unstable.
+
+  [ Brice Goglin ]
+  * Add 06_fix_texture_data_corruption.patch (closes: #412346).
+
+ -- Julien Cristau <jcristau@debian.org>  Fri, 20 Apr 2007 05:57:35 +0200
+
+mesa (6.5.2-3) experimental; urgency=low
+
+  * Set LIB_DIR and EXTRA_LIB_PATH in configs/debian-default to override
+    settings in configs/linux-x86-64. This fixes a FTBFS on amd64, thanks to
+    Marc 'HE' Brockschmidt for the report (closes: #410118).
+
+ -- Julien Cristau <jcristau@debian.org>  Wed,  7 Feb 2007 23:04:28 +0100
+
+mesa (6.5.2-2) experimental; urgency=low
+
+  * Sync Section/Priority for all packages with the override.
+  * Build the arch:all debs in binary-indep, and use the debhelper -s option
+    for commands in binary-arch, to fix FTBFS on non-i386 archs, thanks to
+    Marc 'HE' Brockschmidt (closes: #409638).
+  * Add myself to Uploaders.
+
+ -- Julien Cristau <jcristau@debian.org>  Sun,  4 Feb 2007 21:14:02 +0100
+
+mesa (6.5.2-1) experimental; urgency=low
+
+  [ Thierry Reding ]
+  * New upstream release.
+  * Set the Debian X Strike Force as maintainer.
+  * Add myself to uploaders.
+  * Build the i915tex DRI module on the i386 and amd64 architectures.
+  * Add patch 04_cleanup-osmesa-configs that makes the OSMesa configurations
+    behave as expected.
+  * Add patch 05_static-nonpic to build static libraries without -fPIC.
+  * Make debugging symbol packages depend on the corresponding binary package
+    and put them into the libdevel section.
+  * Bump shlibs file for the libosmesa6 package to account for added symbols.
+    Thanks Julien Cristau.
+  * Build the DRI modules with the default optimization flags. Thanks Julien
+    Cristau.
+  * mesa-common-dev now ships the GLX header files so it needs to replace
+    libgl1-mesa-swx11-dev and libgl1-mesa-dev. Thanks Julien Cristau.
+  * All OSMesa libraries were moved to the libosmesa6 and libosmesa6-dev
+    package, so have them replace libgl1-mesa-swx11, libgl1-mesa-swx11-dev and
+    mesa-common-dev respectively. Thanks Julien Cristau.
+
+  [ Julien Cristau ]
+  * Drop obsolete depends on xlibs.
+
+ -- Thierry Reding <thierry@gilfi.de>  Thu, 11 Jan 2007 15:06:52 +0100
+
+mesa (6.5.2~rc3-0.1) experimental; urgency=low
+
+  * Non-maintainer upload.
+  * Update to latest upstream release candidate.
+
+ -- Thierry Reding <thierry@gilfi.de>  Fri,  1 Dec 2006 01:06:28 +0100
+
+mesa (6.5.2~rc2-0.1) experimental; urgency=low
+
+  * Non-maintainer upload.
+  * New upstream release candidate:
+    + Refresh 02_use-ieee-fp-on-s390-and-m68k.patch.
+  * Add manual pages for the glxdemo, glxgears, glxheads and glxinfo
+    utilities (Closes: #385463).
+
+ -- Thierry Reding <thierry@gilfi.de>  Wed, 22 Nov 2006 20:49:06 +0100
+
+mesa (6.5.2~rc1-0.1) experimental; urgency=low
+
+  * Non-maintainer upload.
+  * New upstream release candidate.
+  * Update patches:
+    + Drop hunk #2 of 01_fix-makefile.patch, applied upstream.
+    + Drop 03_handle-sync-and-dont-unlock-display.patch, applied upstream.
+  * Bump build-dependency on libdrm-dev (>= 2.2.0).
+  * Use the new upstream minstall utility to install files and directories.
+    Using /usr/bin/install would result in a symlink's target being copied
+    instead of the symlink.
+
+ -- Thierry Reding <thierry@gilfi.de>  Sat, 18 Nov 2006 22:23:04 +0100
+
+mesa (6.5.1-0.6) experimental; urgency=low
+
+  * Non-maintainer upload.
+  * Rewrote the debian/rules file to make it easier to understand.
+  * Provide i686 optimized versions in libgl1-mesa-swx11-i686 instead of in
+    libgl1-mesa-swx11.
+  * Statically link libOSMesa with the software rasterization code from libGL
+    so that it works independently of the installed libGL. (Closes: #387706)
+  * Make libosmesa6-dev depend on mesa-common-dev because it only needs the
+    gl.h header file and no libGL anymore.
+  * Move glx*.h headers from libgl1-mesa(-swx11)-dev into mesa-common-dev
+    because both packages provide identical files.
+  * Add debugging symbol packages for libgl1-mesa-swx11, libgl1-mesa-glx and
+    libgl1-mesa-dri.
+  * Repack the contents of the three Mesa tarballs (MesaDemos, MesaGLUT and
+    MesaLib) as the original source tarball. (Closes: #392715)
+  * Make mesa-common-dev depend on libx11-dev.
+  * Provide a new package: mesa-utils. These utilities are shipped in the
+    MesaDemos package so mesa is the right package to provide them.
+
+ -- Thierry Reding <thierry@gilfi.de>  Sat, 18 Nov 2006 18:50:07 +0100
+
+mesa (6.5.1-0.5) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * Build with -fno-strict-aliasing to fix misbuild of i965_dri.so
+    (closes: #394311).  Thanks to Michel Dänzer for the fix, and to Ryan
+    Richter for the report and testing.
+
+ -- Julien Cristau <julien.cristau@ens-lyon.org>  Wed,  3 Jan 2007 13:48:20 +0100
+
+mesa (6.5.1-0.4) unstable; urgency=medium
+
+  * Non-maintainer upload (and brown paper bag release).
+  * _Depend_ on libx11-dev from libgl1-mesa-dev; revert previous change.
+    Fixes FTBFS in other packages. (Really Closes: #396498)
+
+ -- Steinar H. Gunderson <sesse@debian.org>  Sat, 11 Nov 2006 13:55:20 +0100
+
+mesa (6.5.1-0.3) unstable; urgency=medium
+
+  * Non-maintainer upload.
+  * Build-depend on libx11-dev; fixes FTBFS. (Closes: #396498)
+
+ -- Steinar H. Gunderson <sesse@debian.org>  Wed,  8 Nov 2006 20:58:40 +0100
+
+mesa (6.5.1-0.2) unstable; urgency=low
+
+  * Non-maintainer upload
+  * Disable generation of SSE instructions (closes: #390560)
+  * Remove duplicate and unused build configurations
+  * Remove extra source files left from CVS snapshots (closes: #389283)
+  * Enable i965 DRI driver on i386 and amd64. Thanks to Ryan Richter
+    for the patch. (closes: #392030)
+  * Enable Unichrome DRI driver on amd64 (closes: #391900)
+  * Enable FFB DRI driver on sparc, not i386 (closes: #388025)
+  * Consistently compile C sources as C99 (closes: #373623)
+  * Fix X display locking error in GLX. Thanks to Josh Triplett for
+    the patch. (closes: #391681)
+
+ -- Ben Hutchings <ben@decadent.org.uk>  Fri, 13 Oct 2006 02:25:52 +0100
+
+mesa (6.5.1-0.1) unstable; urgency=low
+
+  * New upstream version
+  * Build-dep on x11proto-gl-dev >= 1.4.8
+  * Stuff not in the upstream tarballs
+    + os2 glut stuff
+    + docs/gears.png
+  * Bump libdrm-dev build-dep to >= 2.0.2
+  * Add libdrm cflags to the debian-dri config. This allows the build system
+    to find drm.h
+  * Make sure that libGl looks for the dri drivers in the proper location. Do
+    this by setting the appropriate variables in the debian config
+  * Re-add s390 and m68k to the USE_IEEE test in src/mesa/main/imports.h. This
+    package seriously needs to store patches somewhere that are easy to find
+    and re-apply.
+  * Add patch from Cyril Brulebois to allow package to build on HURD, which
+    lacks DRI and directfb. This includes not using lib-directfb in the
+    build-depends for hurd-i386. It also creates a new debian config,
+    debian-indirect, which is used when building for HURD. This config is
+    invoked in the debian-dri config on hurd-i386. Thanks to Cyril Brulebois
+    for the patch, Michael Banck, Michel Dänzer, and Samuel Thibault for
+    input on an appropriate fix. (closes: #358065)
+
+ -- David Nusinow <dnusinow@debian.org>  Mon, 25 Sep 2006 21:21:47 -0400
+
+mesa (6.5.0.cvs.20060524-1.1) unstable; urgency=medium
+
+  * Non-maintainer upload.
+  * Upload mesa 6.5 cvs to unstable, because we need it for Xorg 7.1.
+  * Upload with medium urgency instead of high, since this is a new
+    upstream that should get some testing in unstable in spite of the
+    multiple RC bugfixes.
+  * Update debian/copyright with the full text of the SGI Free B and SGI
+    MIT-style licenses in use in the package, and take a stab at
+    cleaning up the list of paths and licenses.
+    Closes: #368562.
+  * Make mesa-common-dev Replaces: xlibosmesa-dev from sarge.
+    Closes: #384057.
+  * Fix libgl1-mesa-glx to not Provides: libgl1-mesa-dri, since it
+    definitely doesn't provide DRI support and this Provides: breaks
+    upgrades from sarge.  Closes: #384282.
+  * debian/libgl1-mesa-swx11.shlibs: create a static shlibs file,
+    because libOSMesa.so.6 is not provided by all implementations of
+    libGL and so needs a separate shlibs declaration.  Also make
+    libgl1-mesa-glx the default alternative instead of libgl1-mesa-swx11
+    for consistency even when building against libgl1-mesa-swx11,
+    because to the extent these are interchangeable (i.e., 99%...),
+    there should be no reason to prefer one over the other -- and to the
+    extent that they aren't interchangeable, it's wrong to list libgl1
+    as an alternative dependency at all.  Closes: #386185.
+  * Don't provide shlibs at all for libgl1-mesa-swx11-dbg; this is an
+    unnecessary duplication of the existing libgl1-mesa-swx11 shlibs
+    since packages should not really be linking against /usr/lib/debug/
+    separately.
+  * src/mesa/tnl/t_vb_render.c: Drop a pointless printf() in the
+    RENDER_LINE macro, getting rid of copious debug output on console.
+    Closes: #369895.
+  * libgl1-mesa-swx11 has no reason to depend on libglu, anything that
+    wants libglu will have its own dependency on it; drop this
+    hard-coded dependency from debian/control.
+  * Have libglu1-mesa-dev Provides: xlibmesa-glu-dev, since it's the
+    successor to that package and xlibmesa-glu-dev is still referenced
+    in a number of places and this makes for more reliable builds than
+    depending on alternatives without requiring another dummy -dev
+    package from xorg.
+  * Replace references to Source-Version in debian/control with either 
+    binary:Version or source:Version, depending on whether the
+    relationship references an arch: any or arch: all package, making
+    mesa binNMU-safe; add build-depends on dpkg-dev (>= 1.13.19) to
+    ensure these substvars are available.
+
+ -- Steve Langasek <vorlon@debian.org>  Fri, 15 Sep 2006 15:51:16 -0700
+
+mesa (6.5.0.cvs.20060524-1) experimental; urgency=low
+
+  * The "-O666 -fwater-c00ling -DBE_F4ST" release
+  * New pull from CVS
+  * Merge back and forth with 6.4.2-1
+  * configs/debian*_i386: disabled, optimized build fuxxored.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Wed, 24 May 2006 14:12:13 -0600
+
+mesa (6.5.0.cvs.20060512-0.0.1) experimental; urgency=low
+
+  * New upstream release (6.5.0)
+  * Pulled CVS as of 2006-05-12
+  * debian/control: remove DirectFB packages
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Fri, 12 May 2006 15:23:49 -0600
+
+mesa (6.4.2-1) unstable; urgency=low
+
+  * The "please, please, please don't hate me" release.
+  * New upstream release.
+  * Ack NMUs
+  * debian/control: mesa-common-dev Replaces xlibmesa-gl-dev (<< 1:7)
+    AGAINST MY BETTER JUDGEMENT.  The problem here is gratuitous package
+    renames within a system that does not support them.  (closes:
+    bug#362063)
+  * debian/control: hurd-i386 doesn't have drm.  Doesn't fix #358065,
+    yet.
+  * bin/mklib: fix from Robert Millan to support hurd-i386 and
+    GNU/kFreeBSD.  Thanks Robert.  (closes: bug#358066)
+  * src/glx/x11/indirect_vertex_array.c, src/mesa/main/glheader.h,
+    src/mesa/drivers/dri/common/glcontextmodes.c: fix broken indirect
+    rendering on 64-bit platforms.  Thanks Aaron M. Ucko.  (closes:
+    bug#364228)
+  * debian/control: b-d on x11proto-gl-dev.  Please don't hate me!
+  * debian/control: Standards-Version: 3.7.2
+  * debian/rules: export DEB_HOST_ARCH
+  * configs/debian-dri: use DEB_HOST_ARCH to decide if certain DRI drivers
+    should be built or not.
+        + Built only for i386: i810 i830 sis.
+          Rationale: integrated chipsets available only for i386 processors.
+        + Built only for i386: ffb.
+          Rationale: Michel Dänzer said so, no idea why.
+        + Built only for i386, amd64: i915.
+          Rationale: Apparently this is available in the 64-bit Intel chipset.
+    Please file a bug report stating which drivers should be included/excluded
+    for which architectures.  Positive lists are preferred.  If possible state
+    why.
+  * debian/mesa-swx11-source.install: nuke this abomination.  Dinamically
+    generate the list at build time.
+  * debian/drivers.map: add gl-debian-dri_i386
+  * debian/README.build: updated, add big friendly letters in short sentences.
+    Perhaps I can read it myself this way...
+  * debian/rules, configs/debian, configs/debian-dri, configs/debian_i386,
+    configs/debian-dri_i386, debian/libdir.map, debian/drivers.map: hack in
+    support for variable driver's dir.  If you want this for your pet
+    architecture please provide BOTH configs/debian_arch and
+    configs/debian-dri_arch.  If you just want to include/exclude DRI drivers
+    on your architecture look in configs/debian-dri.
+  * configs/debian*_i386: disabled, optimized build fuxxored.
+  * debian/rules: remove misguided Perl construct, replace by something
+    simpler in shell.  I actually meant to do something else with the Perl
+    thing, but got distracted and forgot about it.  Thanks Aaron M. Ucko!
+  * debian/rules: make it work like debian/README.build says it works wrt to
+    building optimized targets.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Tue, 16 May 2006 18:07:53 -0600
+
+mesa (6.4.1-0.4) unstable; urgency=low
+
+  * NMU
+  * Add versioned conflict between libgl1-mesa-dri and xlibmesa-dri so that
+    the xlibmesa-dri transitional upgrade package works
+
+ -- David Nusinow <dnusinow@debian.org>  Mon,  6 Mar 2006 21:46:18 -0500
+
+mesa (6.4.1-0.3) unstable; urgency=low
+
+  * NMU
+  * Add s390 and m68k to the USE_IEEE test in src/mesa/main/imports.h.
+    (closes: #349437)
+
+ -- David Nusinow <dnusinow@debian.org>  Sat, 11 Feb 2006 17:59:26 -0500
+
+mesa (6.4.1-0.2) unstable; urgency=low
+
+  * NMU
+  * Re-add dh_installdirs call to binary-indep target so that we get
+    arch-specific dirs for the mesa-swx11-source package
+  * Remove makedepend from build-depends. Now we'll just build-dep on xutils
+    to get the app, which will translate over to our own xorg 7.0 plans.
+
+ -- David Nusinow <dnusinow@debian.org>  Tue, 31 Jan 2006 19:21:12 -0500
+
+mesa (6.4.1-0.1) unstable; urgency=low
+
+  [ Marcelo E. Magallon <mmagallo@debian.org> ]
+  * debian/control: build-depend on xutils
+  * include/GL/glx{int,proto,md,tokens}.h: missing upstream (closes: bug#326466)
+  * debian/libgl1-mesa-dri-dev.install: install GLX include files here, too.
+  * debian/rules: GLU and GLW don't have arch-specific targets.
+
+  [ Daniel Stone <daniels@debian.org> ]
+  * New upstream version, incorporating changes from Ubuntu 6.3 packaging.
+  * Rename packages:
+    - mesag3 -> libgl1-mesa-swrast
+    - mesag-dev -> libgl1-mesa-swrast-dev
+    - libgl1-mesa-dri -> libgl1-mesa
+    - libgl1-mesa-dri-dev -> libgl1-mesa-dev
+    - libgl1-mesa-dri still exists, but now contains the DRI modules only.
+  * Drop dependency *from* mesa-common-dev on libgl1-mesa-dev and
+    libglu1-mesa-dev; it should be the other way around. (closes: #336565)
+  * Add Build-Depends on pkg-config to get flags from libdrm, and libexpat-dev
+    for DRI configuration.  Break out xlibs-dev Build-Depends to the
+    individual libraries required.
+  * Bump libdrm-dev Build-Depends to >> 1.0.5, in order to get new
+    via_drm.h to build the unichrome DRI driver.
+  * Configs: pare DRI drivers down to a sensible set for each architecture.
+  * Remove completely broken Glide target, which caused FTBFS.
+  * Add mesa-swrast-source package, providing the source for the software
+    rasteriser for libGLcore in the X server.
+  * Drop tight libosmesa6 -> libgl1-mesa-swrast Depends, replace with
+    shlibs:Depends.
+
+  [ David Nusinow <dnusinow@debian.org> ]
+  * New upstream version (6.4.1) (closes: #232665)
+  * Merge changes from Ubuntu version 6.4.1-0ubuntu1.
+    (closes: #341479, #340168, #334742)
+    + Add new files required by xorg-server GL build to mesa-swrast-source.
+  * NMU to begin getting Xorg 7.0 in to Debian
+  * Change libgl1-mesa-swrast Depends on libx11-6-dev to libx11-dev.
+  * Change libgl1-mesa-swrast to be named libgl1-mesa-swx11
+  * Change libgl1-mesa to be named libgl1-mesa-glx
+  * mesa-swrast-src.install stop looking for the swx11 dir and look for swrast
+
+ -- David Nusinow <dnusinow@debian.org>  Sat, 21 Jan 2006 21:43:37 -0500
+
+mesa (6.3.2-2.1) unstable; urgency=low
+
+  * Non-maintainer upload.
+  * Adjust Build-Depends:
+    + xlibs transition (Closes: #347129).
+    + xutils, xlibmesa-gl-dev (Closes: #326466).
+  * mesag-dev: Depends: libx11-dev (Closes: #347205).
+
+ -- Christoph Berg <myon@debian.org>  Fri, 20 Jan 2006 20:45:43 +0100
+
+mesa (6.3.2-2) unstable; urgency=low
+
+  * debian/rules: build only whatever needs to be build according to
+    debian/control.
+  * debian/libdir.map: it's usr/lib/debug not usr/lib/dbg
+  * debian/rules: select optimized targets for the current host architecture
+    only (thanks Michel!)
+  * debian/README.build: reword some of the directions, add more info.
+  * debian/control: forgot to add CPR relationships in the new packages
+    (thanks Michel!)
+  * debian/control: Set maintainer to pkg-mesa-devel, add myself as uploader
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 28 Aug 2005 14:41:15 -0600
+
+mesa (6.3.2-1) unstable; urgency=low
+
+  * New upstream
+  * configs/debian-dri: new target
+  * debian/control: add build-depends on libdrm-dev
+  * debian/rules: pass SRC_DIRS instead of SUBDIRS on the command line.
+    This allows for configurations to override the command line in a
+    sane way.
+  * configs/debian-dri: override SRC_DIRS
+  * configs/debian: add -D_GNU_SOURCE (required by dri drivers)
+  * debian/control, debian/rules: drop glide out of this package, it
+    will be moved to the mesa-legacy package, forked from 6.2.1-7.
+  * debian/drivers.map, debian/rules: take into account that some
+    drivers have external components.
+        + To be fixed: debian/drivers.map hardcodes locations
+  * debian/control: libgl1-mesa-dri, libgl1-mesa-directfb: new drivers
+  * dh_makeshlibs for libgl1-mesa-dri and libgl1-mesa-directfb
+  * debian/control: priority is optional... again...
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 21 Aug 2005 17:13:19 -0600
+
+mesa (6.2.1-7) unstable; urgency=low
+
+  * Previous upload got lost somewhere
+      + bin/mklib: add GNU/kFreeBSD, patch from Aurelien Jarno (closes:
+        bug#307154)
+      + recompile with newer g++
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Tue, 02 Aug 2005 06:47:20 -0600
+
+mesa (6.2.1-6) unstable; urgency=low
+
+  * bin/mklib: add GNU/kFreeBSD, patch from Aurelien Jarno (closes:
+    bug#307154)
+  * recompile with newer g++
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 24 Jul 2005 11:47:16 -0600
+
+mesa (6.2.1-5) unstable; urgency=low
+
+  * debian/rules: big mess up, files are not being moved to their proper
+    places.  I naively assumed that command-line options to debhelper
+    commands would override DH_OPTIONS, that is, that having
+    DH_OPTIONS=-i (as suggested in the documentation) would mean
+    something like "use -i unless -p is passed on the command line".  It
+    actually means "use -i in addition to -p passed on the command
+    line", which does not make any sense, but is consistent with the
+    wording in the documentation. (closes: bug#306499, bug#306918,
+    bug#307095)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 01 May 2005 09:45:12 -0600
+
+mesa (6.2.1-4) unstable; urgency=low
+
+  * debian/control: fix description to reflect the exact content and
+    purpose of package (libosmesa-dev, mesag-dev).
+  * debian/rules: DH_OPTIONS=-s added to binary-arch target.  (closes:
+    bug#306091)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat, 26 Mar 2005 08:03:44 -0600
+
+mesa (6.2.1-3) unstable; urgency=low
+
+  * debian/control: try to match the override file.  If mesa is "extra"
+    (for whatever reason), all the packages should be extra.
+  * debian/rules: quick workaround for left-over libGL.so in GLU -dev
+    package.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Thu, 24 Mar 2005 19:35:34 -0600
+
+mesa (6.2.1-2) unstable; urgency=low
+
+  * The "thank you so much, I'm still voting against you" release.
+  * debian/rules: correct artifact of me not having had a proper
+    pbuilder environment to build stuff on and the repackaging from the
+    previous release.  The -glu- and -glw- targets now explicitly depend
+    on the matching -gl- target, and symlinks are placed in the build
+    directories in order to actually have a libGL.so to make ld happy
+    when creating the libraries.
+  * debian/rules: uncomment dh_install :-\  There was a reason why I had
+    commented that out...
+  * First change closes: bug#298922
+  * Second change closes: bug#300302, bug#300284, bug#300430
+  * debian/control: "An X", whatever, I've been corrected multiple times
+    in both ways (translators beware).  (closes: bug#300012)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 20 Mar 2005 22:03:29 -0600
+
+mesa (6.2.1-1) unstable; urgency=low
+
+  * The "autobuilders, please please please don't hate me" release.
+  * New upstream.
+  * Repackage:
+        + Fall prey to debhelper
+        + Entries below this one preserved for historical reasons or
+          sentimental value, pick as many as you want.  They bear NO
+          relation to the actual packages!
+  * configs/debian, configs/debian-debug, configs/debian-debug-i386,
+    configs/debian-glide, configs/debian-glide-i386, configs/debian-i386,
+    configs/debian-osmesa16, configs/debian-osmesa16-static,
+    configs/debian-osmesa32, configs/debian-osmesa32-static,
+    configs/debian-static, configs/debian-static-i386: new files.
+  * configs/debian-sparc: Dave Miller confirmed that the sparc assembly
+    files do work on Linux.  I don't know where to install the optimized
+    libraries, so the file doesn't actually exist.  Please read
+    debian/README.build if you want to have a sparc-optimized library.
+  * debian/control: GGI and glide2 are gone.  glide is glide3.
+  * debian/rules: modify shlibs file for the glide3 target to require glide3
+    and only glide3 because that library exports functions not available in
+    other libGLs.  Rationale: if someone is compiling a Debian package and
+    uses the glide target either he doesn't know what he is doing or he knows
+    exactly what he is doing.  In the first case the package should not be
+    installable and in the second case the package requires this particular
+    version.
+  * debian/control: libgl1-mesa-glide3-dev does NOT provide a proper OpenGL
+    development environment (see above).
+  * PCR is bound to be wrong... *sigh*
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat, 25 Dec 2004 14:50:02 -0600
+
+mesa (6.0.1-1) unstable; urgency=low
+
+  * New upstream release.
+  * debian/rules: redid a bunch of stuff in order to support new build system
+    without autoconf and automake stuff.  The next version is going to change
+    this _again_.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 11 Apr 2004 07:00:19 -0600
+
+mesa (5.0.0-5.1) unstable; urgency=low
+
+  * Non-Maintainer Upload.
+  * Rename "GGIMesa"-references in src/GGI/default/Makefile.am to
+    "MesaGGI", which makes the package build again with newer libtool.
+    (Closes: #213836)
+
+ -- Steinar H. Gunderson <sesse@debian.org>  Sun, 15 Feb 2004 17:37:08 +0100
+
+mesa (5.0.0-5) unstable; urgency=low
+
+  * debian/control: yank and put error?  Remove hard-coded
+    nvidia-glx-dev from mesag-glide2-dev dependencies.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 09 Feb 2003 10:31:51 +0100
+
+mesa (5.0.0-4) unstable; urgency=low
+
+  * debian/rules: fix typo in definition of GLIDE_ARCHS.  (closes: bug#179622)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Mon, 03 Feb 2003 20:19:12 +0100
+
+mesa (5.0.0-3) unstable; urgency=low
+
+  * The "it's amazing how people pick severities" release
+  * debian/control: mesa-common-dev conflicts with xlibmesa-dev.  Actually put
+    dependency of mesa-common-dev on the mesa-*-dev packages to avoid having
+    to track other libgl-dev packages popping up.  IMO this is less error
+    prone.  You can't install mesa-common-dev without installing mesa-*-dev,
+    and those packages conflict with other libgl-dev packages.  (closes:
+    bug#177996)
+  * Rename libglu1c102 to libglu1-mesa; the libglu1c102 is incorrent since
+    this library does not export C++ functions.  Sorry about the mess.
+  * Rename libglu1-dev to libglu1-mesa-dev to be consistent
+  * debian/rules: use grep-dctrl to extract architectures from debian/control
+  * debian/control: add grep-dctrl to build-depends
+  * debian/shlibs.libglu: libglu1-mesa | libglu1
+  * debian/rules: install include/GL/xmesa.h in /usr/include/GL/xmesa.h; I'm
+    not 100% sure this is the right thing to do, but it's a niche so I don't
+    think it will actually make trouble (closes: bug#148866)
+  * debian/rules: install include/GL/glx*.h in the common package.  (closes:
+    bug#178562)
+  * debian/rules: nasty hack to work arround libtool's idea of how libraries
+    should be linked (closes: bug#178514)
+  * debian/rules: even nastier hack.  Getting environment variables to
+    percolate thru all the make calls isn't getting anywhere.
+  * si-glu/Makefile.am: export only glu.* symbols
+  * si-glu/Makefile.am: add -lm to link line
+  * src/Makefile.am: god damm it.  If you use libm link to it!
+  * debian/control: mesa-common-dev depends on libglu1-mesa-dev to satisfy
+    libgl-dev's requirements
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Mon, 27 Jan 2003 17:15:25 +0100
+
+mesa (5.0.0-2) unstable; urgency=low
+
+  * debian/control: Not funny, I'm sure I put lesstif and xlibs-dev in the
+    build-depends.  CVS says I didn't.  (closes: bug#176730)
+  * debian/control, debian/rules: regenerate auto-stuff (closes: bug#176729)
+  * debian/control, debian/rules: GCC C++ 3.2 transition (libglu1c102 -- ugly!)
+  * remove Makefile.in from CVS control
+  * si-glu/libnurbs/interface/Makefile.am: fix INCLUDES macro
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 19 Jan 2003 00:48:32 +0100
+
+mesa (5.0.0-1) unstable; urgency=low
+
+  * New upstream release, it looks like glide and GGI are in working
+    condition again.
+  * FX patches from previous releases gone.  They'll be back later.
+  * debian/rules: some clean ups.
+  * debian/control: add libglu1 packages
+  * debian/control: Standards-Version: 3.5.8
+  * debian/rules: Build Xt widgets (if you need this stuff, you need to depend
+    on mesag-dev, libgl-dev is not enough)
+  * debian/control, debian/rules: add mesa-common-dev package
+  * debian/control, debian/rules: add osmesa packages.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 15 Dec 2002 12:28:49 +0100
+
+mesa (4.0.3-1) unstable; urgency=low
+
+  * New (and long delayed) upstream version
+  * Redid a bunch of FX patches, probably broke.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Thu, 03 Oct 2002 11:27:29 +0200
+
+mesa (3.5-1) unstable; urgency=low
+
+  * New upstream version.
+  * Redid patches.
+  * Disabled building GGI target.  Someone with a good understanding of GGI
+    needs to write a driver for mesa.  The old version doesn't cut it
+    anymore.
+  * Most makefiles won't work.  Copied them out of CVS.
+  * src/Makefile.am: add -lm to library list.  (closes: bug#102717)
+  * configure.in: adjust GLU's version info to match previous release.
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Mon, 25 Jun 2001 22:13:40 +0200
+
+mesa3 (3.4.2.1-4) unstable; urgency=low
+
+  * So, here's the deal: the 3Dfx backend is going nowhere in 4.x and 5.x is
+    just arround the corner.  Same thing for the GGI stuff.  In order to leave
+    the people who need this stuff with _something_ to work with, I'll compile
+    those targets out of the mesa3 source package and the mesa package will
+    stuck to plain old X.
+  * debian/control, debian/rules: strip out all the parts concerning to mesa3g
+    and mesa3g-dev
+  * debian/control: update GGI architectures, let's see what happens
+  * debian/rules: special case alpha for stripping options.  Chris, did you
+    ever figure out what the problem actually is? (closes: bug#99284)
+  * debian/rules: hereby I decree that everything in etc is a conffile.  Die
+    future bugs, die!.
+  * configure: fix ggi_libdir, ggi_confdir (closes: bug#139598)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sun, 29 Sep 2002 11:21:00 +0200
+ 
+mesa (3.4.2.1-3) unstable; urgency=low
+
+  * Actually install widgets on the mesag-dev package (closes: bug#98988)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat,  9 Jun 2001 16:39:36 +0200
+
+mesa (3.4.2.1-2) unstable; urgency=low
+
+  * src/X/xmesa1.c: I knew it, I knew it.  This was bound to break.  Stupid
+    typo.  Restored MESA_GLX_FX (got renamed to GLX_FX accidentally, if you
+    have to know) (closes: bug#94114)
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Mon, 21 May 2001 08:52:07 +0200
+
+mesa (3.4.2.1-1) unstable; urgency=low
+
+  * Upstream released 3.4.2.
+  * Hmmm... thought about it on my way home.  The code to parse 3dfx.conf
+    is wrong.  Redid.  Still not tested.  (closes: bug#94114)
+  * debian/README.Debian: document 3dfx.conf
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat, 19 May 2001 11:57:33 +0200
+
+mesa (3.4.2-1) unstable; urgency=low
+
+  * New upstream version.
+  * debian/config.guess, debian/config.sub: newest versions from
+    http://subversions.gnu.org/cgi-bin/cvsweb/config (closes: bug#95338)
+  * GAAAAAAARGGH! src/X/xmesa1.c: horrible hack to use /etc/mesa/3dfx.conf
+    if there's no MESA_GLX_FX environment variable defined.  I.  Hate.
+    This.  I'll make a deal with you: you find another of these things,
+    and you send me a nice tested patch.  I don't have a 3DFX card and I
+    *HATE* uploading stuff I can't fully test. (closes: bug#94114)
+  * debian/rules: use the new files
+  * debian/rules: s/TMPDIR/DTEMPDIR/g
+  * gl3DfxSetDitherModeEXT from Zephaniah (closes: bug#65860)
+  * Disable GL_EXT_shared_texture_palette per default.  Patch looks funny,
+    but I'll blindly trust Zephaniah.
+  * Hmmm... I hope Zephaniah tested this, because it broke in a rather silly
+    way at compile time.
+  * Fancy what people regard as "pretty important".
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Fri, 18 May 2001 09:23:49 +0200
+
+mesa (3.4.1-3) unstable; urgency=low
+
+  * PLEASE SUBMIT NMUs TO THE BTS, DAMN IT!
+  * debian/control: exclude m68k from libggi2-dev build-dependency.
+ 
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat, 17 Mar 2001 19:45:09 +0100
+
+mesa (3.4.1-2) unstable; urgency=low
+
+  * debian/control: add missing dependency on xlibs-dev and corrected the
+    one for libglide2-dev
+ 
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Wed, 14 Mar 2001 00:21:42 +0100
+
+mesa (3.4.1-1) unstable; urgency=low
+
+  * New upstream version.
+  * New maintainer. (closes: bug#81139)
+  * Some fixes to get it to compile.
+  * debian/rules: some reorganization happened to allow me test different
+    builds better.
+  * debian/control: nuked widgets package, if you miss it, you are doing
+    something wrong.
+  * debian/rules: -dev packages will be missing some garbage they used to
+    install.  If you miss any of those files, I'm fairly confident you
+    are doing something wrong.
+  * configure, ltmain.sh, aclocal.m4, acinclude.m4, ...: vicious hacks to
+    allow the GGI version to compile.
+  * TODO: add the widgets to the packages
+  * TODO: make OSmesa packages
+
+ -- Marcelo E. Magallon <mmagallo@debian.org>  Sat, 10 Feb 2001 18:34:13 +0100
+
+mesa (3.2.1-1) unstable; urgency=low
+
+  * New upstream version.
+
+ -- James A. Treacy <treacy@debian.org>  Mon, 31 Jul 2000 15:13:34 -0400
+
+mesa (3.2-2) frozen unstable; urgency=low
+
+  * add MMX and 3Dnow opts for x86.
+
+ -- James A. Treacy <treacy@debian.org>  Fri,  7 Jul 2000 16:06:43 -0400
+
+mesa (3.2-1) frozen unstable; urgency=low
+
+  * New upstream version.
+  * Made minor changes to README.3DFX. Closes bug#56827
+  * Added symlinks for mesa widget libraries. Closes bug#63115
+
+ -- James A. Treacy <treacy@debian.org>  Wed, 28 Jun 2000 11:21:09 -0400
+
+mesa (3.1-17) frozen unstable; urgency=low
+
+  * Fixed Makefile for demos in mesag-widgets-dev. Closes bug#62674
+
+ -- James A. Treacy <treacy@debian.org>  Fri, 19 May 2000 13:23:00 -0400
+
+mesa (3.1-16) frozen unstable; urgency=low
+
+  * Add --prefix=/usr to ggi build. Closes bug#61705, #61486
+
+ -- James A. Treacy <treacy@debian.org>  Wed, 12 Apr 2000 15:12:48 -0400
+
+mesa (3.1-15) frozen unstable; urgency=low
+
+  * Remove ggi from the build on m68k. Closes bug#59273
+
+ -- James A. Treacy <treacy@debian.org>  Mon,  6 Mar 2000 13:20:29 -0500
+
+mesa (3.1-14) frozen unstable; urgency=low
+
+  * Fixed hard-coded location of config file in library. This is release
+    critical, even though no bug was filed (relates to bug#58267).
+
+ -- James A. Treacy <treacy@debian.org>  Mon, 28 Feb 2000 10:58:34 -0500
+
+mesa (3.1-13) frozen unstable; urgency=low
+
+  * Add missing ggi libraries. Closes bug#58267, #57760
+
+ -- James A. Treacy <treacy@debian.org>  Thu, 24 Feb 2000 00:59:30 -0500
+
+mesa (3.1-12) frozen unstable; urgency=low
+
+  * Dependencies are now computed in a more intelligent way. Closes: bug#55861
+
+ -- James A. Treacy <treacy@debian.org>  Fri, 21 Jan 2000 16:26:40 -0500
+
+mesa (3.1-11) frozen unstable; urgency=low
+
+  * Remove svgalib support from the software only package of mesa
+
+ -- James A. Treacy <treacy@debian.org>  Sat, 22 Jan 2000 05:33:13 +0000
+
+mesa (3.1-10) frozen unstable; urgency=low
+
+  * Fix the mesag3-glide2 postinst. Closes bug#55462
+
+ -- James A. Treacy <treacy@debian.org>  Sat, 22 Jan 2000 02:06:27 +0000
+
+mesa (3.1-9) frozen unstable; urgency=low
+
+  * The ggi based packages are now built with the other versions of mesa. Closes: bug#49218, #55221
+
+ -- James A. Treacy <treacy@debian.org>  Sat, 15 Jan 2000 22:24:13 -0500
+
+mesa (3.1-8) unstable; urgency=low
+
+  * fixed the postinst and prerm for the glide packages
+  * added Provides: mesag-dev to the mesag-glide2-dev package to maintain
+    backwards compatability
+
+ -- James A. Treacy <treacy@debian.org>  Sat, 15 Jan 2000 01:01:58 -0500
+
+mesa (3.1-7) unstable; urgency=low
+
+  * Fix version number for soname in the shlib file. Closes: bug#54926
+
+ -- James A. Treacy <treacy@debian.org>  Thu, 13 Jan 2000 01:37:03 -0500
+
+mesa (3.1-6) unstable; urgency=low
+
+  * Include docs/README.3DFX in mesag3-glide2 package. Closes: bug#54625
+  * Remove Provides: libgl1 from mesag3-widgets. Closes: bug#54774
+  * conflicts with older versions of mesa. Closes: bug#54831
+
+ -- James A. Treacy <treacy@debian.org>  Mon, 10 Jan 2000 11:50:49 -0500
+
+mesa (3.1-5) unstable; urgency=low
+
+  * now Conflicts: libgl1
+  * remove extra '.' in library name
+
+ -- James A. Treacy <treacy@debian.org>  Sun,  9 Jan 2000 20:47:31 -0500
+
+mesa (3.1-4) unstable; urgency=low
+
+  * Added links libGL.so.1 <- libMesaGL.so.3 so existing progs don't break
+  * Copyright changed for version 3.1
+
+ -- James A. Treacy <treacy@debian.org>  Thu,  6 Jan 2000 17:11:11 -0500
+
+mesa (3.1-3) unstable; urgency=low
+
+  * copyright file now refers to /usr/share/common-license/LGPL.
+
+ -- James A. Treacy <treacy@debian.org>  Tue,  4 Jan 2000 11:50:45 -0500
+
+mesa (3.1-2) unstable; urgency=low
+
+  * Second try. Fixed shlibs file.
+
+ -- James A. Treacy <treacy@debian.org>  Tue,  4 Jan 2000 00:00:29 -0500
+
+mesa (3.1-1) unstable; urgency=low
+
+  * New upstream version.
+  * glide version of packages added, since glide is now under the GPL.
+  * mesa widget libraries are now in a separate package
+  * library names are changed to lib{GL,GLU}.*
+
+ -- James A. Treacy <treacy@debian.org>  Tue, 14 Dec 1999 10:06:14 -0500
+
+mesa (3.0-2) unstable; urgency=low
+
+  * added symlinks from libMesaGL* -> libGL*. Fixes bug #37160
+  * added lines (commented out) for building a glide version of mesa. Fixes bug #39758
+
+ -- James A. Treacy <treacy@debian.org>  Thu, 13 May 1999 01:02:42 -0400
+
+mesa (3.0-1) unstable; urgency=low
+
+  * mesa libs moved to /usr/lib. Fixes bug #26874
+  * motif widget library libMesaGLwM added (compiled using headers from lesstif). Fixes bug #25380
+
+ -- James A. Treacy <treacy@debian.org>  Thu,  6 Aug 1998 13:49:37 -0400
+
+mesa (2.6-4) unstable; urgency=low
+
+  * call to ldconfig in postinst put back in. Fixes bug #20552
+  * changelog.Debian file created for the mesa-doc package.
+  * deleted miscellaneous files. Fixes bug #21481
+
+ -- James A. Treacy <treacy@debian.org>  Sat, 23 May 1998 23:41:34 -0400
+
+mesa (2.6-3) frozen unstable; urgency=low
+
+  * No changes. Just trying (again) to get this back in the distribution
+
+ -- James A. Treacy <treacy@debian.org>  Tue, 24 Mar 1998 00:53:09 -0500
+
+mesa (2.6-2) unstable frozen; urgency=low
+
+  * point copyright to LPGL in /usr/doc/copyright. Fixes bug #19633
+
+ -- James A. Treacy <treacy@debian.org>  Sun, 15 Mar 1998 14:00:33 -0500
+
+mesa (2.6-1) unstable; urgency=low
+
+  * New upstream Release
+  * strip static lib with --strip-debug and shared with strip--unneeded: Fixes bug#17301
+  * create doc package in build-indep: Fixes bug#16090
+  * added widgets-mesa library to package: Fixes bug#15729
+  * created mesa-glide* packages
+
+ -- James A. Treacy <treacy@debian.org>  Mon, 19 Jan 1998 23:45:50 -0500
+
+mesa (2.5-2) unstable; urgency=low
+
+  * Corrected i386 specific debian/rules file: Fixes bug#15640
+
+ -- James A. Treacy <treacy@debian.org>  Fri,  5 Nov 1997 11:46:13 -0500
+
+mesa (2.5-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- James A. Treacy <treacy@debian.org>  Sun, 23 Nov 1997 20:46:13 -0500
+
+mesa (2.4-1) unstable; urgency=low
+
+  * New upstream release.
+  * New maintainer.
+  * libc6 release.
+
+ -- James A. Treacy <treacy@debian.org>  Mon,  3 Nov 1997 01:11:34 -0500
+
+mesa (2.2-2) unstable; urgency=low
+
+  * debian/control: mesa-doc no longer depends on mesa (bug #8840).
+
+ -- Karl Sackett <krs@debian.org>  Wed, 30 Apr 1997 10:25:25 -0500
+
+mesa (2.2-1) unstable; urgency=low
+
+  * New upstream release.
+  * Make-config: linux-elf libraries compiled with -D_REENTRANT.
+
+ -- Karl Sackett <krs@debian.org>  Wed, 19 Mar 1997 09:10:22 -0600
+
+mesa (2.1-4) unstable; urgency=low
+
+  * debian/control: lib packages moved from 'graphics' to 'libs'.
+  * debian/rules: headers moved from /usr/include/mesa to /usr/include
+    (no more -I/usr/include/mesa).
+
+ -- Karl Sackett <krs@debian.org>  Tue, 25 Feb 1997 09:30:23 -0600
+
+mesa (2.1-3) unstable; urgency=low
+
+  * debian/control: mesa2 provides mesa and conflicts with mesa
+    (bug #7394).
+
+ -- Karl Sackett <krs@debian.org>  Mon, 17 Feb 1997 09:25:42 -0600
+
+mesa (2.1-2) unstable; urgency=low
+
+  * debian/rules: install gmesa.h, osmesa.h, FooMesa.h in mesa-dev
+    (bug #6864).
+
+ -- Karl Sackett <krs@debian.org>  Tue, 28 Jan 1997 09:37:41 -0600
+
+mesa (2.1-1) unstable; urgency=low
+
+  * New upstream release.
+  * Added soname to mesa and mesa-widgets.
+  * Moved static libraries to mesa2-dbg.
+  * debian/postinst, postinst-widgets: call ldconfig without explicit
+    pathname (bugs #6176, 6180).
+
+ -- Karl Sackett <krs@debian.org>  Mon, 6 Jan 1997 09:30:10 -0600
+
+mesa (2.0-2) unstable; urgency=low
+
+  * Created mesa-widgets and mesa-widgets-dev (Bug #5029).
+
+ -- Karl Sackett <krs@debian.org>  Wed, 30 Oct 1996 08:44:19 -0600
+
+mesa (2.0-1) unstable; urgency=low
+
+  * src/draw.c: replaced with upstream patch.
+  * Make-config: linux-elf target builds libMesaGLw.so library, looks
+    for XLIBS in /usr/X11R6/lib, removed -mieee-mp from CFLAGS.
+  * widgets-sgi/Makefile: builds libMesaGlw.a library
+  * New upstream release.
+  * Converted to new package standard.
+  * Maintainer address changed.
+
+ -- Karl Sackett <krs@debian.org>  Mon, 14 Oct 1996 15:37:19 -0500
+
+1.2.8-3
+  * Package split into runtime, development, and documentation
+    packages.
+  * widgets now made as a sharable library.
+  * GLUT removed.  This will be released as a separate package.
+
+1.2.8-2
+  * Support files now architecture-independent
+
+1.2.8-1
+  * Upgrade to latest release
+  * Brought support files up to latest packaging requirements
+  * mondello/Makefile: fixed error in realclean target
+
+1.2.7-2
+  * debian.rules: clean all Makefiles out of widgets directory
+  * debian.postrm: remove /usr/lib/mesa entry from /etc/ld.so.config
+    (bug #2817)
+
+1.2.7-1
+  * Added Debian support files
+  * Included the GLUT OpenGL Utility Toolkit
+  * Makefile - disable building programs in demos, samples, and book
+    directories
+  * mklib.linux - disabled building *.a libraries
+  * widgets/Makefile.in - disabled building demo programs
--- mesa-10.5.2.orig/debian/compat
+++ mesa-10.5.2/debian/compat
@@ -0,0 +1 @@
+9
--- mesa-10.5.2.orig/debian/control
+++ mesa-10.5.2/debian/control
@@ -0,0 +1,648 @@
+Source: mesa
+Section: graphics
+Priority: optional
+Maintainer: Ubuntu X-SWAT <ubuntu-x@lists.ubuntu.com>
+XSBC-Original-Maintainer: Debian X Strike Force <debian-x@lists.debian.org>
+Standards-Version: 3.9.3
+Build-Depends:
+ debhelper (>= 9),
+ quilt (>= 0.40),
+ pkg-config,
+ libdrm-dev (>= 2.4.56) [!hurd-any],
+ libx11-dev,
+ x11proto-gl-dev (>= 1.4.14),
+ libxxf86vm-dev,
+ libexpat1-dev,
+ dpkg-dev (>= 1.16.1),
+ libxfixes-dev,
+ libxdamage-dev,
+ libxext-dev,
+ libvdpau-dev [linux-any kfreebsd-any],
+ autoconf,
+ automake,
+ libtool,
+ x11proto-dri2-dev (>= 2.6),
+ x11proto-dri3-dev (>= 1.0),
+ x11proto-present-dev (>= 1.0),
+ linux-libc-dev (>= 2.6.31) [linux-any],
+ libx11-xcb-dev,
+ libxcb-dri2-0-dev (>= 1.8),
+ libxcb-glx0-dev (>= 1.8.1),
+ libxcb-xfixes0-dev,
+ libxcb-dri3-dev,
+ libxcb-present-dev,
+ libxcb-randr0-dev,
+ libxcb-sync-dev,
+ libxshmfence-dev (>= 1.1),
+ python,
+ python-mako,
+ libudev-dev [linux-any],
+ flex,
+ bison,
+ llvm-3.6-dev (>= 1:3.5-1) [amd64 i386 kfreebsd-amd64 kfreebsd-i386 armhf],
+ libelf-dev [amd64 i386 kfreebsd-amd64 kfreebsd-i386 armhf],
+ libwayland-dev (>= 1.2.0) [linux-any],
+ mir-client-platform-mesa-dev [!arm64 !powerpc !ppc64 !ppc64el],
+Vcs-Git: git://git.debian.org/git/pkg-xorg/lib/mesa
+Vcs-Browser: http://git.debian.org/?p=pkg-xorg/lib/mesa.git
+Homepage: http://mesa3d.sourceforge.net/
+
+Package: libxatracker2
+Section: libs
+Architecture: linux-any 
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: X acceleration library -- runtime
+ This package contains the XA (X acceleration) library.  It is used exclusively
+ by the X server to do render, copy and video acceleration.
+ .
+ XA is intended to be used by the vmware driver for virtualized X acceleration.
+
+Package: libxatracker2-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any
+Depends:
+ libxatracker2 (= ${binary:Version}),
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: X acceleration library -- debugging symbols
+ This package contains the XA (X acceleration) library.  It is used exclusively
+ by the X server to do render, copy and video acceleration.
+ .
+ XA is intended to be used by the vmware driver for virtualized X acceleration.
+ .
+ This package contains the debugging symbols for the xatracker library.
+
+Package: libxatracker-dev
+Section: libdevel
+Architecture: linux-any
+Depends:
+ libxatracker2 (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: X acceleration library -- development files
+ This package contains the XA (X acceleration) library.  It is used exclusively
+ by the X server to do render, copy and video acceleration.
+ .
+ XA is intended to be used by the vmware driver for virtualized X acceleration.
+ .
+ This package provides the development environment for compiling programs
+ against the xatracker library.
+
+Package: libgbm1
+Section: libs
+Architecture: linux-any kfreebsd-any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+ libgl1-mesa-dri (= ${binary:Version}),
+ libudev1 [linux-any],
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: generic buffer management API -- runtime
+ This package contains the GBM buffer management library.  It provides a
+ mechanism for allocating buffers for graphics rendering tied to Mesa.
+ .
+ GBM is intended to be used as a native platform for EGL on drm or openwfd.
+
+Package: libgbm1-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any kfreebsd-any
+Depends:
+ libgbm1 (= ${binary:Version}),
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: generic buffer management API -- debugging symbols
+ This package contains the GBM buffer management library.  It provides a
+ mechanism for allocating buffers for graphics rendering tied to Mesa.
+ .
+ GBM is intended to be used as a native platform for EGL on drm or openwfd.
+ .
+ This package contains the debugging symbols for the GBM library.
+
+Package: libgbm-dev
+Section: libdevel
+Architecture: linux-any kfreebsd-any
+Depends:
+ libgbm1 (= ${binary:Version}),
+ libudev-dev [linux-any],
+ ${misc:Depends},
+Multi-Arch: same
+Description: generic buffer management API -- development files
+ This package contains the GBM buffer management library.  It provides a
+ mechanism for allocating buffers for graphics rendering tied to Mesa.
+ .
+ GBM is intended to be used as a native platform for EGL on drm or openwfd.
+ .
+ This package provides the development environment for compiling programs
+ against the GBM library.
+
+Package: libegl1-mesa
+Section: libs
+Architecture: any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+ libudev1 [linux-any],
+ libgl1-mesa-dri (= ${binary:Version}),
+Provides: libegl1-x11
+Conflicts: libegl1-x11
+Replaces: libegl1-x11
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: free implementation of the EGL API -- runtime
+ This package contains the EGL native platform graphics interface library.
+ EGL provides a platform-agnostic mechanism for creating rendering surfaces
+ for use with other graphics libraries, such as OpenGL|ES.
+ .
+ This package contains modules to interface with the existing system GLX or
+ DRI2 drivers to provide OpenGL via EGL.
+
+Package: libegl1-mesa-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libegl1-mesa (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the EGL API -- debugging symbols
+ This package contains the EGL native platform graphics interface library.
+ EGL provides a platform-agnostic mechanism for creating rendering surfaces
+ for use with other graphics libraries, such as OpenGL|ES.
+ .
+ This package contains the debugging symbols for the EGL library.
+
+Package: libegl1-mesa-dev
+Section: libdevel
+Architecture: any
+Depends:
+ libegl1-mesa (= ${binary:Version}),
+ libwayland-egl1-mesa (= ${binary:Version}) [linux-any],
+ libdrm-dev (>= 2.4.52) [!hurd-any],
+ x11proto-dri2-dev (>= 2.6),
+ x11proto-gl-dev (>= 1.4.14),
+ libx11-dev,
+ libxext-dev,
+ libxxf86vm-dev,
+ libxdamage-dev,
+ libxfixes-dev,
+ libxcb-glx0-dev,
+ libxcb-dri2-0-dev,
+ libxcb-dri3-dev,
+ libxcb-present-dev,
+ libxcb-sync-dev,
+ libxshmfence-dev,
+ libx11-xcb-dev,
+ libmirclient-dev [!arm64 !powerpc !ppc64 !ppc64el],
+ libwayland-dev (>= 1.2.0) [linux-any],
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the EGL API -- development files
+ This package contains the development environment required for compiling
+ programs against EGL native platform graphics interface library.
+ EGL provides a platform-agnostic mechanism for creating rendering surfaces
+ for use with other graphics libraries, such as OpenGL|ES.
+ .
+ This package provides the development environment for compiling programs
+ against the EGL library.
+
+Package: libegl1-mesa-drivers
+Section: libs
+Architecture: linux-any kfreebsd-any
+Depends:
+ ${misc:Depends},
+Multi-Arch: same
+Description: transitional dummy package
+ This is a transitional dummy package, it can be safely removed.
+
+Package: libwayland-egl1-mesa
+Section: libs
+Architecture: linux-any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+ libegl1-mesa (= ${binary:Version})
+Provides: libwayland-egl1
+Conflicts: libwayland-egl1
+Replaces: libwayland-egl1, libegl1-mesa-drivers  (<< 10.1.0-2)
+Breaks: libegl1-mesa-drivers (<< 10.1.0-2)
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: implementation of the Wayland EGL platform -- runtime
+ This package contains the mesa implementation of the Wayland EGL platform
+
+Package: libwayland-egl1-mesa-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any
+Depends:
+ libwayland-egl1-mesa (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: implementation of the Wayland EGL platform -- debugging symbols
+ This package contains the debugging symbols for the mesa implementation of the
+ Wayland EGL platform
+
+Package: libgles1-mesa
+Section: libs
+Architecture: any
+Depends:
+ libglapi-mesa (= ${binary:Version}),
+ ${shlibs:Depends},
+ ${misc:Depends},
+Provides: libgles1
+Conflicts: libgles1
+Replaces: libgles1
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 1.x API -- runtime
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 1.x provides an API for fixed-function hardware.
+
+Package: libgles1-mesa-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libgles1-mesa (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 1.x API -- debugging symbols
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 1.x provides an API for fixed-function hardware.
+ .
+ This package contains the debugging symbols for the libGLESv1_CM library.
+
+Package: libgles1-mesa-dev
+Section: libdevel
+Architecture: any
+Depends:
+ libgles1-mesa (= ${binary:Version}),
+ libegl1-mesa-dev,
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 1.x API -- development files
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 1.x provides an API for fixed-function hardware.
+ .
+ This package provides a development environment for building programs using
+ the OpenGL|ES 1.x APIs.
+
+Package: libgles2-mesa
+Section: libs
+Architecture: any
+Depends:
+ libglapi-mesa (= ${binary:Version}),
+ ${shlibs:Depends},
+ ${misc:Depends},
+Provides: libgles2
+Conflicts: libgles2
+Replaces: libgles2
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 2.x API -- runtime
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 2.x provides an API for programmable hardware including vertex
+ and fragment shaders.
+
+Package: libgles2-mesa-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libgles2-mesa (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 2.x API -- debugging symbols
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 2.x provides an API for programmable hardware including vertex
+ and fragment shaders.
+ .
+ This package contains the debugging symbols for the libGLESv2 library.
+
+Package: libgles2-mesa-dev
+Section: libdevel
+Architecture: any
+Depends:
+ libgles2-mesa (= ${binary:Version}),
+ libegl1-mesa-dev,
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the OpenGL|ES 2.x API -- development files
+ OpenGL|ES is a cross-platform API for full-function 2D and 3D graphics on
+ embedded systems - including consoles, phones, appliances and vehicles.
+ It contains a subset of OpenGL plus a number of extensions for the
+ special needs of embedded systems.
+ .
+ OpenGL|ES 2.x provides an API for programmable hardware including vertex
+ and fragment shaders.
+ .
+ This package provides a development environment for building applications
+ using the OpenGL|ES 2.x APIs.
+
+Package: libglapi-mesa
+Section: libs
+Architecture: any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: free implementation of the GL API -- shared library
+ The Mesa GL API module is responsible for dispatching all the gl*
+ functions. It is intended to be mainly used by both the libgles1-mesa
+ and libgles2-mesa packages.
+
+Package: libglapi-mesa-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libglapi-mesa (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: free implementation of the GL API -- debugging symbols
+ The Mesa GL API module is responsible for dispatching all the gl*
+ functions. It is intended to be mainly used by both the libgles1-mesa
+ and libgles2-mesa packages.
+ .
+ This package contains debugging symbols for the GL API library.
+
+Package: libgl1-mesa-glx
+Section: libs
+Architecture: any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+ libglapi-mesa (= ${binary:Version}),
+ libudev1 [linux-any],
+ libgl1-mesa-dri (>= 7.2)
+Conflicts: libgl1, libgl1-mesa-dri (<< 6.4.0)
+Replaces: libgl1, libgl1-mesa-dri (<< 6.4.0)
+Provides: libgl1
+Breaks:
+ libgl1-nvidia-alternatives (<= 275.09.07-1),
+ fglrx-glx (<< 1:11-6-1),
+ glx-diversions (<< 0.4),
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: free implementation of the OpenGL API -- GLX runtime
+ Mesa is a 3-D graphics library with an API which is very similar to
+ that of OpenGL.  To the extent that Mesa utilizes the OpenGL command
+ syntax or state machine, it is being used with authorization from
+ Silicon Graphics, Inc.  However, the author makes no claim that Mesa
+ is in any way a compatible replacement for OpenGL or associated with
+ Silicon Graphics, Inc.
+ .
+ This version of Mesa provides GLX and DRI capabilities: it is capable of
+ both direct and indirect rendering.  For direct rendering, it can use DRI
+ modules from the libgl1-mesa-dri package to accelerate drawing.
+ .
+ This package does not include the modules themselves: these can be found
+ in the libgl1-mesa-dri package.
+
+Package: libgl1-mesa-glx-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libgl1-mesa-glx (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Description: Debugging symbols for the Mesa GLX runtime
+ This version of Mesa provides GLX and DRI capabilities: it is capable of
+ both direct and indirect rendering.  For direct rendering, it can use DRI
+ modules from the libgl1-mesa-dri package to accelerate drawing.
+ .
+ This package does not include the modules themselves: these can be found
+ in the libgl1-mesa-dri package.
+ .
+ For a complete description of Mesa, please look at the
+ libgl1-mesa-glx package.
+ .
+ This package contains debugging symbols for the GL library with GLX and DRI
+ capabilities.
+
+#Package: libgl1-mesa-glx-i686
+#Section: libs
+#Priority: extra
+#Architecture: any-i386
+#Pre-Depends: libgl1-mesa-glx
+#Description: A free implementation of the OpenGL API -- GLX runtime [i686 optimized]
+# This version of Mesa provides GLX and DRI capabilities: it is capable of
+# both direct and indirect rendering.  For direct rendering, it can use DRI
+# modules from the libgl1-mesa-dri package to accelerate drawing.
+# .
+# This package does not include the modules themselves: these can be found
+# in the libgl1-mesa-dri package.
+# .
+# For a complete description of Mesa, please look at the
+# libgl1-mesa-glx package.
+# .
+# This set of libraries is optimized for i686 machines and will only be used if
+# you are running a 2.6 kernel on an i686 class CPU. This includes Pentium Pro,
+# Pentium II/II/IV, Celeron CPU's and similar class CPU's (including clones
+# such as AMD Athlon/Opteron, VIA C3 Nehemiah, but not VIA C3 Ezla).
+
+Package: libgl1-mesa-dri
+Section: libs
+Priority: optional
+Architecture: any
+Pre-Depends: ${misc:Pre-Depends}
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends}
+Recommends: libtxc-dxtn-s2tc0 | libtxc-dxtn0
+Conflicts: xlibmesa-dri (<< 1:7.0.0)
+Replaces: xlibmesa-dri (<< 1:7.0.0), libgl1-mesa-dri-experimental (<< 7.11.1)
+Breaks:
+ xserver-xorg-core (<< 2:1.14.3-5),
+ xserver-xorg-core-no-multiarch,
+ libgl1-mesa-glx (<< 7.10.2-4),
+ libgl1-mesa-glx-no-multiarch,
+ libgl1-mesa-dri-experimental (<< 7.11.1),
+Multi-Arch: same
+Description: free implementation of the OpenGL API -- DRI modules
+ This version of Mesa provides GLX and DRI capabilities: it is capable of
+ both direct and indirect rendering.  For direct rendering, it can use DRI
+ modules from the libgl1-mesa-dri package to accelerate drawing.
+ .
+ This package does not include the OpenGL library itself, only the DRI
+ modules for accelerating direct rendering.
+ .
+ For a complete description of Mesa, please look at the
+ libgl1-mesa-glx package.
+
+Package: libgl1-mesa-dri-dbg
+Section: debug
+Priority: extra
+Architecture: any
+Depends:
+ libgl1-mesa-dri (= ${binary:Version}),
+ ${misc:Depends},
+Replaces: libgl1-mesa-dri-experimental-dbg (<< 7.11.1)
+Multi-Arch: same
+Description: Debugging symbols for the Mesa DRI modules
+ This version of Mesa provides GLX and DRI capabilities: it is capable of
+ both direct and indirect rendering.  For direct rendering, it can use DRI
+ modules from the libgl1-mesa-dri package to accelerate drawing.
+ .
+ This package does not include the OpenGL library itself, only the DRI
+ modules for accelerating direct rendering.
+ .
+ For a complete description of Mesa, please look at the
+ libgl1-mesa-glx package.
+ .
+ This package contains debugging symbols for the DRI modules.
+
+Package: libgl1-mesa-dev
+Section: libdevel
+Architecture: any
+Depends:
+ mesa-common-dev (= ${binary:Version}),
+ libgl1-mesa-glx (= ${binary:Version}),
+ libdrm-dev (>= 2.4.52) [!hurd-any],
+ libx11-dev,
+ libx11-xcb-dev,
+ libxcb-dri3-dev,
+ libxcb-present-dev,
+ libxcb-sync-dev,
+ libxshmfence-dev,
+ libxcb-dri2-0-dev,
+ libxcb-glx0-dev,
+ libxdamage-dev,
+ libxext-dev,
+ libxfixes-dev,
+ libxxf86vm-dev,
+ x11proto-dri2-dev (>= 2.6),
+ x11proto-gl-dev (>= 1.4.14),
+ ${misc:Depends},
+Conflicts: libgl-dev, libgl1-mesa-dri-dev
+Replaces: libgl-dev, libgl1-mesa-dri-dev
+Provides: libgl-dev, libgl1-mesa-dri-dev
+Multi-Arch: same
+Description: free implementation of the OpenGL API -- GLX development files
+ This version of Mesa provides GLX and DRI capabilities: it is capable of
+ both direct and indirect rendering.  For direct rendering, it can use DRI
+ modules from the libgl1-mesa-dri package to accelerate drawing.
+ .
+ This package includes headers and static libraries for compiling
+ programs with Mesa.
+ .
+ For a complete description of Mesa, please look at the libgl1-mesa-glx
+ package.
+
+Package: mesa-common-dev
+Section: libdevel
+Architecture: any
+Replaces: xlibmesa-gl-dev (<< 1:7), xlibosmesa-dev, libgl1-mesa-swx11-dev (<< 6.5.2), libgl1-mesa-dev (<< 7.5~rc4-2)
+Depends:
+ libx11-dev,
+ libdrm-dev (>= 2.4.52) [!hurd-any],
+ ${misc:Depends},
+Multi-Arch: same
+Description: Developer documentation for Mesa
+ This package includes the specifications for the Mesa-specific OpenGL
+ extensions, the complete set of release notes and the development header
+ files common to all Mesa packages.
+
+Package: libosmesa6
+Section: libs
+Architecture: any
+Depends:
+ ${shlibs:Depends},
+ ${misc:Depends},
+ libglapi-mesa (= ${binary:Version}),
+Replaces: libgl1-mesa-swx11 (<< 6.5.2)
+Pre-Depends: ${misc:Pre-Depends}
+Multi-Arch: same
+Description: Mesa Off-screen rendering extension
+ OSmesa is a Mesa extension that allows programs to render to an
+ off-screen buffer using the OpenGL API without having to create a
+ rendering context on an X Server.  It uses a pure software renderer.
+ .
+ This package provides both 16-bit and 32-bit versions of the off-screen
+ renderer which do not require external libraries to work.
+
+Package: libosmesa6-dev
+Section: libdevel
+Architecture: any
+Depends:
+ libosmesa6 (= ${binary:Version}),
+ mesa-common-dev (= ${binary:Version}) | libgl-dev,
+ ${misc:Depends},
+Conflicts: xlibosmesa-dev, libosmesa4-dev, libosmesa-dev
+Replaces: xlibosmesa-dev, libosmesa-dev, libgl1-mesa-swx11-dev (<< 6.5.2), mesa-common-dev (<< 6.5.2)
+Provides: xlibosmesa-dev, libosmesa-dev
+Multi-Arch: same
+Description: Mesa Off-screen rendering extension -- development files
+ This package provides the required environment for developing programs
+ that use the off-screen rendering extension of Mesa.
+ .
+ For more information on OSmesa see the libosmesa6 package.
+
+Package: mesa-vdpau-drivers
+Section: libs
+Architecture: linux-any kfreebsd-any
+Depends:
+ libvdpau1,
+ ${shlibs:Depends},
+ ${misc:Depends},
+Enhances:
+ libvdpau1,
+Provides:
+ vdpau-driver,
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Description: Mesa VDPAU video acceleration drivers
+ These libraries provide the Video Decode and Presentation API for Unix.
+ They provide accelerated video playback (incl. H.264) and video
+ post-processing for the supported graphics cards.
+ .
+ This package enables support for VDPAU for some gallium drivers.
+
+Package: mesa-vdpau-drivers-dbg
+Section: debug
+Priority: extra
+Architecture: linux-any kfreebsd-any
+Depends:
+ mesa-vdpau-drivers (= ${binary:Version}),
+ ${misc:Depends},
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Description: Debugging symbols for the Mesa VDPAU video acceleration drivers
+ These libraries provide the Video Decode and Presentation API for Unix.
+ They provide accelerated video playback (incl. H.264) and video
+ post-processing for the supported graphics cards.
+ .
+ This package contains the debugging symbols for the VDPAU drivers.
+
+# vim: tw=0
--- mesa-10.5.2.orig/debian/copyright
+++ mesa-10.5.2/debian/copyright
@@ -0,0 +1,196 @@
+This package was debianized by James A. Treacy treacy@debian.org on Thu,
+6 Jan 2000 01:11:34 -0500.  It was newly debianized by Marcelo E.
+Magallon <mmagallo@debian.org> on Sat, 25 Dec 2004 14:50:02 -0600. It was
+again debianized by Thierry Reding <thierry@gilfi.de> on Sat, 14 Oct 2006
+02:01:12 +0200.
+
+It was downloaded from http://www.mesa3d.org/download.html
+
+For more information see:
+
+  http://www.mesa3d.org/
+
+The tarball was built by combining MesaLib and MesaDemos tarballs, and
+deleting the progs/objviewer/ directory.
+
+Copyright:
+
+Upstream Author: Brian Paul <brian.paul@tungstengraphics.com>
+
+License:
+
+                    License / Copyright Information
+
+   The Mesa distribution consists of several components. Different
+   copyrights and licenses apply to different components. For
+   example, GLUT is copyrighted by Mark Kilgard, some demo programs
+   are copyrighted by SGI, some of the Mesa device drivers are
+   copyrighted by their authors. See below for a list of Mesa's
+   components and the copyright/license for each.
+
+   The core Mesa library is licensed according to the terms of the
+   XFree86 copyright (an MIT-style license). This allows integration
+   with the XFree86/DRI project. Unless otherwise stated, the Mesa
+   source code and documentation is licensed as follows:
+
+ Copyright (C) 1999-2003  Brian Paul   All Rights Reserved.
+
+ Permission is hereby granted, free of charge, to any person obtaining a
+ copy of this software and associated documentation files (the "Software"),
+ to deal in the Software without restriction, including without limitation
+ the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ and/or sell copies of the Software, and to permit persons to whom the
+ Software is furnished to do so, subject to the following conditions:
+
+ The above copyright notice and this permission notice shall be included
+ in all copies or substantial portions of the Software.
+
+ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
+ OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ BRIAN PAUL BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
+ AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
+ CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+                        Attention, Contributors
+
+   When contributing to the Mesa project you must agree to relinquish
+   your work to the holder of the copyright for the particular
+   component you're contributing to. That is, you can't put your own
+   copyright on the code, unless it's a modular piece that can be
+   omitted from Mesa (like a new device driver). If for example, you
+   contribute a bug fix to Mesa's texture mapping code, your code
+   will become a part of the body of work which is copyrighted by
+   Brian Paul and licensed by the above terms.
+
+----------------------------------------------------------------------
+
+Some files, as listed below, are made available under the SGI Free B 
+license.  This license is as follows:
+
+SGI FREE SOFTWARE LICENSE B (Version 2.0, Sept. 18, 2008)
+
+Copyright (C) [dates of first publication] Silicon Graphics, Inc. All Rights
+Reserved.
+
+Permission is hereby granted, free of charge, to any person obtaining a copy of
+this software and associated documentation files (the "Software"), to deal in
+the Software without restriction, including without limitation the rights to
+use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
+of the Software, and to permit persons to whom the Software is furnished to do
+so, subject to the following conditions:
+The above copyright notice including the dates of first publication and either
+this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
+shall be included in all copies or substantial portions of the Software.
+THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
+OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+NONINFRINGEMENT. IN NO EVENT SHALL SILICON GRAPHICS, INC. BE
+LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
+ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
+IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+IN THE SOFTWARE.
+Except as contained in this notice, the name of Silicon Graphics, Inc. shall
+not be used in advertising or otherwise to promote the sale, use or other
+dealings in this Software without prior written authorization from Silicon
+Graphics, Inc.
+
+--------------------------------------------------------------------------
+
+Some other files listed below are made available from Silicon Graphics,
+Inc. under a more liberal, MIT-style license, as follows:
+
+   Permission to use, copy, modify, and distribute this software for
+   any purpose and without fee is hereby granted, provided that the above
+   copyright notice appear in all copies and that both the copyright notice
+   and this permission notice appear in supporting documentation, and that
+   the name of Silicon Graphics, Inc. not be used in advertising
+   or publicity pertaining to distribution of the software without specific,
+   written prior permission.
+
+   THE MATERIAL EMBODIED ON THIS SOFTWARE IS PROVIDED TO YOU "AS-IS"
+   AND WITHOUT WARRANTY OF ANY KIND, EXPRESS, IMPLIED OR OTHERWISE
+   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY OR
+   FITNESS FOR A PARTICULAR PURPOSE.  IN NO EVENT SHALL SILICON
+   GRAPHICS, INC.  BE LIABLE TO YOU OR ANYONE ELSE FOR ANY DIRECT,
+   SPECIAL, INCIDENTAL, INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY
+   KIND, OR ANY DAMAGES WHATSOEVER, INCLUDING WITHOUT LIMITATION,
+   LOSS OF PROFIT, LOSS OF USE, SAVINGS OR REVENUE, OR THE CLAIMS OF
+   THIRD PARTIES, WHETHER OR NOT SILICON GRAPHICS, INC.  HAS BEEN
+   ADVISED OF THE POSSIBILITY OF SUCH LOSS, HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, ARISING OUT OF OR IN CONNECTION WITH THE
+   POSSESSION, USE OR PERFORMANCE OF THIS SOFTWARE.
+   
+   US Government Users Restricted Rights
+   Use, duplication, or disclosure by the Government is subject to
+   restrictions set forth in FAR 52.227.19(c)(2) or subparagraph
+   (c)(1)(ii) of the Rights in Technical Data and Computer Software
+   clause at DFARS 252.227-7013 and/or in similar or successor
+   clauses in the FAR or the DOD or NASA FAR Supplement.
+   Unpublished-- rights reserved under the copyright laws of the
+   United States.  Contractor/manufacturer is Silicon Graphics,
+   Inc., 2011 N.  Shoreline Blvd., Mountain View, CA 94039-7311.
+
+--------------------------------------------------------------------------
+
+ Mesa Component Licenses:
+
+ Component       Files                 Primary Author      License
+ ----------------------------------------------------------------------------
+ core Mesa code  src/*.[ch]            Brian Paul          Mesa
+                 include/GL/gl.h
+
+ GLX driver      src/X/*               Brian Paul          Mesa
+                 include/GL/glx.h
+                 include/GL/xmesa.h
+
+ OS/Mesa driver  src/OSmesa/*          Brian Paul          Mesa
+                 include/GL/osmesa.h
+
+ 3Dfx driver     src/FX/*              David Bucciarelli   Mesa
+                 include/GL/fxmesa.h
+
+ BeOS R4 driver  mesa/drivers/beos/    Brian Paul          Mesa
+
+ MGL driver      include/GL/mglmesa.h  SciTech, Inc        GNU LGPL
+
+ Windows driver  mesa/drivers/windows/ Li Wei              GNU LGPL
+                 include/GL/wmesa.h
+
+ SVGA driver     mesa/drivers/svga/    Brian Paul          GNU LGPL
+                 include/GL/svgamesa.h
+
+ DOS driver      mesa/drivers/dos/     Charlie Wallace     GNU LGPL
+                 include/GL/dosmesa.h
+
+ GGI driver      mesa/drivers/ggi/     Uwe Maurer          GNU LGPL
+                 include/GL/ggimesa.h
+
+ GLUT            src/glut/*            Mark Kilgard        Mark's copyright
+                 include/GL/*glut*.h
+
+ GLU library     src/glu/*             Brian Paul          GNU LGPL
+
+ SGI GLU library src/glu/sgi/*         SGI                 SGI Free B
+                 include/GL/glu.h
+
+ Ext registry    include/GL/glext.h    SGI                 SGI Free B
+                 include/GL/glxext.h
+
+ demo programs   progs/demos/*         various             see source files
+
+ X demos         progs/xdemos/*        Brian Paul          see source files
+
+ SGI demos       progs/samples/*       SGI                 SGI MIT-style
+
+ RedBook demos   progs/redbook/*       SGI                 SGI MIT-style
+
+
+On Debian systems the full text of the GNU LGPL license is found in
+/usr/share/common-licenses/LGPL.
+
+------------------------------------------------------------------------------
+
+The Debian packaging is (C) 2006, Thierry Reding <thierry@gilfi.de> and
+is licensed under the GPL, see `/usr/share/common-licenses/GPL'.
+
--- mesa-10.5.2.orig/debian/gbp.conf
+++ mesa-10.5.2/debian/gbp.conf
@@ -0,0 +1,2 @@
+[DEFAULT]
+debian-branch=ubuntu
--- mesa-10.5.2.orig/debian/git-cleanup.sh
+++ mesa-10.5.2/debian/git-cleanup.sh
@@ -0,0 +1,75 @@
+#!/bin/sh
+# © 2011 Cyril Brulebois <kibi@debian.org>
+set -e
+
+### First phase, files known to make dpkg-source unhappy.
+
+# List broken symlinks:
+symlinks=$(find -type l)
+
+# Symlinks vs. directories:
+dirs_vs_symlinks=''
+
+# Modified binaries:
+binaries='
+src/gallium/state_trackers/d3d1x/progs/bin/d3d10tri.exe
+src/gallium/state_trackers/d3d1x/progs/bin/d3d11gears.exe
+src/gallium/state_trackers/d3d1x/progs/bin/d3d11spikysphere.exe
+src/gallium/state_trackers/d3d1x/progs/bin/d3d11tex.exe
+src/gallium/state_trackers/d3d1x/progs/bin/d3d11tri.exe
+src/gallium/state_trackers/python/tests/regress/fragment-shader/frag-abs.png
+docs/gears.png
+'
+
+case $1 in
+  "")   clean=0; echo "I: No parameter given, listing only (-f to remove).";;
+  "-f") clean=1; echo "I: Removing files.";;
+  *)    clean=0; echo "I: Unknown parameter given, listing only (-f to remove).";;
+esac
+
+# Readibility:
+echo
+
+for x in $symlinks $dirs_vs_symlinks $binaries; do
+  # Do not fail if the file went away already, only warn:
+  if [ -e $x -o -L $x ]; then
+    if [ $clean = 1 ]; then
+      git rm $x
+    else
+      echo "I: Would remove $x"
+    fi
+  else
+   echo "W: Unable to remove non-existing: $x"
+  fi
+done
+
+### Second phase, kill all files in git not in the tarball
+version=$(dpkg-parsechangelog|awk '/Version: / {print $2}'|sed 's/-.*$//')
+tarball="../mesa_$version.orig.tar.gz"
+if [ ! -f $tarball ]; then
+  echo "E: Missing tarball ($tarball), you could use: uscan --download-current --rename"
+  exit 1
+fi
+
+# Be lazy for now, temporary files would be better:
+one=1
+two=2
+
+# Strip one directory, Mesa-$version/ is the top-level:
+tar tfz $tarball | sed 's,[^/]*/,,' | sort > $two
+# List all files known to git, except those under debian/:
+git ls-files | grep -v ^debian/ | sort > $one
+
+for x in $(diff -u $one $two|tail -n +3|grep ^-|sed 's/^-//'); do
+  if [ -e $x -o -L $x ]; then
+    if [ $clean = 1 ]; then
+      git rm $x
+    else
+      echo "I: Would remove $x"
+    fi
+  else
+    echo "W: Unable to remove non-existing: $x (maybe gone during 1st phase)"
+  fi
+done
+
+rm $one $two
--- mesa-10.5.2.orig/debian/libegl1-mesa-dev.install.in
+++ mesa-10.5.2/debian/libegl1-mesa-dev.install.in
@@ -0,0 +1,5 @@
+# This file gets tweaked in an os-specific fashion (see libegl1-mesa-dev.install.linux.in)
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libEGL.so usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
+dri/usr/include/EGL usr/include
+dri/usr/include/KHR usr/include
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/egl.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libegl1-mesa-dev.install.linux.in
+++ mesa-10.5.2/debian/libegl1-mesa-dev.install.linux.in
@@ -0,0 +1,9 @@
+# OS-independent part (from libegl1-mesa-dev.install.in):
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libEGL.so usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
+dri/usr/include/EGL usr/include
+dri/usr/include/KHR usr/include
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/egl.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
+
+# Wayland support, only on Linux:
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libwayland-egl.so usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/wayland-egl.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libegl1-mesa-dev.links.in
+++ mesa-10.5.2/debian/libegl1-mesa-dev.links.in
@@ -0,0 +1 @@
+/usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/libEGL.so /usr/lib/${DEB_HOST_MULTIARCH}/libEGL.so
--- mesa-10.5.2.orig/debian/libegl1-mesa.install.in
+++ mesa-10.5.2/debian/libegl1-mesa.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libEGL.so.1* usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
--- mesa-10.5.2.orig/debian/libegl1-mesa.lintian-overrides
+++ mesa-10.5.2/debian/libegl1-mesa.lintian-overrides
@@ -0,0 +1 @@
+package-name-doesnt-match-sonames libEGL1
--- mesa-10.5.2.orig/debian/libegl1-mesa.postinst.in
+++ mesa-10.5.2/debian/libegl1-mesa.postinst.in
@@ -0,0 +1,22 @@
+#!/bin/sh
+
+set -e
+
+THIS_PACKAGE=libegl1-mesa
+THIS_SCRIPT=postinst
+
+case "$1" in
+  configure)
+  # Use alternatives to make it easier to switch between Mesa and 3rd party modules
+  update-alternatives --force \
+    --install /etc/ld.so.conf.d/${DEB_HOST_MULTIARCH}_EGL.conf ${DEB_HOST_MULTIARCH}_egl_conf /usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/ld.so.conf 500 \
+
+  # ldconfig needs to be run immediately as we're changing /etc/ld.so.conf.d/ with
+  # alternatives.
+  LDCONFIG_NOTRIGGER=y ldconfig
+
+esac
+
+#DEBHELPER#
+
+exit 0
--- mesa-10.5.2.orig/debian/libegl1-mesa.prerm.in
+++ mesa-10.5.2/debian/libegl1-mesa.prerm.in
@@ -0,0 +1,20 @@
+#!/bin/sh
+
+set -e
+
+THIS_PACKAGE=libegl1-mesa
+THIS_SCRIPT=prerm
+
+case "$1" in
+  remove)
+  # Use alternatives to make it easier to switch between Mesa and 3rd party modules
+  update-alternatives --remove ${DEB_HOST_MULTIARCH}_egl_conf /usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/ld.so.conf
+
+  # explicit ldconfig due to alternatives
+  ldconfig
+
+esac
+
+#DEBHELPER#
+
+exit 0
--- mesa-10.5.2.orig/debian/libegl1-mesa.symbols
+++ mesa-10.5.2/debian/libegl1-mesa.symbols
@@ -0,0 +1,72 @@
+libEGL.so.1 libegl1-mesa #MINVER# | libegl1-x11
+# These are all internal symbols between libEGL and the
+# drivers.  Handle the dependency explicitly in the driver
+# package.
+ eglBindAPI@Base 7.8.1
+ eglBindTexImage@Base 7.8.1
+ eglBindWaylandDisplayWL@Base 7.11~0
+ eglChooseConfig@Base 7.8.1
+ eglChooseModeMESA@Base 7.8.1
+ eglClientWaitSyncKHR@Base 7.9
+ eglCopyBuffers@Base 7.8.1
+ eglCopyContextMESA@Base 7.8.1
+ eglCreateContext@Base 7.8.1
+ eglCreateDRMImageMESA@Base 7.9
+ eglCreateImageKHR@Base 7.8.1
+ eglCreatePbufferFromClientBuffer@Base 7.8.1
+ eglCreatePbufferSurface@Base 7.8.1
+ eglCreatePixmapSurface@Base 7.8.1
+ eglCreatePlatformPixmapSurfaceEXT@Base 10.2
+ eglCreatePlatformWindowSurfaceEXT@Base 10.2
+ eglCreateScreenSurfaceMESA@Base 7.8.1
+ eglCreateSyncKHR@Base 7.9
+ eglCreateWaylandBufferFromImageWL@Base 10.0.1
+ eglCreateWindowSurface@Base 7.8.1
+ eglDestroyContext@Base 7.8.1
+ eglDestroyImageKHR@Base 7.8.1
+ eglDestroySurface@Base 7.8.1
+ eglDestroySyncKHR@Base 7.9
+ eglExportDRMImageMESA@Base 7.9
+ eglGetConfigAttrib@Base 7.8.1
+ eglGetConfigs@Base 7.8.1
+ eglGetCurrentContext@Base 7.8.1
+ eglGetCurrentDisplay@Base 7.8.1
+ eglGetCurrentSurface@Base 7.8.1
+ eglGetDRMDisplayMESA@Base 7.9
+ eglGetDisplay@Base 7.8.1
+ eglGetError@Base 7.8.1
+ eglGetModeAttribMESA@Base 7.8.1
+ eglGetSyncAttribKHR@Base 7.9
+ eglGetModesMESA@Base 7.8.1
+ eglGetPlatformDisplayEXT@Base 10.2
+ eglGetProcAddress@Base 7.8.1
+ eglGetScreensMESA@Base 7.8.1
+ eglGetSyncValuesCHROMIUM@Base 10.3~git
+ eglInitialize@Base 7.8.1
+ eglMakeCurrent@Base 7.8.1
+ eglPostSubBufferNV@Base 8.0~rc1
+ eglQueryAPI@Base 7.8.1
+ eglQueryContext@Base 7.8.1
+ eglQueryModeStringMESA@Base 7.8.1
+ eglQueryScreenMESA@Base 7.8.1
+ eglQueryScreenModeMESA@Base 7.8.1
+ eglQueryScreenSurfaceMESA@Base 7.8.1
+ eglQueryString@Base 7.8.1
+ eglQuerySurface@Base 7.8.1
+ eglQueryWaylandBufferWL@Base 8.1~0
+ eglReleaseTexImage@Base 7.8.1
+ eglReleaseThread@Base 7.8.1
+ eglScreenPositionMESA@Base 7.8.1
+ eglShowScreenSurfaceMESA@Base 7.8.1
+ eglSignalSyncKHR@Base 7.9
+ eglSurfaceAttrib@Base 7.8.1
+ eglSwapBuffers@Base 7.8.1
+ eglSwapBuffersRegionNOK@Base 7.9
+ eglSwapBuffersWithDamageEXT@Base 9.2~0
+ eglSwapInterval@Base 7.8.1
+ eglTerminate@Base 7.8.1
+ eglUnbindWaylandDisplayWL@Base 7.11~0
+ eglWaitClient@Base 7.8.1
+ eglWaitGL@Base 7.8.1
+ eglWaitNative@Base 7.8.1
+ (arch=linux-any)wl_drm_interface@Base 8.0-2~
--- mesa-10.5.2.orig/debian/libgbm-dev.install.in
+++ mesa-10.5.2/debian/libgbm-dev.install.in
@@ -0,0 +1,3 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libgbm.so usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/gbm.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
+dri/usr/include/gbm.h usr/include
--- mesa-10.5.2.orig/debian/libgbm1.install.in
+++ mesa-10.5.2/debian/libgbm1.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libgbm.so.1* usr/lib/${DEB_HOST_MULTIARCH}
--- mesa-10.5.2.orig/debian/libgbm1.symbols
+++ mesa-10.5.2/debian/libgbm1.symbols
@@ -0,0 +1,28 @@
+libgbm.so.1 libgbm1 #MINVER#
+| libgbm1-private
+ gbm_bo_create@Base 7.11~1
+ gbm_bo_destroy@Base 7.11~1
+ gbm_bo_get_device@Base 8.1~0
+ gbm_bo_get_fd@Base 10.2~0
+ gbm_bo_get_format@Base 8.1~0
+ gbm_bo_get_handle@Base 7.11~1
+ gbm_bo_get_height@Base 7.11~1
+ gbm_bo_get_stride@Base 8.1~0
+ gbm_bo_get_user_data@Base 8.1~0
+ gbm_bo_get_width@Base 7.11~1
+ gbm_bo_import@Base 8.1~0
+ gbm_bo_set_user_data@Base 8.1~0
+ gbm_bo_write@Base 8.1~0
+ gbm_create_device@Base 7.11~1
+ gbm_device_destroy@Base 7.11~1
+ gbm_device_get_backend_name@Base 7.11~1
+ gbm_device_get_fd@Base 7.11~1
+ gbm_device_is_format_supported@Base 8.1~0
+ gbm_surface_create@Base 8.1~0
+ gbm_surface_destroy@Base 8.1~0
+ gbm_surface_has_free_buffers@Base 8.1~0
+ gbm_surface_lock_front_buffer@Base 8.1~0
+ gbm_surface_release_buffer@Base 8.1~0
+# stupid side effect of code generation from
+# src/egl/wayland/wayland-drm/wayland-drm.xml which ought to be private.
+ (arch=linux-any)wl_drm_interface@Base 0 1
--- mesa-10.5.2.orig/debian/libgl1-mesa-dev.install.in
+++ mesa-10.5.2/debian/libgl1-mesa-dev.install.in
@@ -0,0 +1,3 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGL.so usr/lib/${DEB_HOST_MULTIARCH}/mesa
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libglapi.so usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/gl.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libgl1-mesa-dev.links.in
+++ mesa-10.5.2/debian/libgl1-mesa-dev.links.in
@@ -0,0 +1 @@
+/usr/lib/${DEB_HOST_MULTIARCH}/mesa/libGL.so /usr/lib/${DEB_HOST_MULTIARCH}/libGL.so
--- mesa-10.5.2.orig/debian/libgl1-mesa-dri.install.in
+++ mesa-10.5.2/debian/libgl1-mesa-dri.install.in
@@ -0,0 +1 @@
+dri/etc/drirc etc
--- mesa-10.5.2.orig/debian/libgl1-mesa-dri.lintian-overrides
+++ mesa-10.5.2/debian/libgl1-mesa-dri.lintian-overrides
@@ -0,0 +1,3 @@
+# virtual packages only:
+breaks-without-version libgl1-mesa-glx-no-multiarch
+breaks-without-version xserver-xorg-core-no-multiarch
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx-i686.install.in
+++ mesa-10.5.2/debian/libgl1-mesa-glx-i686.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/i686/cmov/libGL.so.* usr/lib/${DEB_HOST_MULTIARCH}/i686/cmov
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx.install.in
+++ mesa-10.5.2/debian/libgl1-mesa-glx.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGL.so.* usr/lib/${DEB_HOST_MULTIARCH}/mesa
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx.lintian-overrides
+++ mesa-10.5.2/debian/libgl1-mesa-glx.lintian-overrides
@@ -0,0 +1 @@
+package-name-doesnt-match-sonames libGL1
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx.postinst.in
+++ mesa-10.5.2/debian/libgl1-mesa-glx.postinst.in
@@ -0,0 +1,31 @@
+#!/bin/sh
+
+set -e
+
+THIS_PACKAGE=libgl1-mesa-glx
+THIS_SCRIPT=postinst
+
+case "$1" in
+  configure)
+  # on upgrade from previous versions, clean up our non-arch-qualified
+  # alternative
+  if dpkg --compare-versions "$2" lt-nl 7.10.3-0ubuntu1; then
+    update-alternatives --remove gl_conf /usr/lib/mesa/ld.so.conf
+  fi
+  # Use alternatives to make it easier to switch between Mesa and 3rd party modules
+  update-alternatives --force \
+    --install /etc/ld.so.conf.d/${DEB_HOST_MULTIARCH}_GL.conf ${DEB_HOST_MULTIARCH}_gl_conf /usr/lib/${DEB_HOST_MULTIARCH}/mesa/ld.so.conf 500 \
+    --slave /usr/lib/${DEB_HOST_MULTIARCH}/xorg/extra-modules ${DEB_HOST_MULTIARCH}_xorg_extra_modules /usr/lib/${DEB_HOST_MULTIARCH}/xorg/x11-extra-modules
+
+  # ldconfig needs to be run immediately as we're changing /etc/ld.so.conf.d/ with
+  # alternatives.
+  LDCONFIG_NOTRIGGER=y ldconfig
+
+esac
+
+#DEBHELPER#
+
+exit 0
+
+# vim:set ai et sw=2 ts=2 tw=80:
+
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx.prerm.in
+++ mesa-10.5.2/debian/libgl1-mesa-glx.prerm.in
@@ -0,0 +1,23 @@
+#!/bin/sh
+
+set -e
+
+THIS_PACKAGE=libgl1-mesa-glx
+THIS_SCRIPT=prerm
+
+case "$1" in
+  remove)
+  # Use alternatives to make it easier to switch between Mesa and 3rd party modules
+  update-alternatives --remove ${DEB_HOST_MULTIARCH}_gl_conf /usr/lib/${DEB_HOST_MULTIARCH}/mesa/ld.so.conf
+
+  # explicit ldconfig due to alternatives
+  ldconfig
+
+esac
+
+#DEBHELPER#
+
+exit 0
+
+# vim:set ai et sw=2 ts=2 tw=80:
+
--- mesa-10.5.2.orig/debian/libgl1-mesa-glx.shlibs
+++ mesa-10.5.2/debian/libgl1-mesa-glx.shlibs
@@ -0,0 +1 @@
+libGL 1 libgl1-mesa-glx | libgl1
--- mesa-10.5.2.orig/debian/libglapi-mesa.install.in
+++ mesa-10.5.2/debian/libglapi-mesa.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libglapi.so.0* usr/lib/${DEB_HOST_MULTIARCH}
--- mesa-10.5.2.orig/debian/libglapi-mesa.lintian-overrides
+++ mesa-10.5.2/debian/libglapi-mesa.lintian-overrides
@@ -0,0 +1 @@
+package-name-doesnt-match-sonames libglapi0
--- mesa-10.5.2.orig/debian/libgles1-mesa-dev.install.in
+++ mesa-10.5.2/debian/libgles1-mesa-dev.install.in
@@ -0,0 +1,3 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGLESv1_CM.so usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
+dri/usr/include/GLES usr/include
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/glesv1_cm.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libgles1-mesa-dev.links.in
+++ mesa-10.5.2/debian/libgles1-mesa-dev.links.in
@@ -0,0 +1 @@
+/usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/libGLESv1_CM.so /usr/lib/${DEB_HOST_MULTIARCH}/libGLESv1_CM.so
--- mesa-10.5.2.orig/debian/libgles1-mesa.install.in
+++ mesa-10.5.2/debian/libgles1-mesa.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGLESv1_CM.so.1* usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
--- mesa-10.5.2.orig/debian/libgles1-mesa.lintian-overrides
+++ mesa-10.5.2/debian/libgles1-mesa.lintian-overrides
@@ -0,0 +1 @@
+package-name-doesnt-match-sonames libGLESv1-CM1
--- mesa-10.5.2.orig/debian/libgles1-mesa.symbols
+++ mesa-10.5.2/debian/libgles1-mesa.symbols
@@ -0,0 +1,150 @@
+libGLESv1_CM.so.1 libgles1-mesa #MINVER# | libgles1
+ glActiveTexture@Base 7.8.1
+ glAlphaFunc@Base 7.8.1
+ glAlphaFuncx@Base 7.8.1
+ glBindBuffer@Base 7.8.1
+ glBindTexture@Base 7.8.1
+ glBlendFunc@Base 7.8.1
+ glBufferData@Base 7.8.1
+ glBufferSubData@Base 7.8.1
+ glClear@Base 7.8.1
+ glClearColor@Base 7.8.1
+ glClearColorx@Base 7.8.1
+ glClearDepthf@Base 7.8.1
+ glClearDepthx@Base 7.8.1
+ glClearStencil@Base 7.8.1
+ glClientActiveTexture@Base 7.8.1
+ glClipPlanef@Base 7.8.1
+ glClipPlanex@Base 7.8.1
+ glColor4f@Base 7.8.1
+ glColor4ub@Base 7.8.1
+ glColor4x@Base 7.8.1
+ glColorMask@Base 7.8.1
+ glColorPointer@Base 7.8.1
+ glCompressedTexImage2D@Base 7.8.1
+ glCompressedTexSubImage2D@Base 7.8.1
+ glCopyTexImage2D@Base 7.8.1
+ glCopyTexSubImage2D@Base 7.8.1
+ glCullFace@Base 7.8.1
+ glDeleteBuffers@Base 7.8.1
+ glDeleteTextures@Base 7.8.1
+ glDepthFunc@Base 7.8.1
+ glDepthMask@Base 7.8.1
+ glDepthRangef@Base 7.8.1
+ glDepthRangex@Base 7.8.1
+ glDisable@Base 7.8.1
+ glDisableClientState@Base 7.8.1
+ glDrawArrays@Base 7.8.1
+ glDrawElements@Base 7.8.1
+ glEGLImageTargetRenderbufferStorageOES@Base 7.8.1
+ glEGLImageTargetTexture2DOES@Base 7.8.1
+ glEnable@Base 7.8.1
+ glEnableClientState@Base 7.8.1
+ glFinish@Base 7.8.1
+ glFlush@Base 7.8.1
+ glFogf@Base 7.8.1
+ glFogfv@Base 7.8.1
+ glFogx@Base 7.8.1
+ glFogxv@Base 7.8.1
+ glFrontFace@Base 7.8.1
+ glFrustumf@Base 7.8.1
+ glFrustumx@Base 7.8.1
+ glGenBuffers@Base 7.8.1
+ glGenTextures@Base 7.8.1
+ glGetBooleanv@Base 7.8.1
+ glGetBufferParameteriv@Base 7.8.1
+ glGetClipPlanef@Base 7.8.1
+ glGetClipPlanex@Base 7.8.1
+ glGetError@Base 7.8.1
+ glGetFixedv@Base 7.8.1
+ glGetFloatv@Base 7.8.1
+ glGetIntegerv@Base 7.8.1
+ glGetLightfv@Base 7.8.1
+ glGetLightxv@Base 7.8.1
+ glGetMaterialfv@Base 7.8.1
+ glGetMaterialxv@Base 7.8.1
+ glGetPointerv@Base 7.8.1
+ glGetString@Base 7.8.1
+ glGetTexEnvfv@Base 7.8.1
+ glGetTexEnviv@Base 7.8.1
+ glGetTexEnvxv@Base 7.8.1
+ glGetTexParameterfv@Base 7.8.1
+ glGetTexParameteriv@Base 7.8.1
+ glGetTexParameterxv@Base 7.8.1
+ glHint@Base 7.8.1
+ glIsBuffer@Base 7.8.1
+ glIsEnabled@Base 7.8.1
+ glIsTexture@Base 7.8.1
+ glLightModelf@Base 7.8.1
+ glLightModelfv@Base 7.8.1
+ glLightModelx@Base 7.8.1
+ glLightModelxv@Base 7.8.1
+ glLightf@Base 7.8.1
+ glLightfv@Base 7.8.1
+ glLightx@Base 7.8.1
+ glLightxv@Base 7.8.1
+ glLineWidth@Base 7.8.1
+ glLineWidthx@Base 7.8.1
+ glLoadIdentity@Base 7.8.1
+ glLoadMatrixf@Base 7.8.1
+ glLoadMatrixx@Base 7.8.1
+ glLogicOp@Base 7.8.1
+ glMaterialf@Base 7.8.1
+ glMaterialfv@Base 7.8.1
+ glMaterialx@Base 7.8.1
+ glMaterialxv@Base 7.8.1
+ glMatrixMode@Base 7.8.1
+ glMultMatrixf@Base 7.8.1
+ glMultMatrixx@Base 7.8.1
+ glMultiDrawArraysEXT@Base 7.8.1
+ glMultiDrawElementsEXT@Base 7.8.1
+ glMultiTexCoord4f@Base 7.8.1
+ glMultiTexCoord4x@Base 7.8.1
+ glNormal3f@Base 7.8.1
+ glNormal3x@Base 7.8.1
+ glNormalPointer@Base 7.8.1
+ glOrthof@Base 7.8.1
+ glOrthox@Base 7.8.1
+ glPixelStorei@Base 7.8.1
+ glPointParameterf@Base 7.8.1
+ glPointParameterfv@Base 7.8.1
+ glPointParameterx@Base 7.8.1
+ glPointParameterxv@Base 7.8.1
+ glPointSize@Base 7.8.1
+ glPointSizePointerOES@Base 7.8.1
+ glPointSizex@Base 7.8.1
+ glPolygonOffset@Base 7.8.1
+ glPolygonOffsetx@Base 7.8.1
+ glPopMatrix@Base 7.8.1
+ glPushMatrix@Base 7.8.1
+ glReadPixels@Base 7.8.1
+ glRotatef@Base 7.8.1
+ glRotatex@Base 7.8.1
+ glSampleCoverage@Base 7.8.1
+ glSampleCoveragex@Base 7.8.1
+ glScalef@Base 7.8.1
+ glScalex@Base 7.8.1
+ glScissor@Base 7.8.1
+ glShadeModel@Base 7.8.1
+ glStencilFunc@Base 7.8.1
+ glStencilMask@Base 7.8.1
+ glStencilOp@Base 7.8.1
+ glTexCoordPointer@Base 7.8.1
+ glTexEnvf@Base 7.8.1
+ glTexEnvfv@Base 7.8.1
+ glTexEnvi@Base 7.8.1
+ glTexEnviv@Base 7.8.1
+ glTexEnvx@Base 7.8.1
+ glTexEnvxv@Base 7.8.1
+ glTexImage2D@Base 7.8.1
+ glTexParameterf@Base 7.8.1
+ glTexParameterfv@Base 7.8.1
+ glTexParameteri@Base 7.8.1
+ glTexParameteriv@Base 7.8.1
+ glTexParameterx@Base 7.8.1
+ glTexParameterxv@Base 7.8.1
+ glTexSubImage2D@Base 7.8.1
+ glTranslatef@Base 7.8.1
+ glTranslatex@Base 7.8.1
+ glVertexPointer@Base 7.8.1
+ glViewport@Base 7.8.1
--- mesa-10.5.2.orig/debian/libgles2-mesa-dev.install.in
+++ mesa-10.5.2/debian/libgles2-mesa-dev.install.in
@@ -0,0 +1,4 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGLESv2.so usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
+dri/usr/include/GLES2 usr/include
+dri/usr/include/GLES3 usr/include
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/glesv2.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libgles2-mesa-dev.links.in
+++ mesa-10.5.2/debian/libgles2-mesa-dev.links.in
@@ -0,0 +1 @@
+/usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/libGLESv2.so /usr/lib/${DEB_HOST_MULTIARCH}/libGLESv2.so
--- mesa-10.5.2.orig/debian/libgles2-mesa.install.in
+++ mesa-10.5.2/debian/libgles2-mesa.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libGLESv2.so.2* usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl
--- mesa-10.5.2.orig/debian/libgles2-mesa.lintian-overrides
+++ mesa-10.5.2/debian/libgles2-mesa.lintian-overrides
@@ -0,0 +1 @@
+package-name-doesnt-match-sonames libGLESv2-2
--- mesa-10.5.2.orig/debian/libgles2-mesa.symbols
+++ mesa-10.5.2/debian/libgles2-mesa.symbols
@@ -0,0 +1,251 @@
+libGLESv2.so.2 libgles2-mesa #MINVER# | libgles2
+ glActiveTexture@Base 7.8.1
+ glAttachShader@Base 7.8.1
+ glBeginQuery@Base 9.1~
+ glBeginTransformFeedback@Base 9.1~
+ glBindAttribLocation@Base 7.8.1
+ glBindBuffer@Base 7.8.1
+ glBindBufferBase@Base 9.1~
+ glBindBufferRange@Base 9.1~
+ glBindFramebuffer@Base 7.8.1
+ glBindRenderbuffer@Base 7.8.1
+ glBindSampler@Base 9.1~
+ glBindTexture@Base 7.8.1
+ glBindTransformFeedback@Base 9.1~
+ glBindVertexArray@Base 9.1~
+ glBlendColor@Base 7.8.1
+ glBlendEquation@Base 7.8.1
+ glBlendEquationSeparate@Base 7.8.1
+ glBlendFunc@Base 7.8.1
+ glBlendFuncSeparate@Base 7.8.1
+ glBlitFramebuffer@Base 9.1~
+ glBufferData@Base 7.8.1
+ glBufferSubData@Base 7.8.1
+ glCheckFramebufferStatus@Base 7.8.1
+ glClear@Base 7.8.1
+ glClearBufferfi@Base 9.1~
+ glClearBufferfv@Base 9.1~
+ glClearBufferiv@Base 9.1~
+ glClearBufferuiv@Base 9.1~
+ glClearColor@Base 7.8.1
+ glClearDepthf@Base 7.8.1
+ glClearStencil@Base 7.8.1
+ glClientWaitSync@Base 9.1~
+ glColorMask@Base 7.8.1
+ glCompileShader@Base 7.8.1
+ glCompressedTexImage2D@Base 7.8.1
+ glCompressedTexImage3D@Base 9.1~
+ glCompressedTexSubImage2D@Base 7.8.1
+ glCompressedTexSubImage3D@Base 9.1~
+ glCopyBufferSubData@Base 9.1~
+ glCopyTexImage2D@Base 7.8.1
+ glCopyTexSubImage2D@Base 7.8.1
+ glCopyTexSubImage3D@Base 9.1~
+ glCreateProgram@Base 7.8.1
+ glCreateShader@Base 7.8.1
+ glCullFace@Base 7.8.1
+ glDeleteBuffers@Base 7.8.1
+ glDeleteFramebuffers@Base 7.8.1
+ glDeleteProgram@Base 7.8.1
+ glDeleteQueries@Base 9.1~
+ glDeleteRenderbuffers@Base 7.8.1
+ glDeleteSamplers@Base 9.1~
+ glDeleteShader@Base 7.8.1
+ glDeleteSync@Base 9.1~
+ glDeleteTextures@Base 7.8.1
+ glDeleteTransformFeedbacks@Base 9.1~
+ glDeleteVertexArrays@Base 9.1~
+ glDepthFunc@Base 7.8.1
+ glDepthMask@Base 7.8.1
+ glDepthRangef@Base 7.8.1
+ glDetachShader@Base 7.8.1
+ glDisable@Base 7.8.1
+ glDisableVertexAttribArray@Base 7.8.1
+ glDrawArrays@Base 7.8.1
+ glDrawArraysInstanced@Base 9.1~
+ glDrawBuffers@Base 9.1~
+ glDrawElements@Base 7.8.1
+ glDrawElementsInstanced@Base 9.1~
+ glDrawRangeElements@Base 9.1~
+ glEGLImageTargetRenderbufferStorageOES@Base 7.8.1
+ glEGLImageTargetTexture2DOES@Base 7.8.1
+ glEnable@Base 7.8.1
+ glEnableVertexAttribArray@Base 7.8.1
+ glEndQuery@Base 9.1~
+ glEndTransformFeedback@Base 9.1~
+ glFenceSync@Base 9.1~
+ glFinish@Base 7.8.1
+ glFlush@Base 7.8.1
+ glFlushMappedBufferRange@Base 9.1~
+ glFramebufferRenderbuffer@Base 7.8.1
+ glFramebufferTexture2D@Base 7.8.1
+ glFramebufferTextureLayer@Base 9.1~
+ glFrontFace@Base 7.8.1
+ glGenBuffers@Base 7.8.1
+ glGenFramebuffers@Base 7.8.1
+ glGenQueries@Base 9.1~
+ glGenRenderbuffers@Base 7.8.1
+ glGenSamplers@Base 9.1~
+ glGenTextures@Base 7.8.1
+ glGenTransformFeedbacks@Base 9.1~
+ glGenVertexArrays@Base 9.1~
+ glGenerateMipmap@Base 7.8.1
+ glGetActiveAttrib@Base 7.8.1
+ glGetActiveUniform@Base 7.8.1
+ glGetActiveUniformBlockName@Base 9.1~
+ glGetActiveUniformBlockiv@Base 9.1~
+ glGetActiveUniformsiv@Base 9.1~
+ glGetAttachedShaders@Base 7.8.1
+ glGetAttribLocation@Base 7.8.1
+ glGetBooleanv@Base 7.8.1
+ glGetBufferParameteri64v@Base 9.1~
+ glGetBufferParameteriv@Base 7.8.1
+ glGetBufferPointerv@Base 9.1~
+ glGetError@Base 7.8.1
+ glGetFloatv@Base 7.8.1
+ glGetFragDataLocation@Base 9.1~
+ glGetFramebufferAttachmentParameteriv@Base 7.8.1
+ glGetInteger64i_v@Base 9.1~
+ glGetInteger64v@Base 9.1~
+ glGetIntegeri_v@Base 9.1~
+ glGetIntegerv@Base 7.8.1
+ glGetInternalformativ@Base 9.1~
+ glGetProgramBinary@Base 9.1~
+ glGetProgramInfoLog@Base 7.8.1
+ glGetProgramiv@Base 7.8.1
+ glGetQueryObjectuiv@Base 9.1~
+ glGetQueryiv@Base 9.1~
+ glGetRenderbufferParameteriv@Base 7.8.1
+ glGetSamplerParameterfv@Base 9.1~
+ glGetSamplerParameteriv@Base 9.1~
+ glGetShaderInfoLog@Base 7.8.1
+ glGetShaderPrecisionFormat@Base 7.8.1
+ glGetShaderSource@Base 7.8.1
+ glGetShaderiv@Base 7.8.1
+ glGetString@Base 7.8.1
+ glGetStringi@Base 9.1~
+ glGetSynciv@Base 9.1~
+ glGetTexParameterfv@Base 7.8.1
+ glGetTexParameteriv@Base 7.8.1
+ glGetTransformFeedbackVarying@Base 9.1~
+ glGetUniformBlockIndex@Base 9.1~
+ glGetUniformIndices@Base 9.1~
+ glGetUniformLocation@Base 7.8.1
+ glGetUniformfv@Base 7.8.1
+ glGetUniformiv@Base 7.8.1
+ glGetUniformuiv@Base 9.1~
+ glGetVertexAttribIiv@Base 9.1~
+ glGetVertexAttribIuiv@Base 9.1~
+ glGetVertexAttribPointerv@Base 7.8.1
+ glGetVertexAttribfv@Base 7.8.1
+ glGetVertexAttribiv@Base 7.8.1
+ glHint@Base 7.8.1
+ glInvalidateFramebuffer@Base 9.1~
+ glInvalidateSubFramebuffer@Base 9.1~
+ glIsBuffer@Base 7.8.1
+ glIsEnabled@Base 7.8.1
+ glIsFramebuffer@Base 7.8.1
+ glIsProgram@Base 7.8.1
+ glIsQuery@Base 9.1~
+ glIsRenderbuffer@Base 7.8.1
+ glIsSampler@Base 9.1~
+ glIsShader@Base 7.8.1
+ glIsSync@Base 9.1~
+ glIsTexture@Base 7.8.1
+ glIsTransformFeedback@Base 9.1~
+ glIsVertexArray@Base 9.1~
+ glLineWidth@Base 7.8.1
+ glLinkProgram@Base 7.8.1
+ glMapBufferRange@Base 9.1~
+ glMultiDrawArraysEXT@Base 7.8.1
+ glMultiDrawElementsEXT@Base 7.8.1
+ glPauseTransformFeedback@Base 9.1~
+ glPixelStorei@Base 7.8.1
+ glPolygonOffset@Base 7.8.1
+ glProgramBinary@Base 9.1~
+ glProgramParameteri@Base 9.1~
+ glReadBuffer@Base 9.1~
+ glReadPixels@Base 7.8.1
+ glReleaseShaderCompiler@Base 7.8.1
+ glRenderbufferStorage@Base 7.8.1
+ glRenderbufferStorageMultisample@Base 9.1~
+ glResumeTransformFeedback@Base 9.1~
+ glSampleCoverage@Base 7.8.1
+ glSamplerParameterf@Base 9.1~
+ glSamplerParameterfv@Base 9.1~
+ glSamplerParameteri@Base 9.1~
+ glSamplerParameteriv@Base 9.1~
+ glScissor@Base 7.8.1
+ glShaderBinary@Base 7.8.1
+ glShaderSource@Base 7.8.1
+ glStencilFunc@Base 7.8.1
+ glStencilFuncSeparate@Base 7.8.1
+ glStencilMask@Base 7.8.1
+ glStencilMaskSeparate@Base 7.8.1
+ glStencilOp@Base 7.8.1
+ glStencilOpSeparate@Base 7.8.1
+ glTexImage2D@Base 7.8.1
+ glTexImage3D@Base 9.1~
+ glTexParameterf@Base 7.8.1
+ glTexParameterfv@Base 7.8.1
+ glTexParameteri@Base 7.8.1
+ glTexParameteriv@Base 7.8.1
+ glTexStorage2D@Base 9.1~
+ glTexStorage3D@Base 9.1~
+ glTexSubImage2D@Base 7.8.1
+ glTexSubImage3D@Base 9.1~
+ glTransformFeedbackVaryings@Base 9.1~
+ glUniform1f@Base 7.8.1
+ glUniform1fv@Base 7.8.1
+ glUniform1i@Base 7.8.1
+ glUniform1iv@Base 7.8.1
+ glUniform1ui@Base 9.1~
+ glUniform1uiv@Base 9.1~
+ glUniform2f@Base 7.8.1
+ glUniform2fv@Base 7.8.1
+ glUniform2i@Base 7.8.1
+ glUniform2iv@Base 7.8.1
+ glUniform2ui@Base 9.1~
+ glUniform2uiv@Base 9.1~
+ glUniform3f@Base 7.8.1
+ glUniform3fv@Base 7.8.1
+ glUniform3i@Base 7.8.1
+ glUniform3iv@Base 7.8.1
+ glUniform3ui@Base 9.1~
+ glUniform3uiv@Base 9.1~
+ glUniform4f@Base 7.8.1
+ glUniform4fv@Base 7.8.1
+ glUniform4i@Base 7.8.1
+ glUniform4iv@Base 7.8.1
+ glUniform4ui@Base 9.1~
+ glUniform4uiv@Base 9.1~
+ glUniformBlockBinding@Base 9.1~
+ glUniformMatrix2fv@Base 7.8.1
+ glUniformMatrix2x3fv@Base 9.1~
+ glUniformMatrix2x4fv@Base 9.1~
+ glUniformMatrix3fv@Base 7.8.1
+ glUniformMatrix3x2fv@Base 9.1~
+ glUniformMatrix3x4fv@Base 9.1~
+ glUniformMatrix4fv@Base 7.8.1
+ glUniformMatrix4x2fv@Base 9.1~
+ glUniformMatrix4x3fv@Base 9.1~
+ glUnmapBuffer@Base 9.1~
+ glUseProgram@Base 7.8.1
+ glValidateProgram@Base 7.8.1
+ glVertexAttrib1f@Base 7.8.1
+ glVertexAttrib1fv@Base 7.8.1
+ glVertexAttrib2f@Base 7.8.1
+ glVertexAttrib2fv@Base 7.8.1
+ glVertexAttrib3f@Base 7.8.1
+ glVertexAttrib3fv@Base 7.8.1
+ glVertexAttrib4f@Base 7.8.1
+ glVertexAttrib4fv@Base 7.8.1
+ glVertexAttribDivisor@Base 9.1~
+ glVertexAttribI4i@Base 9.1~
+ glVertexAttribI4iv@Base 9.1~
+ glVertexAttribI4ui@Base 9.1~
+ glVertexAttribI4uiv@Base 9.1~
+ glVertexAttribIPointer@Base 9.1~
+ glVertexAttribPointer@Base 7.8.1
+ glViewport@Base 7.8.1
+ glWaitSync@Base 9.1~
--- mesa-10.5.2.orig/debian/libopenvg1-mesa-dev.links.in
+++ mesa-10.5.2/debian/libopenvg1-mesa-dev.links.in
@@ -0,0 +1 @@
+/usr/lib/${DEB_HOST_MULTIARCH}/mesa-egl/libOpenVG.so /usr/lib/${DEB_HOST_MULTIARCH}/libOpenVG.so
--- mesa-10.5.2.orig/debian/libosmesa6-dev.install.in
+++ mesa-10.5.2/debian/libosmesa6-dev.install.in
@@ -0,0 +1,3 @@
+dri/usr/include/GL/osmesa.h	usr/include/GL
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libOSMesa.so	usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/osmesa.pc	usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
--- mesa-10.5.2.orig/debian/libosmesa6.install.in
+++ mesa-10.5.2/debian/libosmesa6.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libOSMesa.so.*	usr/lib/${DEB_HOST_MULTIARCH}
--- mesa-10.5.2.orig/debian/libosmesa6.links.in
+++ mesa-10.5.2/debian/libosmesa6.links.in
@@ -0,0 +1 @@
+usr/lib/${DEB_HOST_MULTIARCH}/libOSMesa.so.8	usr/lib/${DEB_HOST_MULTIARCH}/libOSMesa.so.6
--- mesa-10.5.2.orig/debian/libosmesa6.shlibs
+++ mesa-10.5.2/debian/libosmesa6.shlibs
@@ -0,0 +1 @@
+libOSMesa 8 libosmesa6 (>= 10.2~)
--- mesa-10.5.2.orig/debian/libwayland-egl1-mesa.install.in
+++ mesa-10.5.2/debian/libwayland-egl1-mesa.install.in
@@ -0,0 +1,3 @@
+# Wayland support, only on Linux:
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libwayland-egl.so.1 usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libwayland-egl.so.1.0.0 usr/lib/${DEB_HOST_MULTIARCH}
--- mesa-10.5.2.orig/debian/libwayland-egl1-mesa.symbols
+++ mesa-10.5.2/debian/libwayland-egl1-mesa.symbols
@@ -0,0 +1,5 @@
+libwayland-egl.so.1 libwayland-egl1-mesa #MINVER# | libwayland-egl1
+ wl_egl_window_create@Base 10.0.2
+ wl_egl_window_destroy@Base 10.0.2
+ wl_egl_window_get_attached_size@Base 10.0.2
+ wl_egl_window_resize@Base 10.0.2
--- mesa-10.5.2.orig/debian/libxatracker-dev.install.in
+++ mesa-10.5.2/debian/libxatracker-dev.install.in
@@ -0,0 +1,5 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libxatracker.so usr/lib/${DEB_HOST_MULTIARCH}
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/xatracker.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig
+dri/usr/include/xa_composite.h usr/include
+dri/usr/include/xa_context.h usr/include
+dri/usr/include/xa_tracker.h usr/include
--- mesa-10.5.2.orig/debian/libxatracker2.install.in
+++ mesa-10.5.2/debian/libxatracker2.install.in
@@ -0,0 +1 @@
+dri/usr/lib/${DEB_HOST_MULTIARCH}/libxatracker.so.2* usr/lib/${DEB_HOST_MULTIARCH}
--- mesa-10.5.2.orig/debian/libxatracker2.symbols
+++ mesa-10.5.2/debian/libxatracker2.symbols
@@ -0,0 +1,34 @@
+libxatracker.so.2 libxatracker2 #MINVER#
+ xa_composite_allocation@Base 0
+ xa_composite_check_accelerated@Base 0
+ xa_composite_done@Base 0
+ xa_composite_prepare@Base 0
+ xa_composite_rect@Base 0
+ xa_context_create@Base 0
+ xa_context_default@Base 0
+ xa_context_destroy@Base 0
+ xa_context_flush@Base 0
+ xa_copy@Base 0
+ xa_copy_done@Base 0
+ xa_copy_prepare@Base 0
+ xa_fence_destroy@Base 0
+ xa_fence_get@Base 0
+ xa_fence_wait@Base 0
+ xa_format_check_supported@Base 0
+ xa_solid@Base 0
+ xa_solid_done@Base 0
+ xa_solid_prepare@Base 0
+ xa_surface_create@Base 0
+ xa_surface_dma@Base 0
+ xa_surface_format@Base 0
+ xa_surface_from_handle@Base 0
+ xa_surface_handle@Base 0
+ xa_surface_map@Base 0
+ xa_surface_redefine@Base 0
+ xa_surface_ref@Base 0
+ xa_surface_unmap@Base 0
+ xa_surface_unref@Base 0
+ xa_tracker_create@Base 0
+ xa_tracker_destroy@Base 0
+ xa_tracker_version@Base 0
+ xa_yuv_planar_blit@Base 0
--- mesa-10.5.2.orig/debian/local/control
+++ mesa-10.5.2/debian/local/control
@@ -0,0 +1 @@
+report-with: xserver-xorg xserver-xorg-core
--- mesa-10.5.2.orig/debian/local/script
+++ mesa-10.5.2/debian/local/script
@@ -0,0 +1,26 @@
+#!/bin/sh
+
+SERVER_BUG_SCRIPT=/usr/share/bug/xserver-xorg-core/script
+
+exec >&3
+
+echo "glxinfo:"
+echo "--------"
+
+if [ -z "$DISPLAY" ]; then
+    echo "DISPLAY is not set."
+else
+    if which glxinfo >/dev/null 2>&1; then
+        glxinfo
+    else
+        echo "glxinfo is not available (missing mesa-utils package)."
+    fi
+fi
+
+echo
+
+if [ -x "$SERVER_BUG_SCRIPT" ]; then
+    $SERVER_BUG_SCRIPT 3>&1
+else
+    echo "$SERVER_BUG_SCRIPT not available"
+fi
--- mesa-10.5.2.orig/debian/mesa-common-dev.docs
+++ mesa-10.5.2/debian/mesa-common-dev.docs
@@ -0,0 +1,8 @@
+docs/bugs.html
+docs/debugging.html
+docs/envvars.html
+docs/faq.html
+docs/osmesa.html
+docs/RELNOTES-*
+docs/relnotes*
+docs/*.spec
--- mesa-10.5.2.orig/debian/mesa-common-dev.install.in
+++ mesa-10.5.2/debian/mesa-common-dev.install.in
@@ -0,0 +1,10 @@
+dri/usr/include/GL/gl.h usr/include/GL
+dri/usr/include/GL/glcorearb.h usr/include/GL
+dri/usr/include/GL/glext.h usr/include/GL
+dri/usr/include/GL/gl_mangle.h usr/include/GL
+dri/usr/include/GL/glx.h usr/include/GL
+dri/usr/include/GL/glxext.h usr/include/GL
+dri/usr/include/GL/glx_mangle.h usr/include/GL
+dri/usr/include/GL/glcorearb.h usr/include/GL
+dri/usr/include/GL/internal/dri_interface.h usr/include/GL/internal
+dri/usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/dri.pc usr/lib/${DEB_HOST_MULTIARCH}/pkgconfig/
--- mesa-10.5.2.orig/debian/not-installed
+++ mesa-10.5.2/debian/not-installed
@@ -0,0 +1,6 @@
+# Keep track of files we don't install:
+
+# Common list:
+NOT_INSTALLED := \
+	dri/usr/include/GL/wglext.h \
+	dri/usr/include/GL/wmesa.h
--- mesa-10.5.2.orig/debian/patches/07_gallium-fix-build-failure-on-powerpcspe.diff
+++ mesa-10.5.2/debian/patches/07_gallium-fix-build-failure-on-powerpcspe.diff
@@ -0,0 +1,40 @@
+From a4f14e7239780b02af8d74669c5458d4b0957d4d Mon Sep 17 00:00:00 2001
+From: Roland Stigge <stigge@antcom.de>
+Date: Sun, 2 Mar 2014 19:52:56 +0100
+Subject: [PATCH] gallium: fix build failure on powerpcspe
+
+In the case of powerpc, mesa activates some altivec instructions
+that are unknown on the powerpcspe architecture (see
+https://wiki.debian.org/PowerPCSPEPort), causing a build failure as the
+'vand' opcode is not recognized by the assembler.
+
+This patch fixes this by preventing the PPC-specialcasing in case of
+powerpcspe (__NO_FPRS__ is only defined there).
+
+https://bugs.debian.org/695746
+---
+ src/gallium/include/pipe/p_config.h | 2 ++
+ 1 file changed, 2 insertions(+)
+
+diff --git a/src/gallium/include/pipe/p_config.h b/src/gallium/include/pipe/p_config.h
+index d603681..8189a73 100644
+--- a/src/gallium/include/pipe/p_config.h
++++ b/src/gallium/include/pipe/p_config.h
+@@ -107,12 +107,14 @@
+ #endif
+ #endif
+ 
++#ifndef __NO_FPRS__
+ #if defined(__ppc__) || defined(__ppc64__) || defined(__PPC__)
+ #define PIPE_ARCH_PPC
+ #if defined(__ppc64__) || defined(__PPC64__)
+ #define PIPE_ARCH_PPC_64
+ #endif
+ #endif
++#endif
+ 
+ #if defined(__s390x__)
+ #define PIPE_ARCH_S390
+-- 
+1.9.0
+
--- mesa-10.5.2.orig/debian/patches/egl-platform-mir.patch
+++ mesa-10.5.2/debian/patches/egl-platform-mir.patch
@@ -0,0 +1,1185 @@
+--- a/configure.ac
++++ b/configure.ac
+@@ -1636,7 +1636,9 @@ for plat in $egl_platforms; do
+ 
+ 	android|fbdev|gdi|null)
+ 		;;
+-
++        mir)
++                PKG_CHECK_MODULES([MIR], [mir-client-platform-mesa-dev])
++                ;;
+ 	*)
+ 		AC_MSG_ERROR([EGL platform '$plat' does not exist])
+ 		;;
+@@ -1665,6 +1667,7 @@ AM_CONDITIONAL(HAVE_EGL_PLATFORM_WAYLAND
+ AM_CONDITIONAL(HAVE_EGL_PLATFORM_DRM, echo "$egl_platforms" | grep -q 'drm')
+ AM_CONDITIONAL(HAVE_EGL_PLATFORM_FBDEV, echo "$egl_platforms" | grep -q 'fbdev')
+ AM_CONDITIONAL(HAVE_EGL_PLATFORM_NULL, echo "$egl_platforms" | grep -q 'null')
++AM_CONDITIONAL(HAVE_EGL_PLATFORM_MIR, echo "$egl_platforms" | grep -q 'mir')
+ 
+ AM_CONDITIONAL(HAVE_EGL_DRIVER_DRI2, test "x$HAVE_EGL_DRIVER_DRI2" != "x")
+ 
+--- a/include/EGL/eglplatform.h
++++ b/include/EGL/eglplatform.h
+@@ -104,6 +104,13 @@ typedef struct ANativeWindow        *EGL
+ typedef struct egl_native_pixmap_t  *EGLNativePixmapType;
+ typedef void                        *EGLNativeDisplayType;
+ 
++#elif defined(MIR_EGL_PLATFORM)
++
++#include <mir_toolkit/mir_client_library.h>
++typedef MirEGLNativeDisplayType EGLNativeDisplayType;
++typedef void                   *EGLNativePixmapType;
++typedef MirEGLNativeWindowType  EGLNativeWindowType;
++
+ #elif defined(__unix__)
+ 
+ #if defined(MESA_EGL_NO_X11_HEADERS)
+--- a/include/GL/internal/dri_interface.h
++++ b/include/GL/internal/dri_interface.h
+@@ -833,10 +833,12 @@ struct __DRIbufferRec {
+     unsigned int pitch;
+     unsigned int cpp;
+     unsigned int flags;
++    unsigned int fd;    /**< Only available with DRI2_LOADER_VERSION >= 4, */
++                        /**< Only valid if name == 0 */
+ };
+ 
+ #define __DRI_DRI2_LOADER "DRI_DRI2Loader"
+-#define __DRI_DRI2_LOADER_VERSION 3
++#define __DRI_DRI2_LOADER_VERSION 4
+ struct __DRIdri2LoaderExtensionRec {
+     __DRIextension base;
+ 
+--- a/src/egl/drivers/dri2/Makefile.am
++++ b/src/egl/drivers/dri2/Makefile.am
+@@ -65,4 +65,10 @@ libegl_dri2_la_SOURCES += platform_drm.c
+ AM_CFLAGS += -DHAVE_DRM_PLATFORM
+ endif
+ 
++if HAVE_EGL_PLATFORM_MIR
++libegl_dri2_la_SOURCES += platform_mir.c
++AM_CFLAGS += -DHAVE_MIR_PLATFORM
++AM_CFLAGS += $(MIR_CFLAGS)
++endif
++
+ EXTRA_DIST = SConscript
+--- a/src/egl/drivers/dri2/egl_dri2.c
++++ b/src/egl/drivers/dri2/egl_dri2.c
+@@ -651,6 +651,12 @@ dri2_initialize(_EGLDriver *drv, _EGLDis
+          return EGL_TRUE;
+       return dri2_initialize_wayland(drv, disp);
+ #endif
++#ifdef HAVE_MIR_PLATFORM
++   case _EGL_PLATFORM_MIR:
++      if (disp->Options.TestOnly)
++         return EGL_TRUE;
++      return dri2_initialize_mir(drv, disp);
++#endif
+ #ifdef HAVE_ANDROID_PLATFORM
+    case _EGL_PLATFORM_ANDROID:
+       if (disp->Options.TestOnly)
+@@ -700,6 +706,13 @@ dri2_terminate(_EGLDriver *drv, _EGLDisp
+       }
+       break;
+ #endif
++#ifdef HAVE_MIR_PLATFORM
++   case _EGL_PLATFORM_MIR:
++      if (dri2_dpy->own_device) {
++         gbm_device_destroy(&dri2_dpy->gbm_dri->base.base);
++      }
++      break;
++#endif
+ #ifdef HAVE_WAYLAND_PLATFORM
+    case _EGL_PLATFORM_WAYLAND:
+       wl_drm_destroy(dri2_dpy->wl_drm);
+@@ -716,7 +729,8 @@ dri2_terminate(_EGLDriver *drv, _EGLDisp
+     * the ones from the gbm device. As such the gbm itself is responsible
+     * for the cleanup.
+     */
+-   if (disp->Platform != _EGL_PLATFORM_DRM) {
++   if (disp->Platform != _EGL_PLATFORM_DRM &&
++       disp->Platform != _EGL_PLATFORM_MIR) {
+       for (i = 0; dri2_dpy->driver_configs[i]; i++)
+          free((__DRIconfig *) dri2_dpy->driver_configs[i]);
+       free(dri2_dpy->driver_configs);
+--- a/src/egl/drivers/dri2/egl_dri2.h
++++ b/src/egl/drivers/dri2/egl_dri2.h
+@@ -64,6 +64,10 @@
+ 
+ #endif /* HAVE_ANDROID_PLATFORM */
+ 
++#ifdef HAVE_MIR_PLATFORM
++#include <mir_toolkit/mesa/native_display.h>
++#endif
++
+ #include "eglconfig.h"
+ #include "eglcontext.h"
+ #include "egldisplay.h"
+@@ -197,6 +201,10 @@ struct dri2_egl_display
+    int			     formats;
+    uint32_t                  capabilities;
+ #endif
++
++#ifdef HAVE_MIR_PLATFORM
++  MirMesaEGLNativeDisplay *mir_disp;
++#endif
+ };
+ 
+ struct dri2_egl_context
+@@ -243,16 +251,21 @@ struct dri2_egl_surface
+    struct gbm_dri_surface *gbm_surf;
+ #endif
+ 
+-#if defined(HAVE_WAYLAND_PLATFORM) || defined(HAVE_DRM_PLATFORM)
++#if defined(HAVE_WAYLAND_PLATFORM) \
++   || defined(HAVE_DRM_PLATFORM) \
++   || defined(HAVE_MIR_PLATFORM)
+    __DRIbuffer           *dri_buffers[__DRI_BUFFER_COUNT];
+    struct {
+ #ifdef HAVE_WAYLAND_PLATFORM
+       struct wl_buffer   *wl_buffer;
+       __DRIimage         *dri_image;
+ #endif
+-#ifdef HAVE_DRM_PLATFORM
++#if defined(HAVE_DRM_PLATFORM) || defined(HAVE_MIR_PLATFORM)
+       struct gbm_bo       *bo;
+ #endif
++#ifdef HAVE_MIR_PLATFORM
++      int                 fd;
++#endif
+       int                 locked;
+       int                 age;
+    } color_buffers[4], *back, *current;
+@@ -265,6 +278,10 @@ struct dri2_egl_surface
+    /* EGL-owned buffers */
+    __DRIbuffer           *local_buffers[__DRI_BUFFER_COUNT];
+ #endif
++
++#ifdef HAVE_MIR_PLATFORM
++   MirMesaEGLNativeSurface *mir_surf;
++#endif
+ };
+ 
+ 
+@@ -335,4 +352,7 @@ dri2_initialize_android(_EGLDriver *drv,
+ void
+ dri2_flush_drawable_for_swapbuffers(_EGLDisplay *disp, _EGLSurface *draw);
+ 
++EGLBoolean
++dri2_initialize_mir(_EGLDriver *drv, _EGLDisplay *disp);
++
+ #endif /* EGL_DRI2_INCLUDED */
+--- /dev/null
++++ b/src/egl/drivers/dri2/platform_mir.c
+@@ -0,0 +1,619 @@
++/*
++ * Copyright © 2012 Canonical, Inc
++ *
++ * Permission is hereby granted, free of charge, to any person obtaining a
++ * copy of this software and associated documentation files (the "Software"),
++ * to deal in the Software without restriction, including without limitation
++ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
++ * and/or sell copies of the Software, and to permit persons to whom the
++ * Software is furnished to do so, subject to the following conditions:
++ *
++ * The above copyright notice and this permission notice (including the next
++ * paragraph) shall be included in all copies or substantial portions of the
++ * Software.
++ *
++ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
++ * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
++ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
++ * NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
++ * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
++ * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
++ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
++ * DEALINGS IN THE SOFTWARE.
++ *
++ * Authors:
++ *    Christopher James Halse Rogers <christopher.halse.rogers@canonical.com>
++ *    Alexandros Frantzis <alexandros.frantzis@canonical.com>
++ */
++
++#include <mir_toolkit/mesa/native_display.h>
++
++#include <stdlib.h>
++#include <string.h>
++#include <unistd.h>
++#include <xf86drm.h>
++
++#include "egl_dri2.h"
++#include "egl_dri2_fallbacks.h"
++#include "loader.h"
++
++static __DRIbuffer *
++dri2_get_buffers_with_format(__DRIdrawable * driDrawable,
++			     int *width, int *height,
++			     unsigned int *attachments, int count,
++			     int *out_count, void *loaderPrivate)
++{
++   struct dri2_egl_surface *dri2_surf = loaderPrivate;
++   struct dri2_egl_display *dri2_dpy =
++      dri2_egl_display(dri2_surf->base.Resource.Display);
++   int i;
++
++   dri2_surf->buffer_count = 0;
++   for (i = 0; i < 2*count; i+=2) {
++      assert(attachments[i] < __DRI_BUFFER_COUNT);
++      assert(dri2_surf->buffer_count < 5);
++
++      if (dri2_surf->dri_buffers[attachments[i]] == NULL) {
++         /* Our frame callback must keep these buffers valid */
++         assert(attachments[i] != __DRI_BUFFER_FRONT_LEFT);
++         assert(attachments[i] != __DRI_BUFFER_BACK_LEFT);
++
++         dri2_surf->dri_buffers[attachments[i]] =
++            dri2_dpy->dri2->allocateBuffer(dri2_dpy->dri_screen,
++                  attachments[i], attachments[i+1],
++                  dri2_surf->base.Width, dri2_surf->base.Height);
++
++         if (!dri2_surf->dri_buffers[attachments[i]])
++            continue;
++      }
++
++      memcpy(&dri2_surf->buffers[dri2_surf->buffer_count],
++             dri2_surf->dri_buffers[attachments[i]],
++             sizeof(__DRIbuffer));
++
++      dri2_surf->buffer_count++;
++   }
++
++   assert(dri2_surf->base.Type == EGL_PIXMAP_BIT ||
++          dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]);
++
++   *out_count = dri2_surf->buffer_count;
++   if (dri2_surf->buffer_count == 0)
++	   return NULL;
++
++   *width = dri2_surf->base.Width;
++   *height = dri2_surf->base.Height;
++
++   return dri2_surf->buffers;
++}
++
++static __DRIbuffer *
++dri2_get_buffers(__DRIdrawable * driDrawable,
++		 int *width, int *height,
++		 unsigned int *attachments, int count,
++		 int *out_count, void *loaderPrivate)
++{
++   unsigned int *attachments_with_format;
++   __DRIbuffer *buffer;
++   const unsigned int format = 32;
++   int i;
++
++   attachments_with_format = calloc(count * 2, sizeof(unsigned int));
++   if (!attachments_with_format) {
++      *out_count = 0;
++      return NULL;
++   }
++
++   for (i = 0; i < count; ++i) {
++      attachments_with_format[2*i] = attachments[i];
++      attachments_with_format[2*i + 1] = format;
++   }
++
++   buffer =
++      dri2_get_buffers_with_format(driDrawable,
++				   width, height,
++				   attachments_with_format, count,
++				   out_count, loaderPrivate);
++
++   free(attachments_with_format);
++
++   return buffer;
++}
++
++static int
++dri2_image_get_buffers(__DRIdrawable *driDrawable,
++                       unsigned int format,
++                       uint32_t *stamp,
++                       void *loaderPrivate,
++                       uint32_t buffer_mask,
++                       struct __DRIimageList *buffers)
++{
++   struct dri2_egl_surface *dri2_surf = loaderPrivate;
++
++   if (buffer_mask & __DRI_IMAGE_BUFFER_BACK) {
++      if (!dri2_surf->back)
++         return 0;
++
++      buffers->back = ((struct gbm_dri_bo *)dri2_surf->back->bo)->image;
++      buffers->image_mask = __DRI_IMAGE_BUFFER_BACK;
++
++      return 1;
++   }
++
++   return 0;
++}
++
++static void
++dri2_flush_front_buffer(__DRIdrawable * driDrawable, void *loaderPrivate)
++{
++   (void) driDrawable;
++
++   /* FIXME: Does EGL support front buffer rendering at all? */
++
++#if 0
++   struct dri2_egl_surface *dri2_surf = loaderPrivate;
++
++   dri2WaitGL(dri2_surf);
++#else
++   (void) loaderPrivate;
++#endif
++}
++
++static struct gbm_bo *create_gbm_bo_from_buffer(struct gbm_device* gbm_dev,
++                                                MirBufferPackage *package)
++{
++   struct gbm_import_fd_data data;
++
++   data.fd = package->fd[0];
++   data.width = package->width;
++   data.height = package->height;
++   data.format = GBM_FORMAT_ARGB8888; /* TODO: Use mir surface format */
++   data.stride = package->stride;
++
++   return gbm_bo_import(gbm_dev, GBM_BO_IMPORT_FD, &data, GBM_BO_USE_RENDERING);
++}
++
++static ssize_t find_cached_buffer_with_fd(struct dri2_egl_surface *dri2_surf,
++                                          int fd)
++{
++   ssize_t i;
++
++   for (i = 0; i < ARRAY_SIZE(dri2_surf->color_buffers); i++) {
++      if (dri2_surf->color_buffers[i].fd == fd)
++         return i;
++   }
++
++   return -1;
++}
++
++static void cache_buffer(struct dri2_egl_surface *dri2_surf, size_t slot,
++                         MirBufferPackage *buffer_package)
++{
++   struct dri2_egl_display *dri2_dpy =
++      dri2_egl_display(dri2_surf->base.Resource.Display);
++
++   if (dri2_surf->color_buffers[slot].bo != NULL)
++      gbm_bo_destroy(dri2_surf->color_buffers[slot].bo);
++
++   dri2_surf->color_buffers[slot].bo = create_gbm_bo_from_buffer(
++      &dri2_dpy->gbm_dri->base.base,
++      buffer_package);
++
++   dri2_surf->color_buffers[slot].fd = buffer_package->fd[0];
++}
++
++static size_t find_best_cache_slot(struct dri2_egl_surface *dri2_surf)
++{
++   size_t i;
++   size_t start_slot = 0;
++
++   /*
++    * If we have a back buffer, start searching after it to ensure
++    * we don't reuse the slot too soon.
++    */
++   if (dri2_surf->back != NULL) {
++      start_slot = dri2_surf->back - dri2_surf->color_buffers;
++      start_slot = (start_slot + 1) % ARRAY_SIZE(dri2_surf->color_buffers);
++   }
++
++   /* Try to find an empty slot */
++   for (i = 0; i < ARRAY_SIZE(dri2_surf->color_buffers); i++) {
++      size_t slot = (start_slot + i) % ARRAY_SIZE(dri2_surf->color_buffers);
++      if (dri2_surf->color_buffers[slot].bo == NULL)
++         return slot;
++   }
++
++   /* If we don't have an empty slot, use the start slot */
++   return start_slot;
++}
++
++static void update_cached_buffer_ages(struct dri2_egl_surface *dri2_surf,
++                                      size_t used_slot)
++{
++   /*
++    * If 3 (Mir surfaces are triple buffered at most) other buffers have been
++    * used since a buffer was used, we probably won't need this buffer again.
++    */
++   static const int destruction_age = 3;
++   size_t i;
++
++   for (i = 0; i < ARRAY_SIZE(dri2_surf->color_buffers); i++) {
++      if (dri2_surf->color_buffers[i].bo != NULL) {
++         if (i == used_slot) {
++            dri2_surf->color_buffers[i].age = 0;
++         }
++         else {
++            ++dri2_surf->color_buffers[i].age;
++            if (dri2_surf->color_buffers[i].age == destruction_age) {
++               gbm_bo_destroy(dri2_surf->color_buffers[i].bo);
++               dri2_surf->color_buffers[i].bo = NULL;
++               dri2_surf->color_buffers[i].fd = -1;
++            }
++         }
++      }
++   }
++}
++
++static void clear_cached_buffers(struct dri2_egl_surface *dri2_surf)
++{
++   size_t i;
++   for (i = 0; i < ARRAY_SIZE(dri2_surf->color_buffers); i++) {
++      if (dri2_surf->color_buffers[i].bo != NULL)
++         gbm_bo_destroy(dri2_surf->color_buffers[i].bo);
++      dri2_surf->color_buffers[i].bo = NULL;
++      dri2_surf->color_buffers[i].fd = -1;
++      dri2_surf->color_buffers[i].age = 0;
++   }
++}
++
++static EGLBoolean
++mir_advance_colour_buffer(struct dri2_egl_surface *dri2_surf)
++{
++   MirBufferPackage buffer_package;
++   ssize_t buf_slot = -1;
++
++   if(!dri2_surf->mir_surf->surface_advance_buffer(dri2_surf->mir_surf, &buffer_package))
++      return EGL_FALSE;
++
++   /* We expect no data items, and (for the moment) one PRIME fd */
++   assert(buffer_package.data_items == 0);
++   assert(buffer_package.fd_items == 1);
++
++   /* Mir ABIs prior to release 0.1.2 lacked width and height */
++   if (buffer_package.width && buffer_package.height) {
++      dri2_surf->base.Width = buffer_package.width;
++      dri2_surf->base.Height = buffer_package.height;
++   }
++
++   buf_slot = find_cached_buffer_with_fd(dri2_surf, buffer_package.fd[0]);
++   if (buf_slot != -1) {
++      /*
++       * If we get a new buffer with an fd of a previously cached buffer,
++       * replace the old buffer in the cache...
++       */
++      if (buffer_package.age == 0)
++         cache_buffer(dri2_surf, buf_slot, &buffer_package);
++      /* ... otherwise just reuse the existing cached buffer */
++   }
++   else {
++      /* We got a new buffer with an fd that's not in the cache, so add it */
++      buf_slot = find_best_cache_slot(dri2_surf);
++      cache_buffer(dri2_surf, buf_slot, &buffer_package);
++   }
++
++   update_cached_buffer_ages(dri2_surf, buf_slot);
++
++   dri2_surf->back = &dri2_surf->color_buffers[buf_slot];
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]->name = 0;
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]->fd = buffer_package.fd[0];
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]->pitch = buffer_package.stride;
++   return EGL_TRUE;
++}
++
++/**
++ * Called via eglCreateWindowSurface(), drv->API.CreateWindowSurface().
++ */
++static _EGLSurface *
++dri2_create_mir_window_surface(_EGLDriver *drv, _EGLDisplay *disp,
++                               _EGLConfig *conf, EGLNativeWindowType window,
++                               const EGLint *attrib_list)
++{
++   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
++   struct dri2_egl_config *dri2_conf = dri2_egl_config(conf);
++   struct dri2_egl_surface *dri2_surf;
++   MirSurfaceParameters surf_params;
++
++   (void) drv;
++
++   dri2_surf = calloc(1, sizeof *dri2_surf);
++   if (!dri2_surf) {
++      _eglError(EGL_BAD_ALLOC, "dri2_create_surface");
++      return NULL;
++   }
++
++   if (!_eglInitSurface(&dri2_surf->base, disp, EGL_WINDOW_BIT, conf, attrib_list))
++      goto cleanup_surf;
++
++   dri2_surf->mir_surf = window;
++   if (!dri2_surf->mir_surf->surface_get_parameters(dri2_surf->mir_surf, &surf_params))
++      goto cleanup_surf;
++
++   dri2_surf->base.Width = surf_params.width;
++   dri2_surf->base.Height = surf_params.height;
++
++   dri2_surf->dri_buffers[__DRI_BUFFER_FRONT_LEFT] =
++      calloc(sizeof(*dri2_surf->dri_buffers[0]), 1);
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT] =
++      calloc(sizeof(*dri2_surf->dri_buffers[0]), 1);
++
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]->attachment =
++      __DRI_BUFFER_BACK_LEFT;
++   /* We only do ARGB 8888 for the moment */
++   dri2_surf->dri_buffers[__DRI_BUFFER_BACK_LEFT]->cpp = 4;
++
++   clear_cached_buffers(dri2_surf);
++
++   if(!mir_advance_colour_buffer(dri2_surf))
++      goto cleanup_surf;
++
++   if (dri2_dpy->gbm_dri) {
++      struct gbm_dri_surface *surf = malloc(sizeof *surf);
++
++      dri2_surf->gbm_surf = surf;
++      surf->base.gbm = &dri2_dpy->gbm_dri->base.base;
++      surf->base.width = dri2_surf->base.Width;
++      surf->base.height = dri2_surf->base.Height;
++      surf->base.format = GBM_FORMAT_ARGB8888;
++      surf->base.flags = GBM_BO_USE_SCANOUT | GBM_BO_USE_RENDERING;
++      surf->dri_private = dri2_surf;
++
++      dri2_surf->dri_drawable =
++          (*dri2_dpy->dri2->createNewDrawable) (dri2_dpy->dri_screen,
++                                                dri2_conf->dri_double_config,
++                                                dri2_surf->gbm_surf);
++   }
++   else {
++      dri2_surf->dri_drawable =
++          (*dri2_dpy->dri2->createNewDrawable) (dri2_dpy->dri_screen,
++                                                dri2_conf->dri_double_config,
++                                                dri2_surf);
++   }
++
++   if (dri2_surf->dri_drawable == NULL) {
++      _eglError(EGL_BAD_ALLOC, "dri2->createNewDrawable");
++   }
++
++   return &dri2_surf->base;
++
++cleanup_surf:
++   free(dri2_surf);
++   return NULL;
++}
++
++static _EGLSurface *
++dri2_mir_create_pixmap_surface(_EGLDriver *drv, _EGLDisplay *disp,
++                              _EGLConfig *conf, void *native_window,
++                              const EGLint *attrib_list)
++{
++   _eglError(EGL_BAD_PARAMETER, "cannot create EGL pixmap surfaces on mir");
++   return NULL;
++}
++
++
++static EGLBoolean
++dri2_destroy_mir_surface(_EGLDriver *drv, _EGLDisplay *disp, _EGLSurface *surf)
++{
++   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
++   struct dri2_egl_surface *dri2_surf = dri2_egl_surface(surf);
++   int i;
++
++   (void) drv;
++
++   if (!_eglPutSurface(surf))
++      return EGL_TRUE;
++
++   clear_cached_buffers(dri2_surf);
++
++   (*dri2_dpy->core->destroyDrawable)(dri2_surf->dri_drawable);
++
++   for (i = 0; i < __DRI_BUFFER_COUNT; ++i) {
++      if (dri2_surf->dri_buffers[i]) {
++         if ((i == __DRI_BUFFER_FRONT_LEFT) ||
++             (i == __DRI_BUFFER_BACK_LEFT)) {
++            free(dri2_surf->dri_buffers[i]);
++         }
++         else {
++            dri2_dpy->dri2->releaseBuffer(dri2_dpy->dri_screen,
++                                          dri2_surf->dri_buffers[i]);
++         }
++      }
++   }
++
++   free(dri2_surf->gbm_surf);
++   free(surf);
++
++   return EGL_TRUE;
++}
++
++/**
++ * Called via eglSwapInterval(), drv->API.SwapInterval().
++ */
++static EGLBoolean
++dri2_set_swap_interval(_EGLDriver *drv, _EGLDisplay *disp,
++                       _EGLSurface *surf, EGLint interval)
++{
++   struct dri2_egl_surface *dri2_surf = dri2_egl_surface(surf);
++   if(!dri2_surf->mir_surf->surface_set_swapinterval(dri2_surf->mir_surf, interval))
++      return EGL_FALSE;
++   return EGL_TRUE;
++}
++
++/**
++ * Called via eglSwapBuffers(), drv->API.SwapBuffers().
++ */
++static EGLBoolean
++dri2_swap_buffers(_EGLDriver *drv, _EGLDisplay *disp, _EGLSurface *draw)
++{
++   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
++   struct dri2_egl_surface *dri2_surf = dri2_egl_surface(draw);
++
++   (*dri2_dpy->flush->flush)(dri2_surf->dri_drawable);
++
++   int rc = mir_advance_colour_buffer(dri2_surf);
++
++   (*dri2_dpy->flush->invalidate)(dri2_surf->dri_drawable);
++
++   return rc;
++}
++
++static int
++dri2_mir_authenticate(_EGLDisplay *disp, uint32_t id)
++{
++   return 0;
++}
++
++static _EGLImage *
++dri2_create_image_khr_pixmap(_EGLDisplay *disp, _EGLContext *ctx,
++                             EGLClientBuffer buffer, const EGLint *attr_list)
++{
++   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
++   struct gbm_dri_bo *dri_bo = gbm_dri_bo((struct gbm_bo *) buffer);
++   struct dri2_egl_image *dri2_img;
++
++   dri2_img = malloc(sizeof *dri2_img);
++   if (!dri2_img) {
++      _eglError(EGL_BAD_ALLOC, "dri2_create_image_khr_pixmap");
++      return NULL;
++   }
++
++   if (!_eglInitImage(&dri2_img->base, disp)) {
++      free(dri2_img);
++      return NULL;
++   }
++
++
++   dri2_img->dri_image = dri2_dpy->image->dupImage(dri_bo->image, dri2_img);
++   if (dri2_img->dri_image == NULL) {
++      free(dri2_img);
++      _eglError(EGL_BAD_ALLOC, "dri2_create_image_khr_pixmap");
++      return NULL;
++   }
++
++   return &dri2_img->base;
++}
++
++static _EGLImage *
++dri2_mir_create_image_khr(_EGLDriver *drv, _EGLDisplay *disp,
++                          _EGLContext *ctx, EGLenum target,
++                          EGLClientBuffer buffer, const EGLint *attr_list)
++{
++   (void) drv;
++
++   switch (target) {
++   case EGL_NATIVE_PIXMAP_KHR:
++      return dri2_create_image_khr_pixmap(disp, ctx, buffer, attr_list);
++   default:
++      return dri2_create_image_khr(drv, disp, ctx, target, buffer, attr_list);
++   }
++}
++
++static struct dri2_egl_display_vtbl dri2_mir_display_vtbl = {
++   .authenticate = dri2_mir_authenticate,
++   .create_window_surface = dri2_create_mir_window_surface,
++   .create_pixmap_surface = dri2_mir_create_pixmap_surface,
++   .create_pbuffer_surface = dri2_fallback_create_pbuffer_surface,
++   .destroy_surface = dri2_destroy_mir_surface,
++   .create_image = dri2_mir_create_image_khr,
++   .swap_interval = dri2_set_swap_interval,
++   .swap_buffers = dri2_swap_buffers,
++   .swap_buffers_with_damage = dri2_fallback_swap_buffers_with_damage,
++   .swap_buffers_region = dri2_fallback_swap_buffers_region,
++   .post_sub_buffer = dri2_fallback_post_sub_buffer,
++   .copy_buffers = dri2_fallback_copy_buffers,
++   .query_buffer_age = dri2_fallback_query_buffer_age,
++   .create_wayland_buffer_from_image = NULL,
++};
++
++EGLBoolean
++dri2_initialize_mir(_EGLDriver *drv, _EGLDisplay *disp)
++{
++   struct dri2_egl_display *dri2_dpy;
++   struct gbm_device *gbm = NULL;
++   MirPlatformPackage platform;
++   const __DRIconfig *config;
++   static const unsigned int argb_masks[4] =
++      { 0xff0000, 0xff00, 0xff, 0xff000000 };
++   uint32_t types;
++   int i;
++
++   loader_set_logger(_eglLog);
++
++   dri2_dpy = calloc(1, sizeof *dri2_dpy);
++   if (!dri2_dpy)
++      return _eglError(EGL_BAD_ALLOC, "eglInitialize");
++
++   disp->DriverData = (void *) dri2_dpy;
++   dri2_dpy->mir_disp = disp->PlatformDisplay;
++   dri2_dpy->mir_disp->display_get_platform(dri2_dpy->mir_disp, &platform);
++   dri2_dpy->fd = platform.fd[0];
++   dri2_dpy->device_name = loader_get_device_name_for_fd(dri2_dpy->fd);
++
++   /*
++    * At the moment, a pointer to gbm_device is the first and only
++    * information optionally contained in platform.data[].
++    */
++   if (platform.data_items == 0) {
++      dri2_dpy->own_device = 1;
++      dri2_dpy->fd = dup(dri2_dpy->fd);
++      gbm = gbm_create_device(dri2_dpy->fd);
++      if (gbm == NULL)
++         goto cleanup_dpy;
++   }
++   else {
++      gbm = *(struct gbm_device**)platform.data;
++   }
++
++   if (gbm) {
++      struct gbm_dri_device *gbm_dri = gbm_dri_device(gbm);
++
++      dri2_dpy->gbm_dri = gbm_dri;
++      dri2_dpy->driver_name = strdup(gbm_dri->base.driver_name);
++      dri2_dpy->dri_screen = gbm_dri->screen;
++      dri2_dpy->core = gbm_dri->core;
++      dri2_dpy->dri2 = gbm_dri->dri2;
++      dri2_dpy->image = gbm_dri->image;
++      dri2_dpy->flush = gbm_dri->flush;
++      dri2_dpy->driver_configs = gbm_dri->driver_configs;
++
++      gbm_dri->lookup_image = dri2_lookup_egl_image;
++      gbm_dri->lookup_user_data = disp;
++
++      gbm_dri->get_buffers = dri2_get_buffers;
++      gbm_dri->flush_front_buffer = dri2_flush_front_buffer;
++      gbm_dri->get_buffers_with_format = dri2_get_buffers_with_format;
++      gbm_dri->image_get_buffers = dri2_image_get_buffers;
++
++      dri2_setup_screen(disp);
++   }
++
++   types = EGL_WINDOW_BIT;
++   for (i = 0; dri2_dpy->driver_configs[i]; i++) {
++      config = dri2_dpy->driver_configs[i];
++      dri2_add_config(disp, config, i + 1, types, NULL, argb_masks);
++   }
++
++   disp->Extensions.EXT_buffer_age = EGL_TRUE;
++   disp->Extensions.EXT_swap_buffers_with_damage = EGL_TRUE;
++   disp->Extensions.KHR_image_pixmap = EGL_TRUE;
++
++   disp->VersionMajor = 1;
++   disp->VersionMinor = 4;
++   dri2_dpy->vtbl = &dri2_mir_display_vtbl;
++
++   return EGL_TRUE;
++
++ cleanup_dpy:
++   free(dri2_dpy);
++
++   return EGL_FALSE;
++}
+--- a/src/egl/main/Makefile.am
++++ b/src/egl/main/Makefile.am
+@@ -72,6 +72,11 @@ if HAVE_EGL_PLATFORM_NULL
+ AM_CFLAGS += -DHAVE_NULL_PLATFORM
+ endif
+ 
++if HAVE_EGL_PLATFORM_MIR
++AM_CFLAGS += -DHAVE_MIR_PLATFORM
++AM_CFLAGS += $(MIR_CFLAGS)
++endif
++
+ if HAVE_EGL_DRIVER_DRI2
+ AM_CFLAGS += -D_EGL_BUILT_IN_DRIVER_DRI2
+ AM_CFLAGS += -DHAVE_XCB_DRI2
+--- a/src/egl/main/egldisplay.c
++++ b/src/egl/main/egldisplay.c
+@@ -60,7 +60,10 @@
+ #include <sys/types.h>
+ #include <sys/stat.h>
+ #endif
+-
++#ifdef HAVE_MIR_PLATFORM
++#include <dlfcn.h>
++#include <mir_toolkit/mesa/native_display.h>
++#endif
+ 
+ /**
+  * Map --with-egl-platforms names to platform types.
+@@ -76,7 +79,8 @@ static const struct {
+    { _EGL_PLATFORM_FBDEV, "fbdev" },
+    { _EGL_PLATFORM_NULL, "null" },
+    { _EGL_PLATFORM_ANDROID, "android" },
+-   { _EGL_PLATFORM_HAIKU, "haiku" }
++   { _EGL_PLATFORM_HAIKU, "haiku" },
++   { _EGL_PLATFORM_MIR, "mir" }
+ };
+ 
+ 
+@@ -136,6 +140,47 @@ _eglPointerIsDereferencable(void *p)
+ #endif
+ }
+ 
++#ifdef HAVE_MIR_PLATFORM
++static EGLBoolean
++_mir_display_is_valid(EGLNativeDisplayType nativeDisplay)
++{
++   typedef int (*MirEGLNativeDisplayIsValidFunc)(MirMesaEGLNativeDisplay*);
++
++   void *lib;
++   MirEGLNativeDisplayIsValidFunc general_check;
++   MirEGLNativeDisplayIsValidFunc client_check;
++   MirEGLNativeDisplayIsValidFunc server_check;
++   EGLBoolean is_valid = EGL_FALSE;
++
++   lib = dlopen(NULL, RTLD_LAZY);
++   if (lib == NULL)
++      return EGL_FALSE;
++
++   general_check = (MirEGLNativeDisplayIsValidFunc) dlsym(lib, "mir_egl_mesa_display_is_valid");
++   client_check = (MirEGLNativeDisplayIsValidFunc) dlsym(lib, "mir_client_mesa_egl_native_display_is_valid");
++   server_check = (MirEGLNativeDisplayIsValidFunc) dlsym(lib, "mir_server_mesa_egl_native_display_is_valid");
++
++   if (general_check != NULL &&
++       general_check((MirMesaEGLNativeDisplay *)nativeDisplay))
++   {
++      is_valid = EGL_TRUE;
++   }
++   else if (client_check != NULL &&
++            client_check((MirMesaEGLNativeDisplay *)nativeDisplay))
++   {
++      is_valid = EGL_TRUE;
++   }
++   else if (server_check != NULL &&
++            server_check((MirMesaEGLNativeDisplay *)nativeDisplay))
++   {
++      is_valid = EGL_TRUE;
++   }
++
++   dlclose(lib);
++
++   return is_valid;
++}
++#endif
+ 
+ /**
+  * Try detecting native platform with the help of native display characteristcs.
+@@ -156,6 +201,11 @@ _eglNativePlatformDetectNativeDisplay(vo
+       return _EGL_PLATFORM_FBDEV;
+ #endif
+ 
++#ifdef HAVE_MIR_PLATFORM
++   if (_mir_display_is_valid(nativeDisplay))
++      return _EGL_PLATFORM_MIR;
++#endif
++
+    if (_eglPointerIsDereferencable(nativeDisplay)) {
+       void *first_pointer = *(void **) nativeDisplay;
+ 
+@@ -194,7 +244,7 @@ _eglNativePlatformDetectNativeDisplay(vo
+ _EGLPlatformType
+ _eglGetNativePlatform(void *nativeDisplay)
+ {
+-   static _EGLPlatformType native_platform = _EGL_INVALID_PLATFORM;
++   _EGLPlatformType native_platform = _EGL_INVALID_PLATFORM;
+    char *detection_method = NULL;
+ 
+    if (native_platform == _EGL_INVALID_PLATFORM) {
+--- a/src/egl/main/egldisplay.h
++++ b/src/egl/main/egldisplay.h
+@@ -47,6 +47,7 @@ enum _egl_platform_type {
+    _EGL_PLATFORM_NULL,
+    _EGL_PLATFORM_ANDROID,
+    _EGL_PLATFORM_HAIKU,
++   _EGL_PLATFORM_MIR,
+ 
+    _EGL_NUM_PLATFORMS,
+    _EGL_INVALID_PLATFORM = -1
+--- a/src/egl/main/egldriver.c
++++ b/src/egl/main/egldriver.c
+@@ -60,7 +60,7 @@ typedef struct _egl_module {
+    char *Path;
+    _EGLMain_t BuiltIn;
+    void *Handle;
+-   _EGLDriver *Driver;
++   _EGLDriver *Driver[_EGL_NUM_PLATFORMS];
+ } _EGLModule;
+ 
+ static _EGLMutex _eglModuleMutex = _EGL_MUTEX_INITIALIZER;
+@@ -137,7 +137,6 @@ library_suffix(void)
+ 
+ #endif
+ 
+-
+ /**
+  * Open the named driver and find its bootstrap function: _eglMain().
+  */
+@@ -150,8 +149,12 @@ _eglOpenLibrary(const char *driverPath,
+ 
+    assert(driverPath);
+ 
+-   _eglLog(_EGL_DEBUG, "dlopen(%s)", driverPath);
+-   lib = open_library(driverPath);
++   if (*handle) {
++      lib = *handle;
++   } else {
++      _eglLog(_EGL_DEBUG, "dlopen(%s)", driverPath);
++      lib = open_library(driverPath);
++   }
+ 
+ #if defined(_EGL_OS_WINDOWS)
+    /* XXX untested */
+@@ -197,13 +200,13 @@ _eglOpenLibrary(const char *driverPath,
+  * Load a module and create the driver object.
+  */
+ static EGLBoolean
+-_eglLoadModule(_EGLModule *mod)
++_eglLoadModule(_EGLModule *mod, _EGLPlatformType plat)
+ {
+    _EGLMain_t mainFunc;
+-   lib_handle lib;
++   lib_handle lib = (lib_handle) mod->Handle;
+    _EGLDriver *drv;
+ 
+-   if (mod->Driver)
++   if (mod->Driver[plat])
+       return EGL_TRUE;
+ 
+    if (mod->BuiltIn) {
+@@ -229,7 +232,7 @@ _eglLoadModule(_EGLModule *mod)
+    }
+ 
+    mod->Handle = (void *) lib;
+-   mod->Driver = drv;
++   mod->Driver[plat] = drv;
+ 
+    return EGL_TRUE;
+ }
+@@ -243,8 +246,10 @@ _eglUnloadModule(_EGLModule *mod)
+ {
+ #if defined(_EGL_OS_UNIX)
+    /* destroy the driver */
+-   if (mod->Driver && mod->Driver->Unload)
+-      mod->Driver->Unload(mod->Driver);
++   for (int plat = 0; plat < _EGL_NUM_PLATFORMS; ++plat) {
++      if (mod->Driver[plat] && mod->Driver[plat]->Unload)
++         mod->Driver[plat]->Unload(mod->Driver[plat]);
++   }
+ 
+    /*
+     * XXX At this point (atexit), the module might be the last reference to
+@@ -258,7 +263,9 @@ _eglUnloadModule(_EGLModule *mod)
+    /* XXX Windows unloads DLLs before atexit */
+ #endif
+ 
+-   mod->Driver = NULL;
++   for (int plat = 0; plat < _EGL_NUM_PLATFORMS; ++plat) {
++      mod->Driver[plat] = NULL;
++   }
+    mod->Handle = NULL;
+ }
+ 
+@@ -588,17 +595,17 @@ _eglMatchAndInitialize(_EGLDisplay *dpy)
+    while (i < _eglModules->Size) {
+       _EGLModule *mod = (_EGLModule *) _eglModules->Elements[i];
+ 
+-      if (!_eglLoadModule(mod)) {
++      if (!_eglLoadModule(mod, dpy->Platform)) {
+          /* remove invalid modules */
+          _eglEraseArray(_eglModules, i, _eglFreeModule);
+          continue;
+       }
+ 
+-      if (mod->Driver->API.Initialize(mod->Driver, dpy)) {
+-         drv = mod->Driver;
++      drv = mod->Driver[dpy->Platform];
++      if (drv->API.Initialize(drv, dpy))
+          break;
+-      }
+       else {
++         drv = NULL;
+          i++;
+       }
+    }
+@@ -650,7 +657,6 @@ __eglMustCastToProperFunctionPointerType
+ _eglGetDriverProc(const char *procname)
+ {
+    EGLint i;
+-   _EGLProc proc = NULL;
+ 
+    if (!_eglModules) {
+       /* load the driver for the default display */
+@@ -662,15 +668,18 @@ _eglGetDriverProc(const char *procname)
+ 
+    for (i = 0; i < _eglModules->Size; i++) {
+       _EGLModule *mod = (_EGLModule *) _eglModules->Elements[i];
++      _EGLProc proc;
+ 
+-      if (!mod->Driver)
+-         break;
+-      proc = mod->Driver->API.GetProcAddress(mod->Driver, procname);
+-      if (proc)
+-         break;
++      for (_EGLPlatformType plat = 0; plat < _EGL_NUM_PLATFORMS; ++plat) {
++         if (!mod->Driver[plat])
++            continue;
++         proc = mod->Driver[plat]->API.GetProcAddress(mod->Driver[plat], procname);
++         if (proc)
++            return proc;
++      }
+    }
+ 
+-   return proc;
++   return NULL;
+ }
+ 
+ 
+--- a/src/gallium/state_trackers/dri/dri2.c
++++ b/src/gallium/state_trackers/dri/dri2.c
+@@ -506,12 +506,20 @@ dri2_allocate_textures(struct dri_contex
+          templ.height0 = dri_drawable->h;
+          templ.format = format;
+          templ.bind = bind;
+-         whandle.handle = buf->name;
+          whandle.stride = buf->pitch;
+-         if (screen->can_share_buffer)
+-            whandle.type = DRM_API_HANDLE_TYPE_SHARED;
+-         else
++         if (screen->can_share_buffer) {
++            if (buf->name != 0) {
++               whandle.type = DRM_API_HANDLE_TYPE_SHARED;
++               whandle.handle = buf->name;
++            } else {
++               whandle.type = DRM_API_HANDLE_TYPE_FD;
++               whandle.handle = buf->fd;
++            }
++         } else {
+             whandle.type = DRM_API_HANDLE_TYPE_KMS;
++            whandle.handle = buf->name;
++         }
++
+          drawable->textures[statt] =
+             screen->base.screen->resource_from_handle(screen->base.screen,
+                   &templ, &whandle);
+--- a/src/gbm/backends/dri/gbm_dri.c
++++ b/src/gbm/backends/dri/gbm_dri.c
+@@ -202,7 +202,7 @@ static const __DRIimageLookupExtension i
+ };
+ 
+ static const __DRIdri2LoaderExtension dri2_loader_extension = {
+-   .base = { __DRI_DRI2_LOADER, 3 },
++   .base = { __DRI_DRI2_LOADER, 4 },
+ 
+    .getBuffers              = dri_get_buffers,
+    .flushFrontBuffer        = dri_flush_front_buffer,
+@@ -528,9 +528,11 @@ gbm_dri_is_format_supported(struct gbm_d
+    switch (format) {
+    case GBM_BO_FORMAT_XRGB8888:
+    case GBM_FORMAT_XRGB8888:
++   case GBM_FORMAT_XBGR8888:
+       break;
+    case GBM_BO_FORMAT_ARGB8888:
+    case GBM_FORMAT_ARGB8888:
++   case GBM_FORMAT_ABGR8888:
+       if (usage & GBM_BO_USE_SCANOUT)
+          return 0;
+       break;
+@@ -612,6 +614,9 @@ gbm_dri_to_gbm_format(uint32_t dri_forma
+    case __DRI_IMAGE_FORMAT_ABGR8888:
+       ret = GBM_FORMAT_ABGR8888;
+       break;
++   case __DRI_IMAGE_FORMAT_XBGR8888:
++      ret = GBM_FORMAT_XBGR8888;
++      break;
+    default:
+       ret = 0;
+       break;
+@@ -620,6 +625,41 @@ gbm_dri_to_gbm_format(uint32_t dri_forma
+    return ret;
+ }
+ 
++static uint32_t
++gbm_to_dri_format(uint32_t gbm_format)
++{
++   uint32_t dri_format = 0;
++
++   switch (gbm_format) {
++   case GBM_FORMAT_RGB565:
++      dri_format =__DRI_IMAGE_FORMAT_RGB565;
++      break;
++   case GBM_FORMAT_XRGB8888:
++   case GBM_BO_FORMAT_XRGB8888:
++      dri_format = __DRI_IMAGE_FORMAT_XRGB8888;
++      break;
++   case GBM_FORMAT_ARGB8888:
++   case GBM_BO_FORMAT_ARGB8888:
++      dri_format = __DRI_IMAGE_FORMAT_ARGB8888;
++      break;
++   case GBM_FORMAT_ABGR8888:
++      dri_format = __DRI_IMAGE_FORMAT_ABGR8888;
++      break;
++   case GBM_FORMAT_ARGB2101010:
++      dri_format = __DRI_IMAGE_FORMAT_ARGB2101010;
++      break;
++   case GBM_FORMAT_XRGB2101010:
++      dri_format = __DRI_IMAGE_FORMAT_XRGB2101010;
++   case GBM_FORMAT_XBGR8888:
++      dri_format = __DRI_IMAGE_FORMAT_XBGR8888;
++      break;
++   default:
++      dri_format = __DRI_IMAGE_FORMAT_NONE;
++   }
++
++   return dri_format;
++}
++
+ static struct gbm_bo *
+ gbm_dri_bo_import(struct gbm_device *gbm,
+                   uint32_t type, void *buffer, uint32_t usage)
+@@ -828,31 +868,7 @@ gbm_dri_bo_create(struct gbm_device *gbm
+    bo->base.base.height = height;
+    bo->base.base.format = format;
+ 
+-   switch (format) {
+-   case GBM_FORMAT_RGB565:
+-      dri_format =__DRI_IMAGE_FORMAT_RGB565;
+-      break;
+-   case GBM_FORMAT_XRGB8888:
+-   case GBM_BO_FORMAT_XRGB8888:
+-      dri_format = __DRI_IMAGE_FORMAT_XRGB8888;
+-      break;
+-   case GBM_FORMAT_ARGB8888:
+-   case GBM_BO_FORMAT_ARGB8888:
+-      dri_format = __DRI_IMAGE_FORMAT_ARGB8888;
+-      break;
+-   case GBM_FORMAT_ABGR8888:
+-      dri_format = __DRI_IMAGE_FORMAT_ABGR8888;
+-      break;
+-   case GBM_FORMAT_ARGB2101010:
+-      dri_format = __DRI_IMAGE_FORMAT_ARGB2101010;
+-      break;
+-   case GBM_FORMAT_XRGB2101010:
+-      dri_format = __DRI_IMAGE_FORMAT_XRGB2101010;
+-      break;
+-   default:
+-      errno = EINVAL;
+-      goto failed;
+-   }
++   dri_format = gbm_to_dri_format(format);
+ 
+    if (usage & GBM_BO_USE_SCANOUT)
+       dri_use |= __DRI_IMAGE_USE_SCANOUT;
--- mesa-10.5.2.orig/debian/patches/i915-dont-default-to-2.1.patch
+++ mesa-10.5.2/debian/patches/i915-dont-default-to-2.1.patch
@@ -0,0 +1,78 @@
+This is a revert of http://cgit.freedesktop.org/mesa/mesa/commit/?id=97217a40f97cdeae0304798b607f704deb0c3558
+
+i915: Always enable GL 2.0 support.
+There's no point in shipping a non-GL2 driver today.
+
+From upstream mesa.
+
+--- a/src/mesa/drivers/dri/i915/intel_extensions.c
++++ b/src/mesa/drivers/dri/i915/intel_extensions.c
+@@ -95,8 +95,12 @@
+       ctx->Extensions.ATI_separate_stencil = true;
+       ctx->Extensions.ATI_texture_env_combine3 = true;
+       ctx->Extensions.NV_texture_env_combine4 = true;
+-      ctx->Extensions.ARB_fragment_shader = true;
+-      ctx->Extensions.ARB_occlusion_query = true;
++
++      if (driQueryOptionb(&intel->optionCache, "fragment_shader"))
++	 ctx->Extensions.ARB_fragment_shader = true;
++
++      if (driQueryOptionb(&intel->optionCache, "stub_occlusion_query"))
++	 ctx->Extensions.ARB_occlusion_query = true;
+    }
+ 
+    if (intel->ctx.Mesa_DXTn
+--- a/src/mesa/drivers/dri/i915/intel_screen.c
++++ b/src/mesa/drivers/dri/i915/intel_screen.c
+@@ -62,6 +62,10 @@
+ 	 DRI_CONF_DESC(en, "Enable early Z in classic mode (unstable, 945-only).")
+       DRI_CONF_OPT_END
+ 
++      DRI_CONF_OPT_BEGIN_B(fragment_shader, "true")
++	 DRI_CONF_DESC(en, "Enable limited ARB_fragment_shader support on 915/945.")
++      DRI_CONF_OPT_END
++
+    DRI_CONF_SECTION_END
+    DRI_CONF_SECTION_QUALITY
+       DRI_CONF_FORCE_S3TC_ENABLE("false")
+@@ -75,6 +79,10 @@
+       DRI_CONF_DISABLE_GLSL_LINE_CONTINUATIONS("false")
+       DRI_CONF_DISABLE_BLEND_FUNC_EXTENDED("false")
+ 
++      DRI_CONF_OPT_BEGIN_B(stub_occlusion_query, "false")
++	 DRI_CONF_DESC(en, "Enable stub ARB_occlusion_query support on 915/945.")
++      DRI_CONF_OPT_END
++
+       DRI_CONF_OPT_BEGIN_B(shader_precompile, "true")
+ 	 DRI_CONF_DESC(en, "Perform code generation at shader link time.")
+       DRI_CONF_OPT_END
+@@ -1121,12 +1129,26 @@
+    __DRIscreen *psp = screen->driScrnPriv;
+ 
+    switch (screen->gen) {
+-   case 3:
++   case 3: {
++      bool has_fragment_shader = driQueryOptionb(&screen->optionCache, "fragment_shader");
++      bool has_occlusion_query = driQueryOptionb(&screen->optionCache, "stub_occlusion_query");
++
+       psp->max_gl_core_version = 0;
+       psp->max_gl_es1_version = 11;
+-      psp->max_gl_compat_version = 21;
+-      psp->max_gl_es2_version = 20;
++
++      if (has_fragment_shader && has_occlusion_query) {
++         psp->max_gl_compat_version = 21;
++      } else {
++         psp->max_gl_compat_version = 14;
++      }
++
++      if (has_fragment_shader) {
++         psp->max_gl_es2_version = 20;
++      } else {
++         psp->max_gl_es2_version = 0;
++      }
+       break;
++   }
+    case 2:
+       psp->max_gl_core_version = 0;
+       psp->max_gl_compat_version = 13;
--- mesa-10.5.2.orig/debian/patches/series
+++ mesa-10.5.2/debian/patches/series
@@ -0,0 +1,7 @@
+07_gallium-fix-build-failure-on-powerpcspe.diff
+
+# Ubuntu patches.
+egl-platform-mir.patch
+i915-dont-default-to-2.1.patch
+skl-use-1-register-for-uniform-pull.diff
+skl-use-vec4-datatypes-for-message-header.diff
--- mesa-10.5.2.orig/debian/patches/skl-use-1-register-for-uniform-pull.diff
+++ mesa-10.5.2/debian/patches/skl-use-1-register-for-uniform-pull.diff
@@ -0,0 +1,35 @@
+From 5255e1a9e6599942b10724fe5e573979f123b7e0 Mon Sep 17 00:00:00 2001
+From: Ben Widawsky <benjamin.widawsky@intel.com>
+Date: Thu, 19 Feb 2015 15:49:34 -0800
+Subject: [PATCH] i965/skl: Use 1 register for uniform pull constant payload
+
+When under dispatch_width=16 the previous code would allocate 2 registers for
+the payload when only one is needed. This manifested itself through bugs on SKL
+which needs to mess with this instruction.
+
+Ken says this might have some positive impact on shader-db.
+
+Cc: Kenneth Graunke <kenneth@whitecape.org>
+Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=89118
+Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=88999
+Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
+---
+ src/mesa/drivers/dri/i965/brw_fs.cpp | 2 +-
+ 1 file changed, 1 insertion(+), 1 deletion(-)
+
+diff --git a/src/mesa/drivers/dri/i965/brw_fs.cpp b/src/mesa/drivers/dri/i965/brw_fs.cpp
+index a562b8a..bb647bd 100644
+--- a/src/mesa/drivers/dri/i965/brw_fs.cpp
++++ b/src/mesa/drivers/dri/i965/brw_fs.cpp
+@@ -3062,7 +3062,7 @@ fs_visitor::lower_uniform_pull_constant_loads()
+          assert(const_offset_reg.file == IMM &&
+                 const_offset_reg.type == BRW_REGISTER_TYPE_UD);
+          const_offset_reg.fixed_hw_reg.dw1.ud /= 4;
+-         fs_reg payload = vgrf(glsl_type::uint_type);
++         fs_reg payload = fs_reg(GRF, virtual_grf_alloc(1));
+ 
+          /* We have to use a message header on Skylake to get SIMD4x2 mode.
+           * Reserve space for the register.
+-- 
+2.3.0
+
--- mesa-10.5.2.orig/debian/patches/skl-use-vec4-datatypes-for-message-header.diff
+++ mesa-10.5.2/debian/patches/skl-use-vec4-datatypes-for-message-header.diff
@@ -0,0 +1,47 @@
+commit e93566a15c61c33faa2e694aa18d18e544e857ff
+Author: Ben Widawsky <benjamin.widawsky@intel.com>
+Date:   Tue Feb 10 17:22:45 2015 -0800
+
+    i965/vs/skl: Use vec4 datatypes for message header
+    
+    We're using a SIMD4x2 sampler message, which has execsize 4, and so the
+    register width must be <= 4.  Use <4,4,1> regioning instead of <8,8,1>
+    regioning to access the same data but avoid tripping the assert.
+    
+    Fixes the following piglit tests:
+    spec/glsl-1.20/compiler/structure-and-array-operations/array-selection.vert
+    spec/glsl-es-3.00/compiler/uniform_block/interface-name-basic.vert
+    spec/glsl-es-3.00/compiler/uniform_block/interface-name-field-clashes-with-struct.vert
+    spec/glsl-es-3.00/compiler/uniform_block/interface-name-field-clashes-with-function.vert
+    spec/glsl-es-3.00/compiler/uniform_block/interface-name-array.vert
+    glslparsertest/glsl2/condition-07.vert
+    spec/glsl-es-3.00/compiler/uniform_block/interface-name-field-clashes-with-variable.vert
+    
+    v2: Better commit message courtesy of Ken.
+    I had a discussion with Ken, and we both question how we end up with a mov and
+    execsize 4. For now though, this fixes the piglit tests, so we can worry about
+    it later.
+    
+    Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
+    Reviewed-by: Kenneth Graunke <kenneth@whitecape.org>
+
+diff --git a/src/mesa/drivers/dri/i965/brw_fs_generator.cpp b/src/mesa/drivers/dri/i965/brw_fs_generator.cpp
+index 8cd36f8..f7b8771 100644
+--- a/src/mesa/drivers/dri/i965/brw_fs_generator.cpp
++++ b/src/mesa/drivers/dri/i965/brw_fs_generator.cpp
+@@ -1024,13 +1024,13 @@ fs_generator::generate_uniform_pull_constant_load_gen7(fs_inst *inst,
+ 
+    if (brw->gen >= 9) {
+       /* Skylake requires a message header in order to use SIMD4x2 mode. */
+-      src = retype(brw_vec8_grf(offset.nr - 1, 0), BRW_REGISTER_TYPE_UD);
++      src = retype(brw_vec4_grf(offset.nr - 1, 0), BRW_REGISTER_TYPE_UD);
+       mlen = 2;
+       header_present = true;
+ 
+       brw_push_insn_state(p);
+       brw_set_default_mask_control(p, BRW_MASK_DISABLE);
+-      brw_MOV(p, src, retype(brw_vec8_grf(0, 0), BRW_REGISTER_TYPE_UD));
++      brw_MOV(p, src, retype(brw_vec4_grf(0, 0), BRW_REGISTER_TYPE_UD));
+       brw_set_default_access_mode(p, BRW_ALIGN_1);
+ 
+       brw_MOV(p, get_element_ud(src, 2),
--- mesa-10.5.2.orig/debian/rules
+++ mesa-10.5.2/debian/rules
@@ -0,0 +1,305 @@
+#!/usr/bin/make -f
+# debian/rules for the Debian mesa package
+# Copyright © 2006 Thierry Reding <thierry@gilfi.de>
+
+# Uncomment this to turn on verbose mode.
+#export DH_VERBOSE=1
+
+ifneq (,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
+	NUMJOBS = $(patsubst parallel=%,%,$(filter parallel=%,$(DEB_BUILD_OPTIONS)))
+	MAKEFLAGS += -j$(NUMJOBS)
+endif
+
+DEB_HOST_MULTIARCH ?= $(shell dpkg-architecture -qDEB_HOST_MULTIARCH)
+DEB_HOST_ARCH      ?= $(shell dpkg-architecture -qDEB_HOST_ARCH)
+DEB_HOST_ARCH_OS   ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_OS)
+DEB_HOST_GNU_TYPE  ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)
+DEB_BUILD_GNU_TYPE ?= $(shell dpkg-architecture -qDEB_BUILD_GNU_TYPE)
+DEB_HOST_ARCH_CPU  ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_CPU)
+DEB_BUILD_DIR      ?= $(CURDIR)/build
+ifeq ($(DEB_BUILD_GNU_TYPE), $(DEB_HOST_GNU_TYPE))
+	confflags += --build=$(DEB_HOST_GNU_TYPE)
+else
+	confflags += --build=$(DEB_BUILD_GNU_TYPE) --host=$(DEB_HOST_GNU_TYPE)
+endif
+
+ifeq (,$(filter $(DEB_HOST_ARCH), armhf))
+buildflags = \
+	$(shell DEB_CFLAGS_MAINT_APPEND=-Wall DEB_CXXFLAGS_MAINT_APPEND=-Wall dpkg-buildflags --export=configure)
+else
+# Workaround for a variant of LP: #725126
+buildflags = \
+	$(shell DEB_CFLAGS_MAINT_APPEND="-Wall -fno-optimize-sibling-calls" DEB_CXXFLAGS_MAINT_APPEND="-Wall -fno-optimize-sibling-calls" dpkg-buildflags --export=configure)
+endif
+
+buildflags-i686 = \
+	$(shell DEB_CFLAGS_MAINT_APPEND="-Wall -march=i686" DEB_CXXFLAGS_MAINT_APPEND="-Wall -march=i686" dpkg-buildflags --export=configure)
+
+# keep a list of files we don't install (yet), but since it's a bit
+# large, use an external file:
+include debian/not-installed
+
+# build the following configurations by default
+CONFIGS = dri
+
+STAMP_DIR = debian/stamp
+STAMP = $(STAMP_DIR)/$(DEB_BUILD_GNU_TYPE)
+BUILD_STAMPS = $(addprefix $(STAMP)-build-, $(CONFIGS))
+
+QUILT_STAMPFN = $(STAMP_DIR)/patch
+include /usr/share/quilt/quilt.make
+
+DRI_DRIVERS =
+GALLIUM_DRIVERS =
+EGL_DISPLAYS = x11
+
+confflags_DRI3 = --disable-dri3
+
+# hurd doesn't do direct rendering
+ifeq ($(DEB_HOST_ARCH_OS), hurd)
+	confflags_DIRECT_RENDERING = --disable-driglx-direct
+	DRI_DRIVERS = swrast
+else
+  ifeq ($(DEB_HOST_ARCH_OS), linux)
+	confflags_DRI3 = --enable-dri3
+# Gallium drivers require libdrm-{nouveau,radeon}, only available on Linux
+	GALLIUM_DRIVERS += nouveau svga
+
+	# Freedreno requires arm in addition
+	ifneq (,$(filter arm,$(DEB_HOST_ARCH_CPU)))
+		GALLIUM_DRIVERS += freedreno
+	endif
+
+	# svga needs xa state tracker
+	confflags_GALLIUM += --enable-xa
+
+# Non-Linux ports also lack *_CLOEXEC and epoll, so wayland isn't ready yet:
+	EGL_DISPLAYS += wayland
+
+# Mir isn't built on AArch64 and PPC
+    ifeq (,$(filter $(DEB_HOST_ARCH),arm64 powerpc ppc64 ppc64el))
+	EGL_DISPLAYS += mir
+    endif
+
+    ifeq (,$(filter $(DEB_HOST_ARCH), s390 s390x))
+	DRI_DRIVERS += nouveau
+    endif
+  endif
+
+	EGL_DISPLAYS += drm
+
+  # Build intel drivers on archs where libdrm-intel is installed
+  ifneq (,$(filter $(DEB_HOST_ARCH),amd64 i386 kfreebsd-amd64 kfreebsd-i386 x32))
+	DRI_DRIVERS += i915 i965
+  endif
+
+  # Do not build llvmpipe for armhf, it regresses compared to the classic swrast.
+  ifneq (,$(filter $(DEB_HOST_ARCH),amd64 i386 kfreebsd-amd64 kfreebsd-i386))
+	GALLIUM_DRIVERS += swrast
+  else
+	DRI_DRIVERS += swrast
+  endif
+
+  ifeq (,$(filter $(DEB_HOST_ARCH), s390 s390x))
+    DRI_DRIVERS += r200 radeon
+    GALLIUM_DRIVERS += r600 r300
+  endif
+
+  # LLVM is required for r300g, radeonsi and llvmpipe:
+  ifneq (,$(filter $(DEB_HOST_ARCH),amd64 i386 kfreebsd-amd64 kfreebsd-i386 armhf))
+	GALLIUM_DRIVERS += radeonsi
+	confflags_GALLIUM += --enable-gallium-llvm
+	confflags_GALLIUM += ac_cv_path_LLVM_CONFIG=llvm-config-3.6
+  endif
+
+	confflags_DIRECT_RENDERING = --enable-driglx-direct
+	confflags_GALLIUM += --enable-vdpau
+endif
+confflags_EGL = --with-egl-platforms="$(EGL_DISPLAYS)"
+confflags_GLES = --enable-gles1 --enable-gles2
+confflags_GALLIUM += --with-gallium-drivers="$(GALLIUM_DRIVERS)"
+
+confflags-dri = \
+	--enable-dri \
+	--with-dri-drivers="$(DRI_DRIVERS)" \
+	--with-dri-driverdir=/usr/lib/$(DEB_HOST_MULTIARCH)/dri \
+	--with-dri-searchpath='/usr/lib/$(DEB_HOST_MULTIARCH)/dri:\$$$${ORIGIN}/dri:/usr/lib/dri' \
+	--enable-osmesa \
+	--enable-glx-tls \
+	--enable-shared-glapi \
+	--enable-texture-float \
+	--disable-xvmc \
+	--disable-omx \
+	$(confflags_DIRECT_RENDERING) \
+	$(confflags_DRI3) \
+	$(confflags_EGL) \
+	$(confflags_GALLIUM) \
+	$(confflags_GLES) \
+	$(buildflags)
+
+configure: $(QUILT_STAMPFN) configure.ac
+	autoreconf -vfi
+
+# list the configurations that will built
+configs:
+	@echo Building the following configurations: $(CONFIGS)
+
+$(STAMP_DIR)/stamp:
+	dh_testdir
+	mkdir -p $(STAMP_DIR)
+	>$@
+
+$(QUILT_STAMPFN): $(STAMP_DIR)/stamp
+
+build: build-stamp
+
+build-stamp: $(BUILD_STAMPS)
+	>$@
+
+$(STAMP)-build-%: configure
+	dh_testdir
+
+	mkdir -p $(DEB_BUILD_DIR)/$*
+
+	cd $(DEB_BUILD_DIR)/$* && \
+	../../configure --prefix=/usr --mandir=\$${prefix}/share/man \
+	             --infodir=\$${prefix}/share/info --sysconfdir=/etc \
+	             --libdir=\$${prefix}/lib/$(DEB_HOST_MULTIARCH) \
+	             --localstatedir=/var --disable-silent-rules \
+				 $(confflags) $(confflags-$*)
+	cd $(DEB_BUILD_DIR)/$* && $(MAKE)
+	>$@
+
+install: build
+	# Add here commands to install the package into debian/tmp
+	dh_testdir
+	dh_testroot
+	dh_prep
+	dh_installdirs
+	set -e; for config in $(filter-out dri, $(CONFIGS)); do \
+		$(MAKE) -C $(DEB_BUILD_DIR)/$$config DESTDIR=$(CURDIR)/debian/tmp install; \
+	done
+	$(MAKE) -C $(DEB_BUILD_DIR)/dri DESTDIR=$(CURDIR)/debian/tmp/dri install
+	for file in debian/*.in; \
+	do \
+		sed -e"s,\$${DEB_HOST_MULTIARCH},$(DEB_HOST_MULTIARCH),g" \
+			$${file} > $${file%%.in}; \
+	done
+
+clean: unpatch
+	dh_testdir
+	rm -rf .pc
+
+	rm -f config.cache config.log config.status
+	rm -f */config.cache */config.log */config.status
+	rm -f conftest* */conftest*
+	rm -rf autom4te.cache */autom4te.cache
+	rm -rf build
+	rm -rf configure bin/config.guess bin/config.sub config.h.in
+	rm -rf $$(find -name Makefile.in)
+	rm -rf aclocal.m4 bin/missing bin/depcomp install-sh bin/ltmain.sh
+	rm -f bin/ar-lib bin/compile bin/ylwrap bin/install-sh
+	rm -rf $(STAMP_DIR)
+	for file in debian/*.in; do rm -f $${file%%.in}; done
+	rm -f src/glsl/builtins/tools/texture_builtins.pyc
+	rm -f src/mapi/glapi/gen/*.pyc
+	rm -f src/mesa/main/*.pyc
+	rm -f src/gallium/auxiliary/util/*.pyc
+	rm -f m4/libtool.m4 m4/ltoptions.m4 m4/ltsugar.m4 m4/ltversion.m4 m4/lt~obsolete.m4
+
+	dh_clean
+
+# Build architecture-independent files here.
+binary-indep: install
+
+allpkg = $(shell dh_listpackages -s)
+dbgpkg = $(filter %-dbg, $(allpkg))
+otherpkg = $(filter-out %-dbg, $(allpkg))
+havedbgpkg = $(patsubst %-dbg,%,$(dbgpkg))
+nodbgpkg = $(filter-out $(havedbgpkg),$(otherpkg))
+
+# Build architecture-dependent files here.
+binary-arch: install
+	dh_testdir
+	dh_testroot
+	dh_installchangelogs -s
+	dh_installchangelogs -pmesa-common-dev
+	dh_installdocs -s
+	dh_installexamples -s
+
+	# Also get rid of other files which aren't installed. Do not
+	# use -f to ensure we notice disappearing files:
+	set -e; for file in $(NOT_INSTALLED); do rm debian/tmp/$$file; done
+	# Files only in git, not in tarballs, OK to use rm -f here:
+	set -e; for file in $(NOT_INSTALLED_EITHER); do rm -f debian/tmp/$$file; done
+	# purge .la files
+	find debian/tmp/ -name '*.la' -exec rm '{}' ';'
+
+	# Copy the hardlinked *_dri.so correctly.
+	install -m755 -d debian/libgl1-mesa-dri/usr/lib/${DEB_HOST_MULTIARCH}/dri/
+	mv debian/tmp/dri/usr/lib/${DEB_HOST_MULTIARCH}/dri/*_dri.so \
+	   debian/libgl1-mesa-dri/usr/lib/${DEB_HOST_MULTIARCH}/dri/
+
+  ifneq ($(DEB_HOST_ARCH_OS), hurd)
+	# Copy the hardlinked vdpau drivers correctly.
+	install -m755 -d debian/mesa-vdpau-drivers/usr/lib/${DEB_HOST_MULTIARCH}/vdpau/
+	mv debian/tmp/dri/usr/lib/${DEB_HOST_MULTIARCH}/vdpau/libvdpau*.so* \
+	   debian/mesa-vdpau-drivers/usr/lib/${DEB_HOST_MULTIARCH}/vdpau/
+  endif
+
+	dh_install -s --list-missing
+
+	# Create an ld.so.conf which says where to find libGL from Mesa
+	echo "/usr/lib/$(DEB_HOST_MULTIARCH)/mesa" \
+	> $(CURDIR)/debian/libgl1-mesa-glx/usr/lib/$(DEB_HOST_MULTIARCH)/mesa/ld.so.conf
+
+	# Empty directory for the alternative
+	mkdir -p $(CURDIR)/debian/libgl1-mesa-glx/usr/lib/$(DEB_HOST_MULTIARCH)/xorg/x11-extra-modules
+
+	# Create an ld.so.conf which says where to find libEGL, libGLES{1,2}
+	# from Mesa.
+	echo "/usr/lib/$(DEB_HOST_MULTIARCH)/mesa-egl" \
+	> $(CURDIR)/debian/libegl1-mesa/usr/lib/$(DEB_HOST_MULTIARCH)/mesa-egl/ld.so.conf
+
+	dh_installman -s
+	dh_lintian -s
+	dh_link -s
+	# Install bug control and script:
+	set -e; for p in $(allpkg); do \
+		install -d debian/$$p/usr/share/bug/$$p && \
+		install -m 644 debian/local/control debian/$$p/usr/share/bug/$$p && \
+		install -m 755 debian/local/script  debian/$$p/usr/share/bug/$$p; \
+	done
+	set -e; for p in $(havedbgpkg); do \
+		dh_strip -p$${p} --dbg-package=$${p}-dbg; \
+	done
+	# dh_strip -s --remaining-packages doesn't work with resumed
+	# builds (see changelog for mesa 7.10-1):
+	dh_strip $(foreach p,$(nodbgpkg),-p$(p))
+	dh_compress -s
+	dh_fixperms -s
+	# Resolve EGL/GLES symbols in the private library path.
+	# Because there's no packaging problem so onerous that accomodating
+	# proprietary alternatives can't make more difficult…
+	set -e ; for PACKAGE in \
+		libegl1-mesa libgles1-mesa libgles2-mesa; do \
+			dh_makeshlibs -p$$PACKAGE -- -c4 \
+			-edebian/$$PACKAGE/usr/lib/$(DEB_HOST_MULTIARCH)/mesa-egl/\* \
+		; done
+	dh_makeshlibs -s --remaining-packages -- -c4
+
+	dh_installdeb -s
+	dh_shlibdeps -s -l/usr/lib/$(DEB_HOST_MULTIARCH)/mesa:\
+/usr/lib/$(DEB_HOST_MULTIARCH)/mesa-egl
+	dh_gencontrol -s
+	dh_md5sums -s
+	dh_builddeb -s -- -Zxz
+
+binary: binary-indep binary-arch
+.PHONY: configs build clean binary-indep binary-arch binary install
+
+# For maintainer use only, generate a tarball:
+gentarball: SOURCE=mesa
+gentarball: UV=$(shell dpkg-parsechangelog|awk '/^Version:/ {print $$2}'|sed 's/-.*$$//')
+gentarball:
+	git archive --format=tar upstream-experimental --prefix=$(SOURCE)-$(UV)/ | gzip -9 > ../$(SOURCE)_$(UV).orig.tar.gz
--- mesa-10.5.2.orig/debian/upstream/signing-key.asc
+++ mesa-10.5.2/debian/upstream/signing-key.asc
@@ -0,0 +1,618 @@
+-----BEGIN PGP PUBLIC KEY BLOCK-----
+Version: GnuPG v1
+
+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
+MTE6MjggMDI6NTU6MDQAAAAAOwAAAAgAAAAlAAAACAAAAAAAAAABAAANIwAABKUA
+AAAfAAAAAQABfGMAAAAiAAUNRwAAAHL/4QoVaHR0cDovL25zLmFkb2JlLmNvbS94
+YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49J++7vycgaWQ9J1c1TTBNcENlaGlIenJl
+U3pOVGN6a2M5ZCc/Pgo8eDp4bXBtZXRhIHhtbG5zOng9J2Fkb2JlOm5zOm1ldGEv
+Jz4KPHJkZjpSREYgeG1sbnM6cmRmPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAy
+LzIyLXJkZi1zeW50YXgtbnMjJz4KCiA8cmRmOkRlc2NyaXB0aW9uIHhtbG5zOmV4
+aWY9J2h0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvJz4KICA8ZXhpZjpNYWtl
+PkNhbm9uPC9leGlmOk1ha2U+CiAgPGV4aWY6TW9kZWw+Q2Fub24gRU9TIDYwRDwv
+ZXhpZjpNb2RlbD4KICA8ZXhpZjpPcmllbnRhdGlvbj5Ub3AtbGVmdDwvZXhpZjpP
+cmllbnRhdGlvbj4KICA8ZXhpZjpYUmVzb2x1dGlvbj43MjwvZXhpZjpYUmVzb2x1
+dGlvbj4KICA8ZXhpZjpZUmVzb2x1dGlvbj43MjwvZXhpZjpZUmVzb2x1dGlvbj4K
+ICA8ZXhpZjpSZXNvbHV0aW9uVW5pdD5JbmNoPC9leGlmOlJlc29sdXRpb25Vbml0
+PgogIDxleGlmOlNvZnR3YXJlPkFwZXJ0dXJlIDMuNC4zPC9leGlmOlNvZnR3YXJl
+PgogIDxleGlmOkRhdGVUaW1lPjIwMTI6MTE6MjggMDI6NTU6MDQ8L2V4aWY6RGF0
+ZVRpbWU+CiAgPGV4aWY6QXJ0aXN0PlJ5YW4gV2FybmljazwvZXhpZjpBcnRpc3Q+
+CiAgPGV4aWY6Q29weXJpZ2h0Pk9wYWNpdHkgSW5jb3Jwb3JhdGVkIChQaG90b2dy
+YXBoZXIpIC0gW05vbmVdIChFZGl0b3IpPC9leGlmOkNvcHlyaWdodD4KICA8ZXhp
+ZjpFeHBvc3VyZVRpbWU+MS8xNjAgc2VjLjwvZXhpZjpFeHBvc3VyZVRpbWU+CiAg
+PGV4aWY6Rk51bWJlcj5mLzUuMDwvZXhpZjpGTnVtYmVyPgogIDxleGlmOkV4cG9z
+dXJlUHJvZ3JhbT5NYW51YWw8L2V4aWY6RXhwb3N1cmVQcm9ncmFtPgogIDxleGlm
+OklTT1NwZWVkUmF0aW5ncz4KICAgPHJkZjpTZXE+CiAgICA8cmRmOmxpPjEwMDwv
+cmRmOmxpPgogICA8L3JkZjpTZXE+CiAgPC9leGlmOklTT1NwZWVkUmF0aW5ncz4K
+ICA8ZXhpZjpFeGlmVmVyc2lvbj5FeGlmIFZlcnNpb24gMi4zPC9leGlmOkV4aWZW
+ZXJzaW9uPgogIDxleGlmOkRhdGVUaW1lT3JpZ2luYWw+MjAxMjoxMToyOCAwMjo1
+NTowNDwvZXhpZjpEYXRlVGltZU9yaWdpbmFsPgogIDxleGlmOkRhdGVUaW1lRGln
+aXRpemVkPjIwMTI6MTE6MjggMDI6NTU6MDQ8L2V4aWY6RGF0ZVRpbWVEaWdpdGl6
+ZWQ+CiAgPGV4aWY6Q29tcG9uZW50c0NvbmZpZ3VyYXRpb24+CiAgIDxyZGY6U2Vx
+PgogICAgPHJkZjpsaT5ZIENiIENyIC08L3JkZjpsaT4KICAgPC9yZGY6U2VxPgog
+IDwvZXhpZjpDb21wb25lbnRzQ29uZmlndXJhdGlvbj4KICA8ZXhpZjpTaHV0dGVy
+U3BlZWRWYWx1ZT43LjM4IEVWICgxLzE2NSBzZWMuKTwvZXhpZjpTaHV0dGVyU3Bl
+ZWRWYWx1ZT4KICA8ZXhpZjpBcGVydHVyZVZhbHVlPjQuNjIgRVYgKGYvNS4wKTwv
+ZXhpZjpBcGVydHVyZVZhbHVlPgogIDxleGlmOkV4cG9zdXJlQmlhc1ZhbHVlPjAu
+MDAgRVY8L2V4aWY6RXhwb3N1cmVCaWFzVmFsdWU+CiAgPGV4aWY6TWF4QXBlcnR1
+cmVWYWx1ZT4yLjgzIEVWIChmLzIuNyk8L2V4aWY6TWF4QXBlcnR1cmVWYWx1ZT4K
+ICA8ZXhpZjpNZXRlcmluZ01vZGU+UGF0dGVybjwvZXhpZjpNZXRlcmluZ01vZGU+
+CiAgPGV4aWY6Rmxhc2ggcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogIDwvZXhp
+ZjpGbGFzaD4KICA8ZXhpZjpGb2NhbExlbmd0aD4zMS4wIG1tPC9leGlmOkZvY2Fs
+TGVuZ3RoPgogIDxleGlmOlN1YnNlY1RpbWU+MjM8L2V4aWY6U3Vic2VjVGltZT4K
+ICA8ZXhpZjpTdWJTZWNUaW1lT3JpZ2luYWw+MjM8L2V4aWY6U3ViU2VjVGltZU9y
+aWdpbmFsPgogIDxleGlmOlN1YlNlY1RpbWVEaWdpdGl6ZWQ+MjM8L2V4aWY6U3Vi
+U2VjVGltZURpZ2l0aXplZD4KICA8ZXhpZjpGbGFzaFBpeFZlcnNpb24+Rmxhc2hQ
+aXggVmVyc2lvbiAxLjA8L2V4aWY6Rmxhc2hQaXhWZXJzaW9uPgogIDxleGlmOkNv
+bG9yU3BhY2U+c1JHQjwvZXhpZjpDb2xvclNwYWNlPgogIDxleGlmOlBpeGVsWERp
+bWVuc2lvbj44MDA8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogIDxleGlmOlBpeGVs
+WURpbWVuc2lvbj41MzM8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogIDxleGlmOkZv
+Y2FsUGxhbmVYUmVzb2x1dGlvbj4yODY0LjA5PC9leGlmOkZvY2FsUGxhbmVYUmVz
+b2x1dGlvbj4KICA8ZXhpZjpGb2NhbFBsYW5lWVJlc29sdXRpb24+MjkwNC4yMDwv
+ZXhpZjpGb2NhbFBsYW5lWVJlc29sdXRpb24+CiAgPGV4aWY6Rm9jYWxQbGFuZVJl
+c29sdXRpb25Vbml0PkluY2g8L2V4aWY6Rm9jYWxQbGFuZVJlc29sdXRpb25Vbml0
+PgogIDxleGlmOkN1c3RvbVJlbmRlcmVkPk5vcm1hbCBwcm9jZXNzPC9leGlmOkN1
+c3RvbVJlbmRlcmVkPgogIDxleGlmOkV4cG9zdXJlTW9kZT5NYW51YWwgZXhwb3N1
+cmU8L2V4aWY6RXhwb3N1cmVNb2RlPgogIDxleGlmOldoaXRlQmFsYW5jZT5BdXRv
+IHdoaXRlIGJhbGFuY2U8L2V4aWY6V2hpdGVCYWxhbmNlPgogIDxleGlmOlNjZW5l
+Q2FwdHVyZVR5cGU+U3RhbmRhcmQ8L2V4aWY6U2NlbmVDYXB0dXJlVHlwZT4KIDwv
+cmRmOkRlc2NyaXB0aW9uPgoKPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFj
+a2V0IGVuZD0ncic/Pgr/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRy
+UkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAA
+AAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0
+AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFla
+AAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3
+AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJD
+AAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdo
+dCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAAS
+c1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAA
+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+WFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAA
+AABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+E
+AAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAA
+FklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERl
+ZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5
+NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAA
+AAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0
+aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5n
+IENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
+AAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAA
+AEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAAC
+c2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3
+ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCu
+ALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEy
+ATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHh
+AekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLB
+AssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPT
+A+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUc
+BSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAad
+Bq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRgha
+CG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpU
+CmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyO
+DKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8J
+DyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJ
+EegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTO
+FPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgb
+GEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2Mbihuy
+G9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+U
+H78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPC
+I/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/
+KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0M
+LUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIq
+MmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDec
+N9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1h
+PaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9
+Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnw
+SjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7
+UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfg
+WC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19h
+X7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9
+Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94
+b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gR
+eG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEK
+gWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opk
+isqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQg
+lIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5A
+nq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjE
+qTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOu
+tCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/
+v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3
+yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY
+11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj
+4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY
+8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26
+/kv+3P9t////2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsN
+DhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsN
+FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU
+FBT/wgARCAEgAPADAREAAhEBAxEB/8QAHAAAAAcBAQAAAAAAAAAAAAAAAAECAwQF
+BgcI/8QAGgEAAwEBAQEAAAAAAAAAAAAAAAECAwQFBv/aAAwDAQACEAMQAAAB8ykA
+agUBgAMABjAAQAAAAGAANhAAABAYACIDAAAA45JjUCgAGAAAZSwIkJvJoBQJBAGw
+mADEYiKSIxADAAQyGwSoFAAAGBprBSp5CE4w1IMHQbEkGm5IhUhhAAIEtKAwAEAG
+ySYKAAYADSkLVWdRgjMQyQixG+mCa5gCC0BIabCY08w2GAAAAIGSTAxqGQAHpVpl
+tEZEYoJ4TpqFDr7io1TqSRR6kMCFoU3bATQAAAAAGSTGYADBad1nqrOnxpBBVtJn
+Wqe4jXKwAktPK3WkSEKBc2zDaIAAAgANEmMxgkx6PLWVno6ycEIJU60tZZ+ps40n
+zUWpaIlsrWBplNoir1i0YbSQAAAABkkyjAKXlp0THWnKnChJzSm51qoesm9rN246
+4KJzEorGRnNNU5m+el15rCm45AEAAwAMkmMwOTTLW/y0CKVa3uXVoVrqMdtrL0RE
+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
+=LxfO
+-----END PGP PUBLIC KEY BLOCK-----
+-----BEGIN PGP PUBLIC KEY BLOCK-----
+Version: GnuPG v1.4.11 (GNU/Linux)
+
+mQINBFQDrA8BEACyGXUc6vSmNkwZdTTzX1vHRgIDWoppot56E5oOO+gM6ukyMDY7
+60FxKvmh704I8NqTfg3Rcs18fSOXeRj1gDG84MsU7QM3g6IQyxCA+IV7d2r/DPZE
+z7HxEIKFxGJw24swsQJy/iiZf/b8flqiJbx3Ye1LF7T5iw/gKDsN6eqzAtLKqw9I
+/4TBVE766nwmKNQZiw2jAFCs3lwfmNIm7ZaQNBpHTRabMTLMJiFFynLsa1eVsf9D
+R3eVXW4c2oHKZbxDvSWR2yz6XcQ9ldii89sUNeclnjSFNOt761P4zBNwcEX2GuQs
+JO/haw5FyrMJJexAbdUTtshZ7XvhDv/UCHtyqQBUw/vwYe8Rx79Hq/fOOUdMjWOW
+cDCzyYTmGdbEJYRHrENcsOhoti3IkOjgzw0UDyCHyjapFV1ZJT/Kz7rkMmsdNtoi
+1BVTLIdOvQmeXQtN2caZSN20wZWHdZnrz1/JOfOxpEsf2R78zavIfobReQdFoYMC
+jv4b49WB/Gytd5vneqk9yi9DEhCYw5uGxQgjIKC4AZPVtD//GY+iYiPe5dPwrhU1
+FyD3b9SgYxFE/uZlgbzBIV4akK11vC5Q+Co5PYzhnPPgd7cYLjr/ceMfGPkeWLCY
+OxZbXg92BZKKJnFHYx7FJ04WKS8SjzIn/qEzvy7SmPGxSCX6zdwn0fKZYQARAQAB
+tCdFbWlsIFZlbGlrb3YgPGVtaWwubC52ZWxpa292QGdtYWlsLmNvbT6JAjkEEwEC
+ACMFAlQDrA8CGwMHCwkIBwMCAQYVCAIJCgsEFgIDAQIeAQIXgAAKCRDtrjewLOtJ
+DV/AEACd/RKvSzL0L4/9HYvFskjNR40NPFyQHyMaPg9eeblhfbnH7mWYXJ2MPGTR
+bgvQCr0zZ3R7u8E8Rxulwifbm20x0WhYOKkDuSROjroRqvDhxfuLtXtBKqfVGw6T
+0rMEOOWdqGhql4yuVpqGbgHa5ZfFvQi2EtT40QDdD052adzWeT96aFQB6Gf3CRMf
+a4y7hawbUV10XL3BUljUcyh+SJv9lPclW09WNE+tuCmdIqoP927BSjXwh2GR6dM0
+z0aDf3wOxRc9S8q34jS+xN8hsXmYFAqkn0YkVIQ0M0PaQ89ltcyonbG6rZ+1rNgx
+tiLEpfOZpzr7LowVsw9R6ky/pvhBHfVIM4aT17hbi2XfnMihmt/T1SZqb36+aYFt
+j8Bc/o9I5crPXwOP4in3heY2ZmDWeGkPSRNix0VLQHL0HzOxjMAEm+y5ROLDo7Z/
+sGOebYxMYPIK5mJzrKhk737FEI57cvUSRXzbjmV3CIOIJbaNULWFXkCHRhdyk8mh
+sVzKkl7IDiWPBj1RC5r0EXmrjUzK8QfzrTWiOa6z9WIkZ4sSs0bz14Q4pZR2qi8L
+KLVjCNf/FusqCTgbZU06x1S/75XJwcsFENWkWYPEaxxzQiCs1rVzG8SnrOjcyc5F
+T0rEAQLWU7eq9U6nd4BXMkokiuzlOKWqsDyXibR3wkhI80kAJw==
+=XSpT
+-----END PGP PUBLIC KEY BLOCK-----
--- mesa-10.5.2.orig/debian/watch
+++ mesa-10.5.2/debian/watch
@@ -0,0 +1,4 @@
+#git=git://anongit.freedesktop.org/mesa/mesa
+version=3
+opts="uversionmangle=s/-rc/~rc/,dversionmangle=s/\+repack//,pgpsigurlmangle=s/$/.sig/,pasv" \
+ftp://freedesktop.org/pub/mesa/([\d\.]*)/ mesa-(.*)\.tar\.gz
--- mesa-10.5.2.orig/include/VG/openvg.h
+++ mesa-10.5.2/include/VG/openvg.h
@@ -0,0 +1,746 @@
+/* $Revision: 9203 $ on $Date:: 2009-10-07 02:21:52 -0700 #$ */
+
+/*------------------------------------------------------------------------
+ *
+ * OpenVG 1.1 Reference Implementation
+ * -------------------------------------
+ *
+ * Copyright (c) 2008 The Khronos Group Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and /or associated documentation files
+ * (the "Materials "), to deal in the Materials without restriction,
+ * including without limitation the rights to use, copy, modify, merge,
+ * publish, distribute, sublicense, and/or sell copies of the Materials,
+ * and to permit persons to whom the Materials are furnished to do so,
+ * subject to the following conditions: 
+ *
+ * The above copyright notice and this permission notice shall be included 
+ * in all copies or substantial portions of the Materials. 
+ *
+ * THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+ * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
+ * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE MATERIALS OR
+ * THE USE OR OTHER DEALINGS IN THE MATERIALS.
+ *
+ *//**
+ * \file
+ * \brief	OpenVG 1.1 API.
+ *//*-------------------------------------------------------------------*/
+
+#ifndef _OPENVG_H
+#define _OPENVG_H
+
+#include <VG/vgplatform.h>
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#define OPENVG_VERSION_1_0		1
+#define OPENVG_VERSION_1_0_1	1
+#define OPENVG_VERSION_1_1		2
+
+#ifndef VG_MAXSHORT
+#define VG_MAXSHORT 0x7FFF
+#endif
+
+#ifndef VG_MAXINT
+#define VG_MAXINT 0x7FFFFFFF
+#endif
+
+#ifndef VG_MAX_ENUM
+#define VG_MAX_ENUM 0x7FFFFFFF
+#endif
+
+typedef VGuint VGHandle;
+
+typedef VGHandle VGPath;
+typedef VGHandle VGImage;
+typedef VGHandle VGMaskLayer;
+typedef VGHandle VGFont;
+typedef VGHandle VGPaint;
+
+#define VG_INVALID_HANDLE ((VGHandle)0)
+
+typedef enum {
+  VG_FALSE               = 0,
+  VG_TRUE                = 1,
+
+  VG_BOOLEAN_FORCE_SIZE  = VG_MAX_ENUM
+} VGboolean;
+
+typedef enum {
+  VG_NO_ERROR                                 = 0,
+  VG_BAD_HANDLE_ERROR                         = 0x1000,
+  VG_ILLEGAL_ARGUMENT_ERROR                   = 0x1001,
+  VG_OUT_OF_MEMORY_ERROR                      = 0x1002,
+  VG_PATH_CAPABILITY_ERROR                    = 0x1003,
+  VG_UNSUPPORTED_IMAGE_FORMAT_ERROR           = 0x1004,
+  VG_UNSUPPORTED_PATH_FORMAT_ERROR            = 0x1005,
+  VG_IMAGE_IN_USE_ERROR                       = 0x1006,
+  VG_NO_CONTEXT_ERROR                         = 0x1007,
+
+  VG_ERROR_CODE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGErrorCode;
+
+typedef enum {
+  /* Mode settings */
+  VG_MATRIX_MODE                              = 0x1100,
+  VG_FILL_RULE                                = 0x1101,
+  VG_IMAGE_QUALITY                            = 0x1102,
+  VG_RENDERING_QUALITY                        = 0x1103,
+  VG_BLEND_MODE                               = 0x1104,
+  VG_IMAGE_MODE                               = 0x1105,
+
+  /* Scissoring rectangles */
+  VG_SCISSOR_RECTS                            = 0x1106,
+
+  /* Color Transformation */
+  VG_COLOR_TRANSFORM                          = 0x1170,
+  VG_COLOR_TRANSFORM_VALUES                   = 0x1171,
+
+  /* Stroke parameters */
+  VG_STROKE_LINE_WIDTH                        = 0x1110,
+  VG_STROKE_CAP_STYLE                         = 0x1111,
+  VG_STROKE_JOIN_STYLE                        = 0x1112,
+  VG_STROKE_MITER_LIMIT                       = 0x1113,
+  VG_STROKE_DASH_PATTERN                      = 0x1114,
+  VG_STROKE_DASH_PHASE                        = 0x1115,
+  VG_STROKE_DASH_PHASE_RESET                  = 0x1116,
+
+  /* Edge fill color for VG_TILE_FILL tiling mode */
+  VG_TILE_FILL_COLOR                          = 0x1120,
+
+  /* Color for vgClear */
+  VG_CLEAR_COLOR                              = 0x1121,
+
+  /* Glyph origin */
+  VG_GLYPH_ORIGIN                             = 0x1122,
+
+  /* Enable/disable alpha masking and scissoring */
+  VG_MASKING                                  = 0x1130,
+  VG_SCISSORING                               = 0x1131,
+
+  /* Pixel layout information */
+  VG_PIXEL_LAYOUT                             = 0x1140,
+  VG_SCREEN_LAYOUT                            = 0x1141,
+
+  /* Source format selection for image filters */
+  VG_FILTER_FORMAT_LINEAR                     = 0x1150,
+  VG_FILTER_FORMAT_PREMULTIPLIED              = 0x1151,
+
+  /* Destination write enable mask for image filters */
+  VG_FILTER_CHANNEL_MASK                      = 0x1152,
+
+  /* Implementation limits (read-only) */
+  VG_MAX_SCISSOR_RECTS                        = 0x1160,
+  VG_MAX_DASH_COUNT                           = 0x1161,
+  VG_MAX_KERNEL_SIZE                          = 0x1162,
+  VG_MAX_SEPARABLE_KERNEL_SIZE                = 0x1163,
+  VG_MAX_COLOR_RAMP_STOPS                     = 0x1164,
+  VG_MAX_IMAGE_WIDTH                          = 0x1165,
+  VG_MAX_IMAGE_HEIGHT                         = 0x1166,
+  VG_MAX_IMAGE_PIXELS                         = 0x1167,
+  VG_MAX_IMAGE_BYTES                          = 0x1168,
+  VG_MAX_FLOAT                                = 0x1169,
+  VG_MAX_GAUSSIAN_STD_DEVIATION               = 0x116A,
+
+  VG_PARAM_TYPE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGParamType;
+
+typedef enum {
+  VG_RENDERING_QUALITY_NONANTIALIASED         = 0x1200,
+  VG_RENDERING_QUALITY_FASTER                 = 0x1201,
+  VG_RENDERING_QUALITY_BETTER                 = 0x1202, /* Default */
+
+  VG_RENDERING_QUALITY_FORCE_SIZE             = VG_MAX_ENUM
+} VGRenderingQuality;
+
+typedef enum {
+  VG_PIXEL_LAYOUT_UNKNOWN                     = 0x1300,
+  VG_PIXEL_LAYOUT_RGB_VERTICAL                = 0x1301,
+  VG_PIXEL_LAYOUT_BGR_VERTICAL                = 0x1302,
+  VG_PIXEL_LAYOUT_RGB_HORIZONTAL              = 0x1303,
+  VG_PIXEL_LAYOUT_BGR_HORIZONTAL              = 0x1304,
+
+  VG_PIXEL_LAYOUT_FORCE_SIZE                  = VG_MAX_ENUM
+} VGPixelLayout;
+
+typedef enum {
+  VG_MATRIX_PATH_USER_TO_SURFACE              = 0x1400,
+  VG_MATRIX_IMAGE_USER_TO_SURFACE             = 0x1401,
+  VG_MATRIX_FILL_PAINT_TO_USER                = 0x1402,
+  VG_MATRIX_STROKE_PAINT_TO_USER              = 0x1403,
+  VG_MATRIX_GLYPH_USER_TO_SURFACE             = 0x1404,
+
+  VG_MATRIX_MODE_FORCE_SIZE                   = VG_MAX_ENUM
+} VGMatrixMode;
+
+typedef enum {
+  VG_CLEAR_MASK                               = 0x1500,
+  VG_FILL_MASK                                = 0x1501,
+  VG_SET_MASK                                 = 0x1502,
+  VG_UNION_MASK                               = 0x1503,
+  VG_INTERSECT_MASK                           = 0x1504,
+  VG_SUBTRACT_MASK                            = 0x1505,
+
+  VG_MASK_OPERATION_FORCE_SIZE                = VG_MAX_ENUM
+} VGMaskOperation;
+
+#define VG_PATH_FORMAT_STANDARD 0
+
+typedef enum {
+  VG_PATH_DATATYPE_S_8                        =  0,
+  VG_PATH_DATATYPE_S_16                       =  1,
+  VG_PATH_DATATYPE_S_32                       =  2,
+  VG_PATH_DATATYPE_F                          =  3,
+
+  VG_PATH_DATATYPE_FORCE_SIZE                 = VG_MAX_ENUM
+} VGPathDatatype;
+
+typedef enum {
+  VG_ABSOLUTE                                 = 0,
+  VG_RELATIVE                                 = 1,
+
+  VG_PATH_ABS_REL_FORCE_SIZE                  = VG_MAX_ENUM
+} VGPathAbsRel;
+
+typedef enum {
+  VG_CLOSE_PATH                               = ( 0 << 1),
+  VG_MOVE_TO                                  = ( 1 << 1),
+  VG_LINE_TO                                  = ( 2 << 1),
+  VG_HLINE_TO                                 = ( 3 << 1),
+  VG_VLINE_TO                                 = ( 4 << 1),
+  VG_QUAD_TO                                  = ( 5 << 1),
+  VG_CUBIC_TO                                 = ( 6 << 1),
+  VG_SQUAD_TO                                 = ( 7 << 1),
+  VG_SCUBIC_TO                                = ( 8 << 1),
+  VG_SCCWARC_TO                               = ( 9 << 1),
+  VG_SCWARC_TO                                = (10 << 1),
+  VG_LCCWARC_TO                               = (11 << 1),
+  VG_LCWARC_TO                                = (12 << 1),
+
+  VG_PATH_SEGMENT_FORCE_SIZE                  = VG_MAX_ENUM
+} VGPathSegment;
+
+typedef enum {
+  VG_MOVE_TO_ABS                              = VG_MOVE_TO    | VG_ABSOLUTE,
+  VG_MOVE_TO_REL                              = VG_MOVE_TO    | VG_RELATIVE,
+  VG_LINE_TO_ABS                              = VG_LINE_TO    | VG_ABSOLUTE,
+  VG_LINE_TO_REL                              = VG_LINE_TO    | VG_RELATIVE,
+  VG_HLINE_TO_ABS                             = VG_HLINE_TO   | VG_ABSOLUTE,
+  VG_HLINE_TO_REL                             = VG_HLINE_TO   | VG_RELATIVE,
+  VG_VLINE_TO_ABS                             = VG_VLINE_TO   | VG_ABSOLUTE,
+  VG_VLINE_TO_REL                             = VG_VLINE_TO   | VG_RELATIVE,
+  VG_QUAD_TO_ABS                              = VG_QUAD_TO    | VG_ABSOLUTE,
+  VG_QUAD_TO_REL                              = VG_QUAD_TO    | VG_RELATIVE,
+  VG_CUBIC_TO_ABS                             = VG_CUBIC_TO   | VG_ABSOLUTE,
+  VG_CUBIC_TO_REL                             = VG_CUBIC_TO   | VG_RELATIVE,
+  VG_SQUAD_TO_ABS                             = VG_SQUAD_TO   | VG_ABSOLUTE,
+  VG_SQUAD_TO_REL                             = VG_SQUAD_TO   | VG_RELATIVE,
+  VG_SCUBIC_TO_ABS                            = VG_SCUBIC_TO  | VG_ABSOLUTE,
+  VG_SCUBIC_TO_REL                            = VG_SCUBIC_TO  | VG_RELATIVE,
+  VG_SCCWARC_TO_ABS                           = VG_SCCWARC_TO | VG_ABSOLUTE,
+  VG_SCCWARC_TO_REL                           = VG_SCCWARC_TO | VG_RELATIVE,
+  VG_SCWARC_TO_ABS                            = VG_SCWARC_TO  | VG_ABSOLUTE,
+  VG_SCWARC_TO_REL                            = VG_SCWARC_TO  | VG_RELATIVE,
+  VG_LCCWARC_TO_ABS                           = VG_LCCWARC_TO | VG_ABSOLUTE,
+  VG_LCCWARC_TO_REL                           = VG_LCCWARC_TO | VG_RELATIVE,
+  VG_LCWARC_TO_ABS                            = VG_LCWARC_TO  | VG_ABSOLUTE,
+  VG_LCWARC_TO_REL                            = VG_LCWARC_TO  | VG_RELATIVE,
+
+  VG_PATH_COMMAND_FORCE_SIZE                  = VG_MAX_ENUM
+} VGPathCommand;
+
+typedef enum {
+  VG_PATH_CAPABILITY_APPEND_FROM              = (1 <<  0),
+  VG_PATH_CAPABILITY_APPEND_TO                = (1 <<  1),
+  VG_PATH_CAPABILITY_MODIFY                   = (1 <<  2),
+  VG_PATH_CAPABILITY_TRANSFORM_FROM           = (1 <<  3),
+  VG_PATH_CAPABILITY_TRANSFORM_TO             = (1 <<  4),
+  VG_PATH_CAPABILITY_INTERPOLATE_FROM         = (1 <<  5),
+  VG_PATH_CAPABILITY_INTERPOLATE_TO           = (1 <<  6),
+  VG_PATH_CAPABILITY_PATH_LENGTH              = (1 <<  7),
+  VG_PATH_CAPABILITY_POINT_ALONG_PATH         = (1 <<  8),
+  VG_PATH_CAPABILITY_TANGENT_ALONG_PATH       = (1 <<  9),
+  VG_PATH_CAPABILITY_PATH_BOUNDS              = (1 << 10),
+  VG_PATH_CAPABILITY_PATH_TRANSFORMED_BOUNDS  = (1 << 11),
+  VG_PATH_CAPABILITY_ALL                      = (1 << 12) - 1,
+
+  VG_PATH_CAPABILITIES_FORCE_SIZE             = VG_MAX_ENUM
+} VGPathCapabilities;
+
+typedef enum {
+  VG_PATH_FORMAT                              = 0x1600,
+  VG_PATH_DATATYPE                            = 0x1601,
+  VG_PATH_SCALE                               = 0x1602,
+  VG_PATH_BIAS                                = 0x1603,
+  VG_PATH_NUM_SEGMENTS                        = 0x1604,
+  VG_PATH_NUM_COORDS                          = 0x1605,
+
+  VG_PATH_PARAM_TYPE_FORCE_SIZE               = VG_MAX_ENUM
+} VGPathParamType;
+
+typedef enum {
+  VG_CAP_BUTT                                 = 0x1700,
+  VG_CAP_ROUND                                = 0x1701,
+  VG_CAP_SQUARE                               = 0x1702,
+
+  VG_CAP_STYLE_FORCE_SIZE                     = VG_MAX_ENUM
+} VGCapStyle;
+
+typedef enum {
+  VG_JOIN_MITER                               = 0x1800,
+  VG_JOIN_ROUND                               = 0x1801,
+  VG_JOIN_BEVEL                               = 0x1802,
+
+  VG_JOIN_STYLE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGJoinStyle;
+
+typedef enum {
+  VG_EVEN_ODD                                 = 0x1900,
+  VG_NON_ZERO                                 = 0x1901,
+
+  VG_FILL_RULE_FORCE_SIZE                     = VG_MAX_ENUM
+} VGFillRule;
+
+typedef enum {
+  VG_STROKE_PATH                              = (1 << 0),
+  VG_FILL_PATH                                = (1 << 1),
+
+  VG_PAINT_MODE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGPaintMode;
+
+typedef enum {
+  /* Color paint parameters */
+  VG_PAINT_TYPE                               = 0x1A00,
+  VG_PAINT_COLOR                              = 0x1A01,
+  VG_PAINT_COLOR_RAMP_SPREAD_MODE             = 0x1A02,
+  VG_PAINT_COLOR_RAMP_PREMULTIPLIED           = 0x1A07,
+  VG_PAINT_COLOR_RAMP_STOPS                   = 0x1A03,
+
+  /* Linear gradient paint parameters */
+  VG_PAINT_LINEAR_GRADIENT                    = 0x1A04,
+
+  /* Radial gradient paint parameters */
+  VG_PAINT_RADIAL_GRADIENT                    = 0x1A05,
+
+  /* Pattern paint parameters */
+  VG_PAINT_PATTERN_TILING_MODE                = 0x1A06,
+
+  VG_PAINT_PARAM_TYPE_FORCE_SIZE              = VG_MAX_ENUM
+} VGPaintParamType;
+
+typedef enum {
+  VG_PAINT_TYPE_COLOR                         = 0x1B00,
+  VG_PAINT_TYPE_LINEAR_GRADIENT               = 0x1B01,
+  VG_PAINT_TYPE_RADIAL_GRADIENT               = 0x1B02,
+  VG_PAINT_TYPE_PATTERN                       = 0x1B03,
+
+  VG_PAINT_TYPE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGPaintType;
+
+typedef enum {
+  VG_COLOR_RAMP_SPREAD_PAD                    = 0x1C00,
+  VG_COLOR_RAMP_SPREAD_REPEAT                 = 0x1C01,
+  VG_COLOR_RAMP_SPREAD_REFLECT                = 0x1C02,
+
+  VG_COLOR_RAMP_SPREAD_MODE_FORCE_SIZE        = VG_MAX_ENUM
+} VGColorRampSpreadMode;
+
+typedef enum {
+  VG_TILE_FILL                                = 0x1D00,
+  VG_TILE_PAD                                 = 0x1D01,
+  VG_TILE_REPEAT                              = 0x1D02,
+  VG_TILE_REFLECT                             = 0x1D03,
+
+  VG_TILING_MODE_FORCE_SIZE                   = VG_MAX_ENUM
+} VGTilingMode;
+
+typedef enum {
+  /* RGB{A,X} channel ordering */
+  VG_sRGBX_8888                               =  0,
+  VG_sRGBA_8888                               =  1,
+  VG_sRGBA_8888_PRE                           =  2,
+  VG_sRGB_565                                 =  3,
+  VG_sRGBA_5551                               =  4,
+  VG_sRGBA_4444                               =  5,
+  VG_sL_8                                     =  6,
+  VG_lRGBX_8888                               =  7,
+  VG_lRGBA_8888                               =  8,
+  VG_lRGBA_8888_PRE                           =  9,
+  VG_lL_8                                     = 10,
+  VG_A_8                                      = 11,
+  VG_BW_1                                     = 12,
+  VG_A_1                                      = 13,
+  VG_A_4                                      = 14,
+
+  /* {A,X}RGB channel ordering */
+  VG_sXRGB_8888                               =  0 | (1 << 6),
+  VG_sARGB_8888                               =  1 | (1 << 6),
+  VG_sARGB_8888_PRE                           =  2 | (1 << 6),
+  VG_sARGB_1555                               =  4 | (1 << 6),
+  VG_sARGB_4444                               =  5 | (1 << 6),
+  VG_lXRGB_8888                               =  7 | (1 << 6),
+  VG_lARGB_8888                               =  8 | (1 << 6),
+  VG_lARGB_8888_PRE                           =  9 | (1 << 6),
+
+  /* BGR{A,X} channel ordering */
+  VG_sBGRX_8888                               =  0 | (1 << 7),
+  VG_sBGRA_8888                               =  1 | (1 << 7),
+  VG_sBGRA_8888_PRE                           =  2 | (1 << 7),
+  VG_sBGR_565                                 =  3 | (1 << 7),
+  VG_sBGRA_5551                               =  4 | (1 << 7),
+  VG_sBGRA_4444                               =  5 | (1 << 7),
+  VG_lBGRX_8888                               =  7 | (1 << 7),
+  VG_lBGRA_8888                               =  8 | (1 << 7),
+  VG_lBGRA_8888_PRE                           =  9 | (1 << 7),
+
+  /* {A,X}BGR channel ordering */
+  VG_sXBGR_8888                               =  0 | (1 << 6) | (1 << 7),
+  VG_sABGR_8888                               =  1 | (1 << 6) | (1 << 7),
+  VG_sABGR_8888_PRE                           =  2 | (1 << 6) | (1 << 7),
+  VG_sABGR_1555                               =  4 | (1 << 6) | (1 << 7),
+  VG_sABGR_4444                               =  5 | (1 << 6) | (1 << 7),
+  VG_lXBGR_8888                               =  7 | (1 << 6) | (1 << 7),
+  VG_lABGR_8888                               =  8 | (1 << 6) | (1 << 7),
+  VG_lABGR_8888_PRE                           =  9 | (1 << 6) | (1 << 7),
+
+  VG_IMAGE_FORMAT_FORCE_SIZE                  = VG_MAX_ENUM
+} VGImageFormat;
+
+typedef enum {
+  VG_IMAGE_QUALITY_NONANTIALIASED             = (1 << 0),
+  VG_IMAGE_QUALITY_FASTER                     = (1 << 1),
+  VG_IMAGE_QUALITY_BETTER                     = (1 << 2),
+
+  VG_IMAGE_QUALITY_FORCE_SIZE                 = VG_MAX_ENUM
+} VGImageQuality;
+
+typedef enum {
+  VG_IMAGE_FORMAT                             = 0x1E00,
+  VG_IMAGE_WIDTH                              = 0x1E01,
+  VG_IMAGE_HEIGHT                             = 0x1E02,
+
+  VG_IMAGE_PARAM_TYPE_FORCE_SIZE              = VG_MAX_ENUM
+} VGImageParamType;
+
+typedef enum {
+  VG_DRAW_IMAGE_NORMAL                        = 0x1F00,
+  VG_DRAW_IMAGE_MULTIPLY                      = 0x1F01,
+  VG_DRAW_IMAGE_STENCIL                       = 0x1F02,
+
+  VG_IMAGE_MODE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGImageMode;
+
+typedef enum {
+  VG_RED                                      = (1 << 3),
+  VG_GREEN                                    = (1 << 2),
+  VG_BLUE                                     = (1 << 1),
+  VG_ALPHA                                    = (1 << 0),
+
+  VG_IMAGE_CHANNEL_FORCE_SIZE                 = VG_MAX_ENUM
+} VGImageChannel;
+
+typedef enum {
+  VG_BLEND_SRC                                = 0x2000,
+  VG_BLEND_SRC_OVER                           = 0x2001,
+  VG_BLEND_DST_OVER                           = 0x2002,
+  VG_BLEND_SRC_IN                             = 0x2003,
+  VG_BLEND_DST_IN                             = 0x2004,
+  VG_BLEND_MULTIPLY                           = 0x2005,
+  VG_BLEND_SCREEN                             = 0x2006,
+  VG_BLEND_DARKEN                             = 0x2007,
+  VG_BLEND_LIGHTEN                            = 0x2008,
+  VG_BLEND_ADDITIVE                           = 0x2009,
+
+  VG_BLEND_MODE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGBlendMode;
+
+typedef enum {
+  VG_FONT_NUM_GLYPHS                          = 0x2F00,
+
+  VG_FONT_PARAM_TYPE_FORCE_SIZE               = VG_MAX_ENUM
+} VGFontParamType;
+
+typedef enum {
+  VG_IMAGE_FORMAT_QUERY                       = 0x2100,
+  VG_PATH_DATATYPE_QUERY                      = 0x2101,
+
+  VG_HARDWARE_QUERY_TYPE_FORCE_SIZE           = VG_MAX_ENUM
+} VGHardwareQueryType;
+
+typedef enum {
+  VG_HARDWARE_ACCELERATED                     = 0x2200,
+  VG_HARDWARE_UNACCELERATED                   = 0x2201,
+
+  VG_HARDWARE_QUERY_RESULT_FORCE_SIZE         = VG_MAX_ENUM
+} VGHardwareQueryResult;
+
+typedef enum {
+  VG_VENDOR                                   = 0x2300,
+  VG_RENDERER                                 = 0x2301,
+  VG_VERSION                                  = 0x2302,
+  VG_EXTENSIONS                               = 0x2303,
+
+  VG_STRING_ID_FORCE_SIZE                     = VG_MAX_ENUM
+} VGStringID;
+
+/* Function Prototypes */
+
+#ifndef VG_API_CALL
+#	error VG_API_CALL must be defined
+#endif
+
+#ifndef VG_API_ENTRY
+#   error VG_API_ENTRY must be defined 
+#endif
+
+#ifndef VG_API_EXIT
+#   error VG_API_EXIT must be defined 
+#endif
+
+VG_API_CALL VGErrorCode VG_API_ENTRY vgGetError(void) VG_API_EXIT;
+
+VG_API_CALL void VG_API_ENTRY vgFlush(void) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgFinish(void) VG_API_EXIT;
+
+/* Getters and Setters */
+VG_API_CALL void VG_API_ENTRY vgSetf (VGParamType type, VGfloat value) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSeti (VGParamType type, VGint value) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetfv(VGParamType type, VGint count,
+                         const VGfloat * values) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetiv(VGParamType type, VGint count,
+                         const VGint * values) VG_API_EXIT;
+
+VG_API_CALL VGfloat VG_API_ENTRY vgGetf(VGParamType type) VG_API_EXIT;
+VG_API_CALL VGint VG_API_ENTRY vgGeti(VGParamType type) VG_API_EXIT;
+VG_API_CALL VGint VG_API_ENTRY vgGetVectorSize(VGParamType type) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetfv(VGParamType type, VGint count, VGfloat * values) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetiv(VGParamType type, VGint count, VGint * values) VG_API_EXIT;
+
+VG_API_CALL void VG_API_ENTRY vgSetParameterf(VGHandle object,
+                                 VGint paramType,
+                                 VGfloat value) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetParameteri(VGHandle object,
+                                 VGint paramType,
+                                 VGint value) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetParameterfv(VGHandle object,
+                                  VGint paramType,
+                                  VGint count, const VGfloat * values) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetParameteriv(VGHandle object,
+                                  VGint paramType,
+                                  VGint count, const VGint * values) VG_API_EXIT;
+
+VG_API_CALL VGfloat VG_API_ENTRY vgGetParameterf(VGHandle object,
+                                    VGint paramType) VG_API_EXIT;
+VG_API_CALL VGint VG_API_ENTRY vgGetParameteri(VGHandle object,
+                                  VGint paramType);
+VG_API_CALL VGint VG_API_ENTRY vgGetParameterVectorSize(VGHandle object,
+                                           VGint paramType) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetParameterfv(VGHandle object,
+                                  VGint paramType,
+                                  VGint count, VGfloat * values) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetParameteriv(VGHandle object,
+                                  VGint paramType,
+                                  VGint count, VGint * values) VG_API_EXIT;
+
+/* Matrix Manipulation */
+VG_API_CALL void VG_API_ENTRY vgLoadIdentity(void) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgLoadMatrix(const VGfloat * m) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetMatrix(VGfloat * m) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgMultMatrix(const VGfloat * m) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgTranslate(VGfloat tx, VGfloat ty) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgScale(VGfloat sx, VGfloat sy) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgShear(VGfloat shx, VGfloat shy) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgRotate(VGfloat angle) VG_API_EXIT;
+
+/* Masking and Clearing */
+VG_API_CALL void VG_API_ENTRY vgMask(VGHandle mask, VGMaskOperation operation,
+                                     VGint x, VGint y,
+                                     VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgRenderToMask(VGPath path,
+                                            VGbitfield paintModes,
+                                            VGMaskOperation operation) VG_API_EXIT;
+VG_API_CALL VGMaskLayer VG_API_ENTRY vgCreateMaskLayer(VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDestroyMaskLayer(VGMaskLayer maskLayer) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgFillMaskLayer(VGMaskLayer maskLayer,
+                                             VGint x, VGint y,
+                                             VGint width, VGint height,
+                                             VGfloat value) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgCopyMask(VGMaskLayer maskLayer,
+                                        VGint dx, VGint dy,
+                                        VGint sx, VGint sy,
+                                        VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgClear(VGint x, VGint y, VGint width, VGint height) VG_API_EXIT;
+
+/* Paths */
+VG_API_CALL VGPath VG_API_ENTRY vgCreatePath(VGint pathFormat,
+                                VGPathDatatype datatype,
+                                VGfloat scale, VGfloat bias,
+                                VGint segmentCapacityHint,
+                                VGint coordCapacityHint,
+                                VGbitfield capabilities) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgClearPath(VGPath path, VGbitfield capabilities) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDestroyPath(VGPath path) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgRemovePathCapabilities(VGPath path,
+                                          VGbitfield capabilities) VG_API_EXIT;
+VG_API_CALL VGbitfield VG_API_ENTRY vgGetPathCapabilities(VGPath path) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgAppendPath(VGPath dstPath, VGPath srcPath) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgAppendPathData(VGPath dstPath,
+                                  VGint numSegments,
+                                  const VGubyte * pathSegments,
+                                  const void * pathData) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgModifyPathCoords(VGPath dstPath, VGint startIndex,
+                                    VGint numSegments,
+                                    const void * pathData) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgTransformPath(VGPath dstPath, VGPath srcPath) VG_API_EXIT;
+VG_API_CALL VGboolean VG_API_ENTRY vgInterpolatePath(VGPath dstPath,
+                                        VGPath startPath,
+                                        VGPath endPath,
+                                        VGfloat amount) VG_API_EXIT;
+VG_API_CALL VGfloat VG_API_ENTRY vgPathLength(VGPath path,
+                                 VGint startSegment, VGint numSegments) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgPointAlongPath(VGPath path,
+                                  VGint startSegment, VGint numSegments,
+                                  VGfloat distance,
+                                  VGfloat * x, VGfloat * y,
+                                  VGfloat * tangentX, VGfloat * tangentY) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgPathBounds(VGPath path,
+                              VGfloat * minX, VGfloat * minY,
+                              VGfloat * width, VGfloat * height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgPathTransformedBounds(VGPath path,
+                                         VGfloat * minX, VGfloat * minY,
+                                         VGfloat * width, VGfloat * height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDrawPath(VGPath path, VGbitfield paintModes) VG_API_EXIT;
+
+/* Paint */
+VG_API_CALL VGPaint VG_API_ENTRY vgCreatePaint(void) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDestroyPaint(VGPaint paint) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetPaint(VGPaint paint, VGbitfield paintModes) VG_API_EXIT;
+VG_API_CALL VGPaint VG_API_ENTRY vgGetPaint(VGPaintMode paintMode) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetColor(VGPaint paint, VGuint rgba) VG_API_EXIT;
+VG_API_CALL VGuint VG_API_ENTRY vgGetColor(VGPaint paint) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgPaintPattern(VGPaint paint, VGImage pattern) VG_API_EXIT;
+
+/* Images */
+VG_API_CALL VGImage VG_API_ENTRY vgCreateImage(VGImageFormat format,
+                                  VGint width, VGint height,
+                                  VGbitfield allowedQuality) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDestroyImage(VGImage image) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgClearImage(VGImage image,
+                              VGint x, VGint y, VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgImageSubData(VGImage image,
+                                const void * data, VGint dataStride,
+                                VGImageFormat dataFormat,
+                                VGint x, VGint y, VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetImageSubData(VGImage image,
+                                   void * data, VGint dataStride,
+                                   VGImageFormat dataFormat,
+                                   VGint x, VGint y,
+                                   VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL VGImage VG_API_ENTRY vgChildImage(VGImage parent,
+                                 VGint x, VGint y, VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL VGImage VG_API_ENTRY vgGetParent(VGImage image) VG_API_EXIT; 
+VG_API_CALL void VG_API_ENTRY vgCopyImage(VGImage dst, VGint dx, VGint dy,
+                             VGImage src, VGint sx, VGint sy,
+                             VGint width, VGint height,
+                             VGboolean dither) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDrawImage(VGImage image) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetPixels(VGint dx, VGint dy,
+                             VGImage src, VGint sx, VGint sy,
+                             VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgWritePixels(const void * data, VGint dataStride,
+                               VGImageFormat dataFormat,
+                               VGint dx, VGint dy,
+                               VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGetPixels(VGImage dst, VGint dx, VGint dy,
+                             VGint sx, VGint sy,
+                             VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgReadPixels(void * data, VGint dataStride,
+                              VGImageFormat dataFormat,
+                              VGint sx, VGint sy,
+                              VGint width, VGint height) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgCopyPixels(VGint dx, VGint dy,
+                              VGint sx, VGint sy,
+                              VGint width, VGint height) VG_API_EXIT;
+
+/* Text */
+VG_API_CALL VGFont VG_API_ENTRY vgCreateFont(VGint glyphCapacityHint) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDestroyFont(VGFont font) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetGlyphToPath(VGFont font,
+                                              VGuint glyphIndex,
+                                              VGPath path,
+                                              VGboolean isHinted,
+                                              const VGfloat glyphOrigin [2],
+                                              const VGfloat escapement[2]) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSetGlyphToImage(VGFont font,
+                                               VGuint glyphIndex,
+                                               VGImage image,
+                                               const VGfloat glyphOrigin [2],
+                                               const VGfloat escapement[2]) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgClearGlyph(VGFont font,VGuint glyphIndex) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDrawGlyph(VGFont font, 
+                                         VGuint glyphIndex,
+                                         VGbitfield paintModes,
+                                         VGboolean allowAutoHinting) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgDrawGlyphs(VGFont font,
+                                          VGint glyphCount,
+                                          const VGuint *glyphIndices,
+                                          const VGfloat *adjustments_x,
+                                          const VGfloat *adjustments_y,
+                                          VGbitfield paintModes,
+                                          VGboolean allowAutoHinting) VG_API_EXIT;
+
+/* Image Filters */
+VG_API_CALL void VG_API_ENTRY vgColorMatrix(VGImage dst, VGImage src,
+                               const VGfloat * matrix) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgConvolve(VGImage dst, VGImage src,
+                            VGint kernelWidth, VGint kernelHeight,
+                            VGint shiftX, VGint shiftY,
+                            const VGshort * kernel,
+                            VGfloat scale,
+                            VGfloat bias,
+                            VGTilingMode tilingMode) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgSeparableConvolve(VGImage dst, VGImage src,
+                                     VGint kernelWidth,
+                                     VGint kernelHeight,
+                                     VGint shiftX, VGint shiftY,
+                                     const VGshort * kernelX,
+                                     const VGshort * kernelY,
+                                     VGfloat scale,
+                                     VGfloat bias,
+                                     VGTilingMode tilingMode) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgGaussianBlur(VGImage dst, VGImage src,
+                                VGfloat stdDeviationX,
+                                VGfloat stdDeviationY,
+                                VGTilingMode tilingMode) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgLookup(VGImage dst, VGImage src,
+                          const VGubyte * redLUT,
+                          const VGubyte * greenLUT,
+                          const VGubyte * blueLUT,
+                          const VGubyte * alphaLUT,
+                          VGboolean outputLinear,
+                          VGboolean outputPremultiplied) VG_API_EXIT;
+VG_API_CALL void VG_API_ENTRY vgLookupSingle(VGImage dst, VGImage src,
+                                const VGuint * lookupTable,
+                                VGImageChannel sourceChannel,
+                                VGboolean outputLinear,
+                                VGboolean outputPremultiplied) VG_API_EXIT;
+
+/* Hardware Queries */
+VG_API_CALL VGHardwareQueryResult VG_API_ENTRY vgHardwareQuery(VGHardwareQueryType key,
+                                                  VGint setting) VG_API_EXIT;
+
+/* Renderer and Extension Information */
+VG_API_CALL const VGubyte * VG_API_ENTRY vgGetString(VGStringID name) VG_API_EXIT;
+
+#ifdef __cplusplus 
+} /* extern "C" */
+#endif
+
+#endif /* _OPENVG_H */
--- mesa-10.5.2.orig/include/VG/vgext.h
+++ mesa-10.5.2/include/VG/vgext.h
@@ -0,0 +1,233 @@
+/* $Revision: 6810 $ on $Date:: 2008-10-29 07:31:37 -0700 #$ */
+
+/*------------------------------------------------------------------------
+ * 
+ * VG extensions Reference Implementation
+ * -------------------------------------
+ *
+ * Copyright (c) 2008 The Khronos Group Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and /or associated documentation files
+ * (the "Materials "), to deal in the Materials without restriction,
+ * including without limitation the rights to use, copy, modify, merge,
+ * publish, distribute, sublicense, and/or sell copies of the Materials,
+ * and to permit persons to whom the Materials are furnished to do so,
+ * subject to the following conditions: 
+ *
+ * The above copyright notice and this permission notice shall be included 
+ * in all copies or substantial portions of the Materials. 
+ *
+ * THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+ * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
+ * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE MATERIALS OR
+ * THE USE OR OTHER DEALINGS IN THE MATERIALS.
+ *
+ *//**
+ * \file
+ * \brief	VG extensions
+ *//*-------------------------------------------------------------------*/
+
+
+
+#ifndef _VGEXT_H
+#define _VGEXT_H
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#include <VG/openvg.h>
+#include <VG/vgu.h>
+
+#ifndef VG_API_ENTRYP
+#   define VG_API_ENTRYP VG_API_ENTRY*
+#endif
+
+#ifndef VGU_API_ENTRYP
+#   define VGU_API_ENTRYP VGU_API_ENTRY*
+#endif
+
+/*-------------------------------------------------------------------------------
+ * KHR extensions
+ *------------------------------------------------------------------------------*/
+
+typedef enum  {
+
+#ifndef VG_KHR_iterative_average_blur
+  VG_MAX_AVERAGE_BLUR_DIMENSION_KHR        = 0x116B,
+  VG_AVERAGE_BLUR_DIMENSION_RESOLUTION_KHR = 0x116C,
+  VG_MAX_AVERAGE_BLUR_ITERATIONS_KHR       = 0x116D,
+#endif
+
+  VG_PARAM_TYPE_KHR_FORCE_SIZE             = VG_MAX_ENUM
+} VGParamTypeKHR;
+
+#ifndef VG_KHR_EGL_image
+#define VG_KHR_EGL_image 1
+/* VGEGLImageKHR is an opaque handle to an EGLImage */
+typedef void* VGeglImageKHR; 
+
+#ifdef VG_VGEXT_PROTOTYPES
+VG_API_CALL VGImage VG_API_ENTRY vgCreateEGLImageTargetKHR(VGeglImageKHR image);
+#endif
+typedef VGImage (VG_API_ENTRYP PFNVGCREATEEGLIMAGETARGETKHRPROC) (VGeglImageKHR image);
+
+#endif
+
+
+#ifndef VG_KHR_iterative_average_blur
+#define VG_KHR_iterative_average_blur 1
+
+#ifdef VG_VGEXT_PROTOTYPES
+VG_API_CALL void vgIterativeAverageBlurKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGTilingMode tilingMode);
+#endif 
+typedef void (VG_API_ENTRYP PFNVGITERATIVEAVERAGEBLURKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGTilingMode tilingMode);
+
+#endif
+
+
+#ifndef VG_KHR_advanced_blending
+#define VG_KHR_advanced_blending 1
+
+typedef enum {
+  VG_BLEND_OVERLAY_KHR        = 0x2010,
+  VG_BLEND_HARDLIGHT_KHR      = 0x2011,
+  VG_BLEND_SOFTLIGHT_SVG_KHR  = 0x2012,
+  VG_BLEND_SOFTLIGHT_KHR      = 0x2013,
+  VG_BLEND_COLORDODGE_KHR     = 0x2014,
+  VG_BLEND_COLORBURN_KHR      = 0x2015,
+  VG_BLEND_DIFFERENCE_KHR     = 0x2016,
+  VG_BLEND_SUBTRACT_KHR       = 0x2017,
+  VG_BLEND_INVERT_KHR         = 0x2018,
+  VG_BLEND_EXCLUSION_KHR      = 0x2019,
+  VG_BLEND_LINEARDODGE_KHR    = 0x201a,
+  VG_BLEND_LINEARBURN_KHR     = 0x201b,
+  VG_BLEND_VIVIDLIGHT_KHR     = 0x201c,
+  VG_BLEND_LINEARLIGHT_KHR    = 0x201d,
+  VG_BLEND_PINLIGHT_KHR       = 0x201e,
+  VG_BLEND_HARDMIX_KHR        = 0x201f,
+  VG_BLEND_CLEAR_KHR          = 0x2020,
+  VG_BLEND_DST_KHR            = 0x2021,
+  VG_BLEND_SRC_OUT_KHR        = 0x2022,
+  VG_BLEND_DST_OUT_KHR        = 0x2023,
+  VG_BLEND_SRC_ATOP_KHR       = 0x2024,
+  VG_BLEND_DST_ATOP_KHR       = 0x2025,
+  VG_BLEND_XOR_KHR            = 0x2026,
+
+  VG_BLEND_MODE_KHR_FORCE_SIZE= VG_MAX_ENUM
+} VGBlendModeKHR;
+#endif
+
+#ifndef VG_KHR_parametric_filter
+#define VG_KHR_parametric_filter 1 
+
+typedef enum {
+  VG_PF_OBJECT_VISIBLE_FLAG_KHR = (1 << 0),
+  VG_PF_KNOCKOUT_FLAG_KHR       = (1 << 1),
+  VG_PF_OUTER_FLAG_KHR          = (1 << 2),
+  VG_PF_INNER_FLAG_KHR          = (1 << 3),
+
+  VG_PF_TYPE_KHR_FORCE_SIZE     = VG_MAX_ENUM
+} VGPfTypeKHR;
+
+typedef enum {
+  VGU_IMAGE_IN_USE_ERROR           = 0xF010,
+
+  VGU_ERROR_CODE_KHR_FORCE_SIZE    = VG_MAX_ENUM
+} VGUErrorCodeKHR;
+
+#ifdef VG_VGEXT_PROTOTYPES
+VG_API_CALL void VG_API_ENTRY vgParametricFilterKHR(VGImage dst,VGImage src,VGImage blur,VGfloat strength,VGfloat offsetX,VGfloat offsetY,VGbitfield filterFlags,VGPaint highlightPaint,VGPaint shadowPaint);
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguDropShadowKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint shadowColorRGBA);
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguGlowKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint glowColorRGBA) ;
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguBevelKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint highlightColorRGBA,VGuint shadowColorRGBA);
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguGradientGlowKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint stopsCount,const VGfloat* glowColorRampStops);
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguGradientBevelKHR(VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint stopsCount,const VGfloat* bevelColorRampStops);
+#endif
+typedef void (VG_API_ENTRYP PFNVGPARAMETRICFILTERKHRPROC) (VGImage dst,VGImage src,VGImage blur,VGfloat strength,VGfloat offsetX,VGfloat offsetY,VGbitfield filterFlags,VGPaint highlightPaint,VGPaint shadowPaint);
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUDROPSHADOWKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint shadowColorRGBA);
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUGLOWKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint glowColorRGBA);
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUBEVELKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint highlightColorRGBA,VGuint shadowColorRGBA);
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUGRADIENTGLOWKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint stopsCount,const VGfloat* glowColorRampStops);
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUGRADIENTBEVELKHRPROC) (VGImage dst,VGImage src,VGfloat dimX,VGfloat dimY,VGuint iterative,VGfloat strength,VGfloat distance,VGfloat angle,VGbitfield filterFlags,VGbitfield allowedQuality,VGuint stopsCount,const VGfloat* bevelColorRampStops);
+
+#endif
+
+
+/*-------------------------------------------------------------------------------
+ * NDS extensions
+ *------------------------------------------------------------------------------*/
+
+#ifndef VG_NDS_paint_generation
+#define VG_NDS_paint_generation 1
+
+typedef enum { 
+  VG_PAINT_COLOR_RAMP_LINEAR_NDS            = 0x1A10,
+  VG_COLOR_MATRIX_NDS                       = 0x1A11,
+  VG_PAINT_COLOR_TRANSFORM_LINEAR_NDS       = 0x1A12,
+
+  VG_PAINT_PARAM_TYPE_NDS_FORCE_SIZE        = VG_MAX_ENUM
+} VGPaintParamTypeNds;
+
+typedef enum {
+  VG_DRAW_IMAGE_COLOR_MATRIX_NDS            = 0x1F10,
+
+  VG_IMAGE_MODE_NDS_FORCE_SIZE              = VG_MAX_ENUM
+} VGImageModeNds;
+#endif 
+
+
+#ifndef VG_NDS_projective_geometry
+#define VG_NDS_projective_geometry 1
+
+typedef enum {
+  VG_CLIP_MODE_NDS                          = 0x1180,
+  VG_CLIP_LINES_NDS                         = 0x1181,
+  VG_MAX_CLIP_LINES_NDS                     = 0x1182,
+
+  VG_PARAM_TYPE_NDS_FORCE_SIZE        = VG_MAX_ENUM
+} VGParamTypeNds;
+
+typedef enum {
+  VG_CLIPMODE_NONE_NDS                      = 0x3000,
+  VG_CLIPMODE_CLIP_CLOSED_NDS               = 0x3001,
+  VG_CLIPMODE_CLIP_OPEN_NDS                 = 0x3002,
+  VG_CLIPMODE_CULL_NDS                      = 0x3003,
+
+  VG_CLIPMODE_NDS_FORCE_SIZE = VG_MAX_ENUM
+} VGClipModeNds;
+
+typedef enum {
+  VG_RQUAD_TO_NDS              = ( 13 << 1 ),
+  VG_RCUBIC_TO_NDS             = ( 14 << 1 ),
+  
+  VG_PATH_SEGMENT_NDS_FORCE_SIZE = VG_MAX_ENUM
+} VGPathSegmentNds;
+
+typedef enum {
+  VG_RQUAD_TO_ABS_NDS            = (VG_RQUAD_TO_NDS  | VG_ABSOLUTE),
+  VG_RQUAD_TO_REL_NDS            = (VG_RQUAD_TO_NDS  | VG_RELATIVE),
+  VG_RCUBIC_TO_ABS_NDS           = (VG_RCUBIC_TO_NDS | VG_ABSOLUTE),
+  VG_RCUBIC_TO_REL_NDS           = (VG_RCUBIC_TO_NDS | VG_RELATIVE),
+
+  VG_PATH_COMMAND_NDS_FORCE_SIZE = VG_MAX_ENUM
+} VGPathCommandNds;
+
+#ifdef VG_VGEXT_PROTOTYPES
+VG_API_CALL void VG_API_ENTRY vgProjectiveMatrixNDS(VGboolean enable) ;
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguTransformClipLineNDS(const VGfloat Ain,const VGfloat Bin,const VGfloat Cin,const VGfloat* matrix,const VGboolean inverse,VGfloat* Aout,VGfloat* Bout,VGfloat* Cout);
+#endif 
+typedef void (VG_API_ENTRYP PFNVGPROJECTIVEMATRIXNDSPROC) (VGboolean enable) ;
+typedef VGUErrorCode (VGU_API_ENTRYP PFNVGUTRANSFORMCLIPLINENDSPROC) (const VGfloat Ain,const VGfloat Bin,const VGfloat Cin,const VGfloat* matrix,const VGboolean inverse,VGfloat* Aout,VGfloat* Bout,VGfloat* Cout);
+
+#endif
+
+#ifdef __cplusplus 
+} /* extern "C" */
+#endif
+
+#endif /* _VGEXT_H */
--- mesa-10.5.2.orig/include/VG/vgplatform.h
+++ mesa-10.5.2/include/VG/vgplatform.h
@@ -0,0 +1,92 @@
+/* $Revision: 6810 $ on $Date:: 2008-10-29 07:31:37 -0700 #$ */
+
+/*------------------------------------------------------------------------
+ *
+ * VG platform specific header Reference Implementation
+ * ----------------------------------------------------
+ *
+ * Copyright (c) 2008 The Khronos Group Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and /or associated documentation files
+ * (the "Materials "), to deal in the Materials without restriction,
+ * including without limitation the rights to use, copy, modify, merge,
+ * publish, distribute, sublicense, and/or sell copies of the Materials,
+ * and to permit persons to whom the Materials are furnished to do so,
+ * subject to the following conditions: 
+ *
+ * The above copyright notice and this permission notice shall be included 
+ * in all copies or substantial portions of the Materials. 
+ *
+ * THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+ * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
+ * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE MATERIALS OR
+ * THE USE OR OTHER DEALINGS IN THE MATERIALS.
+ *
+ *//**
+ * \file
+ * \brief VG platform specific header
+ *//*-------------------------------------------------------------------*/
+
+#ifndef _VGPLATFORM_H
+#define _VGPLATFORM_H
+
+#include <KHR/khrplatform.h>
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#ifndef VG_API_CALL 
+#if defined(OPENVG_STATIC_LIBRARY)
+#	define VG_API_CALL
+#else
+#	define VG_API_CALL KHRONOS_APICALL
+#endif /* defined OPENVG_STATIC_LIBRARY */
+#endif /* ifndef VG_API_CALL */
+
+#ifndef VGU_API_CALL 
+#if defined(OPENVG_STATIC_LIBRARY)
+#	define VGU_API_CALL
+#else
+#	define VGU_API_CALL KHRONOS_APICALL
+#endif /* defined OPENVG_STATIC_LIBRARY */
+#endif /* ifndef VGU_API_CALL */
+
+
+#ifndef VG_API_ENTRY
+#define VG_API_ENTRY
+#endif
+
+#ifndef VG_API_EXIT
+#define VG_API_EXIT
+#endif
+
+#ifndef VGU_API_ENTRY
+#define VGU_API_ENTRY
+#endif
+
+#ifndef VGU_API_EXIT
+#define VGU_API_EXIT
+#endif
+
+typedef float          VGfloat;
+typedef signed char    VGbyte;
+typedef unsigned char  VGubyte;
+typedef signed short   VGshort;
+typedef signed int     VGint;
+typedef unsigned int   VGuint;
+typedef unsigned int   VGbitfield;
+
+#ifndef VG_VGEXT_PROTOTYPES
+#define VG_VGEXT_PROTOTYPES
+#endif 
+
+#ifdef __cplusplus 
+} /* extern "C" */
+#endif
+
+#endif /* _VGPLATFORM_H */
--- mesa-10.5.2.orig/include/VG/vgu.h
+++ mesa-10.5.2/include/VG/vgu.h
@@ -0,0 +1,131 @@
+/* $Revision: 6810 $ on $Date:: 2008-10-29 07:31:37 -0700 #$ */
+
+/*------------------------------------------------------------------------
+ * 
+ * VGU 1.1 Reference Implementation
+ * -------------------------------------
+ *
+ * Copyright (c) 2008 The Khronos Group Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and /or associated documentation files
+ * (the "Materials "), to deal in the Materials without restriction,
+ * including without limitation the rights to use, copy, modify, merge,
+ * publish, distribute, sublicense, and/or sell copies of the Materials,
+ * and to permit persons to whom the Materials are furnished to do so,
+ * subject to the following conditions: 
+ *
+ * The above copyright notice and this permission notice shall be included 
+ * in all copies or substantial portions of the Materials. 
+ *
+ * THE MATERIALS ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+ * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+ * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+ * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
+ * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
+ * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE MATERIALS OR
+ * THE USE OR OTHER DEALINGS IN THE MATERIALS.
+ *
+ *//**
+ * \file
+ * \brief	VGU 1.1 API.
+ *//*-------------------------------------------------------------------*/
+
+#ifndef _VGU_H
+#define _VGU_H
+
+#ifdef __cplusplus 
+extern "C" { 
+#endif
+
+#include <VG/openvg.h>
+
+#define VGU_VERSION_1_0 1
+#define VGU_VERSION_1_1 2
+
+#ifndef VGU_API_CALL
+#	error VGU_API_CALL must be defined
+#endif
+
+#ifndef VGU_API_ENTRY
+#   error VGU_API_ENTRY must be defined 
+#endif
+
+#ifndef VGU_API_EXIT
+#   error VGU_API_EXIT must be defined 
+#endif
+
+
+typedef enum {
+  VGU_NO_ERROR                                 = 0,
+  VGU_BAD_HANDLE_ERROR                         = 0xF000,
+  VGU_ILLEGAL_ARGUMENT_ERROR                   = 0xF001,
+  VGU_OUT_OF_MEMORY_ERROR                      = 0xF002,
+  VGU_PATH_CAPABILITY_ERROR                    = 0xF003,
+  VGU_BAD_WARP_ERROR                           = 0xF004,
+
+  VGU_ERROR_CODE_FORCE_SIZE                    = VG_MAX_ENUM
+} VGUErrorCode;
+
+typedef enum {
+  VGU_ARC_OPEN                                 = 0xF100,
+  VGU_ARC_CHORD                                = 0xF101,
+  VGU_ARC_PIE                                  = 0xF102,
+
+  VGU_ARC_TYPE_FORCE_SIZE                      = VG_MAX_ENUM
+} VGUArcType;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguLine(VGPath path,
+                                  VGfloat x0, VGfloat y0,
+                                  VGfloat x1, VGfloat y1) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguPolygon(VGPath path,
+                                     const VGfloat * points, VGint count,
+                                     VGboolean closed) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguRect(VGPath path,
+                                  VGfloat x, VGfloat y,
+                                  VGfloat width, VGfloat height) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguRoundRect(VGPath path,
+                                       VGfloat x, VGfloat y,
+                                       VGfloat width, VGfloat height,
+                                       VGfloat arcWidth, VGfloat arcHeight) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguEllipse(VGPath path,
+                                     VGfloat cx, VGfloat cy,
+                                     VGfloat width, VGfloat height) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguArc(VGPath path,
+                                 VGfloat x, VGfloat y,
+                                 VGfloat width, VGfloat height,
+                                 VGfloat startAngle, VGfloat angleExtent,
+                                 VGUArcType arcType) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguComputeWarpQuadToSquare(VGfloat sx0, VGfloat sy0,
+                                                     VGfloat sx1, VGfloat sy1,
+                                                     VGfloat sx2, VGfloat sy2,
+                                                     VGfloat sx3, VGfloat sy3,
+                                                     VGfloat * matrix) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguComputeWarpSquareToQuad(VGfloat dx0, VGfloat dy0,
+                                                     VGfloat dx1, VGfloat dy1,
+                                                     VGfloat dx2, VGfloat dy2,
+                                                     VGfloat dx3, VGfloat dy3,
+                                                     VGfloat * matrix) VGU_API_EXIT;
+
+VGU_API_CALL VGUErrorCode VGU_API_ENTRY vguComputeWarpQuadToQuad(VGfloat dx0, VGfloat dy0,
+                                                   VGfloat dx1, VGfloat dy1,
+                                                   VGfloat dx2, VGfloat dy2,
+                                                   VGfloat dx3, VGfloat dy3,
+                                                   VGfloat sx0, VGfloat sy0,
+                                                   VGfloat sx1, VGfloat sy1,
+                                                   VGfloat sx2, VGfloat sy2,
+                                                   VGfloat sx3, VGfloat sy3,
+                                                   VGfloat * matrix) VGU_API_EXIT;
+
+#ifdef __cplusplus 
+} /* extern "C" */
+#endif
+
+#endif /* #ifndef _VGU_H */
--- mesa-10.5.2.orig/m4/ax_check_compile_flag.m4
+++ mesa-10.5.2/m4/ax_check_compile_flag.m4
@@ -0,0 +1,72 @@
+# ===========================================================================
+#   http://www.gnu.org/software/autoconf-archive/ax_check_compile_flag.html
+# ===========================================================================
+#
+# SYNOPSIS
+#
+#   AX_CHECK_COMPILE_FLAG(FLAG, [ACTION-SUCCESS], [ACTION-FAILURE], [EXTRA-FLAGS])
+#
+# DESCRIPTION
+#
+#   Check whether the given FLAG works with the current language's compiler
+#   or gives an error.  (Warnings, however, are ignored)
+#
+#   ACTION-SUCCESS/ACTION-FAILURE are shell commands to execute on
+#   success/failure.
+#
+#   If EXTRA-FLAGS is defined, it is added to the current language's default
+#   flags (e.g. CFLAGS) when the check is done.  The check is thus made with
+#   the flags: "CFLAGS EXTRA-FLAGS FLAG".  This can for example be used to
+#   force the compiler to issue an error when a bad flag is given.
+#
+#   NOTE: Implementation based on AX_CFLAGS_GCC_OPTION. Please keep this
+#   macro in sync with AX_CHECK_{PREPROC,LINK}_FLAG.
+#
+# LICENSE
+#
+#   Copyright (c) 2008 Guido U. Draheim <guidod@gmx.de>
+#   Copyright (c) 2011 Maarten Bosmans <mkbosmans@gmail.com>
+#
+#   This program is free software: you can redistribute it and/or modify it
+#   under the terms of the GNU General Public License as published by the
+#   Free Software Foundation, either version 3 of the License, or (at your
+#   option) any later version.
+#
+#   This program is distributed in the hope that it will be useful, but
+#   WITHOUT ANY WARRANTY; without even the implied warranty of
+#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
+#   Public License for more details.
+#
+#   You should have received a copy of the GNU General Public License along
+#   with this program. If not, see <http://www.gnu.org/licenses/>.
+#
+#   As a special exception, the respective Autoconf Macro's copyright owner
+#   gives unlimited permission to copy, distribute and modify the configure
+#   scripts that are the output of Autoconf when processing the Macro. You
+#   need not follow the terms of the GNU General Public License when using
+#   or distributing such scripts, even though portions of the text of the
+#   Macro appear in them. The GNU General Public License (GPL) does govern
+#   all other use of the material that constitutes the Autoconf Macro.
+#
+#   This special exception to the GPL applies to versions of the Autoconf
+#   Macro released by the Autoconf Archive. When you make and distribute a
+#   modified version of the Autoconf Macro, you may extend this special
+#   exception to the GPL to apply to your modified version as well.
+
+#serial 2
+
+AC_DEFUN([AX_CHECK_COMPILE_FLAG],
+[AC_PREREQ(2.59)dnl for _AC_LANG_PREFIX
+AS_VAR_PUSHDEF([CACHEVAR],[ax_cv_check_[]_AC_LANG_ABBREV[]flags_$4_$1])dnl
+AC_CACHE_CHECK([whether _AC_LANG compiler accepts $1], CACHEVAR, [
+  ax_check_save_flags=$[]_AC_LANG_PREFIX[]FLAGS
+  _AC_LANG_PREFIX[]FLAGS="$[]_AC_LANG_PREFIX[]FLAGS $4 $1"
+  AC_COMPILE_IFELSE([AC_LANG_PROGRAM()],
+    [AS_VAR_SET(CACHEVAR,[yes])],
+    [AS_VAR_SET(CACHEVAR,[no])])
+  _AC_LANG_PREFIX[]FLAGS=$ax_check_save_flags])
+AS_IF([test x"AS_VAR_GET(CACHEVAR)" = xyes],
+  [m4_default([$2], :)],
+  [m4_default([$3], :)])
+AS_VAR_POPDEF([CACHEVAR])dnl
+])dnl AX_CHECK_COMPILE_FLAGS
--- mesa-10.5.2.orig/src/egl/drivers/dri2/Android.mk
+++ mesa-10.5.2/src/egl/drivers/dri2/Android.mk
@@ -0,0 +1,52 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# Android.mk for egl_dri2
+
+LOCAL_PATH := $(call my-dir)
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	egl_dri2.c \
+	platform_android.c
+
+LOCAL_CFLAGS := \
+	-DDEFAULT_DRIVER_DIR=\"/system/lib/dri\" \
+	-DHAVE_SHARED_GLAPI \
+	-DHAVE_ANDROID_PLATFORM
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/egl/main \
+	$(MESA_TOP)/src/loader \
+	$(TARGET_OUT_HEADERS)/libdrm \
+	$(DRM_GRALLOC_TOP)
+
+LOCAL_STATIC_LIBRARIES := \
+	libmesa_loader
+
+LOCAL_MODULE := libmesa_egl_dri2
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/egl/drivers/dri2/platform_android.c
+++ mesa-10.5.2/src/egl/drivers/dri2/platform_android.c
@@ -0,0 +1,733 @@
+/*
+ * Mesa 3-D graphics library
+ *
+ * Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+ * Copyright (C) 2010-2011 LunarG Inc.
+ *
+ * Based on platform_x11, which has
+ *
+ * Copyright © 2011 Intel Corporation
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included
+ * in all copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ */
+
+#include <errno.h>
+#include <dlfcn.h>
+
+#if ANDROID_VERSION >= 0x402
+#include <sync/sync.h>
+#endif
+
+#include "loader.h"
+#include "egl_dri2.h"
+#include "egl_dri2_fallbacks.h"
+#include "gralloc_drm.h"
+
+static int
+get_format_bpp(int native)
+{
+   int bpp;
+
+   switch (native) {
+   case HAL_PIXEL_FORMAT_RGBA_8888:
+   case HAL_PIXEL_FORMAT_RGBX_8888:
+   case HAL_PIXEL_FORMAT_BGRA_8888:
+      bpp = 4;
+      break;
+   case HAL_PIXEL_FORMAT_RGB_888:
+      bpp = 3;
+      break;
+   case HAL_PIXEL_FORMAT_RGB_565:
+      bpp = 2;
+      break;
+   default:
+      bpp = 0;
+      break;
+   }
+
+   return bpp;
+}
+
+static int
+get_native_buffer_name(struct ANativeWindowBuffer *buf)
+{
+   return gralloc_drm_get_gem_handle(buf->handle);
+}
+
+static EGLBoolean
+droid_window_dequeue_buffer(struct dri2_egl_surface *dri2_surf)
+{
+#if ANDROID_VERSION >= 0x0402
+   int fence_fd;
+
+   if (dri2_surf->window->dequeueBuffer(dri2_surf->window, &dri2_surf->buffer,
+                                        &fence_fd))
+      return EGL_FALSE;
+
+   /* If access to the buffer is controlled by a sync fence, then block on the
+    * fence.
+    *
+    * It may be more performant to postpone blocking until there is an
+    * immediate need to write to the buffer. But doing so would require adding
+    * hooks to the DRI2 loader.
+    *
+    * From the ANativeWindow::dequeueBuffer documentation:
+    *
+    *    The libsync fence file descriptor returned in the int pointed to by
+    *    the fenceFd argument will refer to the fence that must signal
+    *    before the dequeued buffer may be written to.  A value of -1
+    *    indicates that the caller may access the buffer immediately without
+    *    waiting on a fence.  If a valid file descriptor is returned (i.e.
+    *    any value except -1) then the caller is responsible for closing the
+    *    file descriptor.
+    */
+    if (fence_fd >= 0) {
+       /* From the SYNC_IOC_WAIT documentation in <linux/sync.h>:
+        *
+        *    Waits indefinitely if timeout < 0.
+        */
+        int timeout = -1;
+        sync_wait(fence_fd, timeout);
+        close(fence_fd);
+   }
+
+   dri2_surf->buffer->common.incRef(&dri2_surf->buffer->common);
+#else
+   if (dri2_surf->window->dequeueBuffer(dri2_surf->window, &dri2_surf->buffer))
+      return EGL_FALSE;
+
+   dri2_surf->buffer->common.incRef(&dri2_surf->buffer->common);
+   dri2_surf->window->lockBuffer(dri2_surf->window, dri2_surf->buffer);
+#endif
+
+   return EGL_TRUE;
+}
+
+static EGLBoolean
+droid_window_enqueue_buffer(struct dri2_egl_surface *dri2_surf)
+{
+#if ANDROID_VERSION >= 0x0402
+   /* Queue the buffer without a sync fence. This informs the ANativeWindow
+    * that it may access the buffer immediately.
+    *
+    * From ANativeWindow::dequeueBuffer:
+    *
+    *    The fenceFd argument specifies a libsync fence file descriptor for
+    *    a fence that must signal before the buffer can be accessed.  If
+    *    the buffer can be accessed immediately then a value of -1 should
+    *    be used.  The caller must not use the file descriptor after it
+    *    is passed to queueBuffer, and the ANativeWindow implementation
+    *    is responsible for closing it.
+    */
+   int fence_fd = -1;
+   dri2_surf->window->queueBuffer(dri2_surf->window, dri2_surf->buffer,
+                                  fence_fd);
+#else
+   dri2_surf->window->queueBuffer(dri2_surf->window, dri2_surf->buffer);
+#endif
+
+   dri2_surf->buffer->common.decRef(&dri2_surf->buffer->common);
+   dri2_surf->buffer = NULL;
+
+   return EGL_TRUE;
+}
+
+static void
+droid_window_cancel_buffer(struct dri2_egl_surface *dri2_surf)
+{
+   /* no cancel buffer? */
+   droid_window_enqueue_buffer(dri2_surf);
+}
+
+static __DRIbuffer *
+droid_alloc_local_buffer(struct dri2_egl_surface *dri2_surf,
+                         unsigned int att, unsigned int format)
+{
+   struct dri2_egl_display *dri2_dpy =
+      dri2_egl_display(dri2_surf->base.Resource.Display);
+
+   if (att >= ARRAY_SIZE(dri2_surf->local_buffers))
+      return NULL;
+
+   if (!dri2_surf->local_buffers[att]) {
+      dri2_surf->local_buffers[att] =
+         dri2_dpy->dri2->allocateBuffer(dri2_dpy->dri_screen, att, format,
+               dri2_surf->base.Width, dri2_surf->base.Height);
+   }
+
+   return dri2_surf->local_buffers[att];
+}
+
+static void
+droid_free_local_buffers(struct dri2_egl_surface *dri2_surf)
+{
+   struct dri2_egl_display *dri2_dpy =
+      dri2_egl_display(dri2_surf->base.Resource.Display);
+   int i;
+
+   for (i = 0; i < ARRAY_SIZE(dri2_surf->local_buffers); i++) {
+      if (dri2_surf->local_buffers[i]) {
+         dri2_dpy->dri2->releaseBuffer(dri2_dpy->dri_screen,
+               dri2_surf->local_buffers[i]);
+         dri2_surf->local_buffers[i] = NULL;
+      }
+   }
+}
+
+static _EGLSurface *
+droid_create_surface(_EGLDriver *drv, _EGLDisplay *disp, EGLint type,
+		    _EGLConfig *conf, void *native_window,
+		    const EGLint *attrib_list)
+{
+   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
+   struct dri2_egl_config *dri2_conf = dri2_egl_config(conf);
+   struct dri2_egl_surface *dri2_surf;
+   struct ANativeWindow *window = native_window;
+
+   dri2_surf = calloc(1, sizeof *dri2_surf);
+   if (!dri2_surf) {
+      _eglError(EGL_BAD_ALLOC, "droid_create_surface");
+      return NULL;
+   }
+
+   if (!_eglInitSurface(&dri2_surf->base, disp, type, conf, attrib_list))
+      goto cleanup_surface;
+
+   if (type == EGL_WINDOW_BIT) {
+      int format;
+
+      if (!window || window->common.magic != ANDROID_NATIVE_WINDOW_MAGIC) {
+         _eglError(EGL_BAD_NATIVE_WINDOW, "droid_create_surface");
+         goto cleanup_surface;
+      }
+      if (window->query(window, NATIVE_WINDOW_FORMAT, &format)) {
+         _eglError(EGL_BAD_NATIVE_WINDOW, "droid_create_surface");
+         goto cleanup_surface;
+      }
+
+      if (format != dri2_conf->base.NativeVisualID) {
+         _eglLog(_EGL_WARNING, "Native format mismatch: 0x%x != 0x%x",
+               format, dri2_conf->base.NativeVisualID);
+      }
+
+      window->query(window, NATIVE_WINDOW_WIDTH, &dri2_surf->base.Width);
+      window->query(window, NATIVE_WINDOW_HEIGHT, &dri2_surf->base.Height);
+   }
+
+   dri2_surf->dri_drawable =
+      (*dri2_dpy->dri2->createNewDrawable)(dri2_dpy->dri_screen,
+					   dri2_conf->dri_double_config,
+                                           dri2_surf);
+   if (dri2_surf->dri_drawable == NULL) {
+      _eglError(EGL_BAD_ALLOC, "dri2->createNewDrawable");
+      goto cleanup_surface;
+   }
+
+   if (window) {
+      window->common.incRef(&window->common);
+      dri2_surf->window = window;
+   }
+
+   return &dri2_surf->base;
+
+cleanup_surface:
+   free(dri2_surf);
+
+   return NULL;
+}
+
+static _EGLSurface *
+droid_create_window_surface(_EGLDriver *drv, _EGLDisplay *disp,
+                            _EGLConfig *conf, void *native_window,
+                            const EGLint *attrib_list)
+{
+   return droid_create_surface(drv, disp, EGL_WINDOW_BIT, conf,
+                               native_window, attrib_list);
+}
+
+static _EGLSurface *
+droid_create_pbuffer_surface(_EGLDriver *drv, _EGLDisplay *disp,
+			    _EGLConfig *conf, const EGLint *attrib_list)
+{
+   return droid_create_surface(drv, disp, EGL_PBUFFER_BIT, conf,
+			      NULL, attrib_list);
+}
+
+static EGLBoolean
+droid_destroy_surface(_EGLDriver *drv, _EGLDisplay *disp, _EGLSurface *surf)
+{
+   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
+   struct dri2_egl_surface *dri2_surf = dri2_egl_surface(surf);
+
+   if (!_eglPutSurface(surf))
+      return EGL_TRUE;
+
+   droid_free_local_buffers(dri2_surf);
+
+   if (dri2_surf->base.Type == EGL_WINDOW_BIT) {
+      if (dri2_surf->buffer)
+         droid_window_cancel_buffer(dri2_surf);
+
+      dri2_surf->window->common.decRef(&dri2_surf->window->common);
+   }
+
+   (*dri2_dpy->core->destroyDrawable)(dri2_surf->dri_drawable);
+
+   free(dri2_surf);
+
+   return EGL_TRUE;
+}
+
+static EGLBoolean
+droid_swap_buffers(_EGLDriver *drv, _EGLDisplay *disp, _EGLSurface *draw)
+{
+   struct dri2_egl_driver *dri2_drv = dri2_egl_driver(drv);
+   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
+   struct dri2_egl_surface *dri2_surf = dri2_egl_surface(draw);
+   _EGLContext *ctx;
+
+   if (dri2_surf->base.Type != EGL_WINDOW_BIT)
+      return EGL_TRUE;
+
+   if (dri2_drv->glFlush) {
+      ctx = _eglGetCurrentContext();
+      if (ctx && ctx->DrawSurface == &dri2_surf->base)
+         dri2_drv->glFlush();
+   }
+
+   dri2_flush_drawable_for_swapbuffers(disp, draw);
+
+   if (dri2_surf->buffer)
+      droid_window_enqueue_buffer(dri2_surf);
+
+   (*dri2_dpy->flush->invalidate)(dri2_surf->dri_drawable);
+
+   return EGL_TRUE;
+}
+
+static _EGLImage *
+dri2_create_image_android_native_buffer(_EGLDisplay *disp, _EGLContext *ctx,
+                                        struct ANativeWindowBuffer *buf)
+{
+   struct dri2_egl_display *dri2_dpy = dri2_egl_display(disp);
+   struct dri2_egl_image *dri2_img;
+   int name;
+   EGLint format;
+
+   if (ctx != NULL) {
+      /* From the EGL_ANDROID_image_native_buffer spec:
+       *
+       *     * If <target> is EGL_NATIVE_BUFFER_ANDROID and <ctx> is not
+       *       EGL_NO_CONTEXT, the error EGL_BAD_CONTEXT is generated.
+       */
+      _eglError(EGL_BAD_CONTEXT, "eglCreateEGLImageKHR: for "
+                "EGL_NATIVE_BUFFER_ANDROID, the context must be "
+                "EGL_NO_CONTEXT");
+      return NULL;
+   }
+
+   if (!buf || buf->common.magic != ANDROID_NATIVE_BUFFER_MAGIC ||
+       buf->common.version != sizeof(*buf)) {
+      _eglError(EGL_BAD_PARAMETER, "eglCreateEGLImageKHR");
+      return NULL;
+   }
+
+   name = get_native_buffer_name(buf);
+   if (!name) {
+      _eglError(EGL_BAD_PARAMETER, "eglCreateEGLImageKHR");
+      return NULL;
+   }
+
+   /* see the table in droid_add_configs_for_visuals */
+   switch (buf->format) {
+   case HAL_PIXEL_FORMAT_BGRA_8888:
+      format = __DRI_IMAGE_FORMAT_ARGB8888;
+      break;
+   case HAL_PIXEL_FORMAT_RGB_565:
+      format = __DRI_IMAGE_FORMAT_RGB565;
+      break;
+   case HAL_PIXEL_FORMAT_RGBA_8888:
+      format = __DRI_IMAGE_FORMAT_ABGR8888;
+      break;
+   case HAL_PIXEL_FORMAT_RGBX_8888:
+      format = __DRI_IMAGE_FORMAT_XBGR8888;
+      break;
+   case HAL_PIXEL_FORMAT_RGB_888:
+      /* unsupported */
+   default:
+      _eglLog(_EGL_WARNING, "unsupported native buffer format 0x%x", buf->format);
+      return NULL;
+      break;
+   }
+
+   dri2_img = calloc(1, sizeof(*dri2_img));
+   if (!dri2_img) {
+      _eglError(EGL_BAD_ALLOC, "droid_create_image_mesa_drm");
+      return NULL;
+   }
+
+   if (!_eglInitImage(&dri2_img->base, disp)) {
+      free(dri2_img);
+      return NULL;
+   }
+
+   dri2_img->dri_image =
+      dri2_dpy->image->createImageFromName(dri2_dpy->dri_screen,
+					   buf->width,
+					   buf->height,
+					   format,
+					   name,
+					   buf->stride,
+					   dri2_img);
+   if (!dri2_img->dri_image) {
+      free(dri2_img);
+      _eglError(EGL_BAD_ALLOC, "droid_create_image_mesa_drm");
+      return NULL;
+   }
+
+   return &dri2_img->base;
+}
+
+static _EGLImage *
+droid_create_image_khr(_EGLDriver *drv, _EGLDisplay *disp,
+		       _EGLContext *ctx, EGLenum target,
+		       EGLClientBuffer buffer, const EGLint *attr_list)
+{
+   switch (target) {
+   case EGL_NATIVE_BUFFER_ANDROID:
+      return dri2_create_image_android_native_buffer(disp, ctx,
+            (struct ANativeWindowBuffer *) buffer);
+   default:
+      return dri2_create_image_khr(drv, disp, ctx, target, buffer, attr_list);
+   }
+}
+
+static void
+droid_flush_front_buffer(__DRIdrawable * driDrawable, void *loaderPrivate)
+{
+}
+
+static int
+droid_get_buffers_parse_attachments(struct dri2_egl_surface *dri2_surf,
+                                    unsigned int *attachments, int count)
+{
+   int num_buffers = 0, i;
+
+   /* fill dri2_surf->buffers */
+   for (i = 0; i < count * 2; i += 2) {
+      __DRIbuffer *buf, *local;
+
+      assert(num_buffers < ARRAY_SIZE(dri2_surf->buffers));
+      buf = &dri2_surf->buffers[num_buffers];
+
+      switch (attachments[i]) {
+      case __DRI_BUFFER_BACK_LEFT:
+         if (dri2_surf->base.Type == EGL_WINDOW_BIT) {
+            buf->attachment = attachments[i];
+            buf->name = get_native_buffer_name(dri2_surf->buffer);
+            buf->cpp = get_format_bpp(dri2_surf->buffer->format);
+            buf->pitch = dri2_surf->buffer->stride * buf->cpp;
+            buf->flags = 0;
+
+            if (buf->name)
+               num_buffers++;
+
+            break;
+         }
+         /* fall through for pbuffers */
+      case __DRI_BUFFER_DEPTH:
+      case __DRI_BUFFER_STENCIL:
+      case __DRI_BUFFER_ACCUM:
+      case __DRI_BUFFER_DEPTH_STENCIL:
+      case __DRI_BUFFER_HIZ:
+         local = droid_alloc_local_buffer(dri2_surf,
+               attachments[i], attachments[i + 1]);
+
+         if (local) {
+            *buf = *local;
+            num_buffers++;
+         }
+         break;
+      case __DRI_BUFFER_FRONT_LEFT:
+      case __DRI_BUFFER_FRONT_RIGHT:
+      case __DRI_BUFFER_FAKE_FRONT_LEFT:
+      case __DRI_BUFFER_FAKE_FRONT_RIGHT:
+      case __DRI_BUFFER_BACK_RIGHT:
+      default:
+         /* no front or right buffers */
+         break;
+      }
+   }
+
+   return num_buffers;
+}
+
+static __DRIbuffer *
+droid_get_buffers_with_format(__DRIdrawable * driDrawable,
+			     int *width, int *height,
+			     unsigned int *attachments, int count,
+			     int *out_count, void *loaderPrivate)
+{
+   struct dri2_egl_surface *dri2_surf = loaderPrivate;
+   struct dri2_egl_display *dri2_dpy =
+      dri2_egl_display(dri2_surf->base.Resource.Display);
+   int i;
+
+   if (dri2_surf->base.Type == EGL_WINDOW_BIT) {
+      /* try to dequeue the next back buffer */
+      if (!dri2_surf->buffer && !droid_window_dequeue_buffer(dri2_surf))
+         return NULL;
+
+      /* free outdated buffers and update the surface size */
+      if (dri2_surf->base.Width != dri2_surf->buffer->width ||
+          dri2_surf->base.Height != dri2_surf->buffer->height) {
+         droid_free_local_buffers(dri2_surf);
+         dri2_surf->base.Width = dri2_surf->buffer->width;
+         dri2_surf->base.Height = dri2_surf->buffer->height;
+      }
+   }
+
+   dri2_surf->buffer_count =
+      droid_get_buffers_parse_attachments(dri2_surf, attachments, count);
+
+   if (width)
+      *width = dri2_surf->base.Width;
+   if (height)
+      *height = dri2_surf->base.Height;
+
+   *out_count = dri2_surf->buffer_count;;
+
+   return dri2_surf->buffers;
+}
+
+static EGLBoolean
+droid_add_configs_for_visuals(_EGLDriver *drv, _EGLDisplay *dpy)
+{
+   struct dri2_egl_display *dri2_dpy = dri2_egl_display(dpy);
+   const struct {
+      int format;
+      unsigned int rgba_masks[4];
+   } visuals[] = {
+      { HAL_PIXEL_FORMAT_RGBA_8888, { 0xff, 0xff00, 0xff0000, 0xff000000 } },
+      { HAL_PIXEL_FORMAT_RGBX_8888, { 0xff, 0xff00, 0xff0000, 0x0 } },
+      { HAL_PIXEL_FORMAT_RGB_888,   { 0xff, 0xff00, 0xff0000, 0x0 } },
+      { HAL_PIXEL_FORMAT_RGB_565,   { 0xf800, 0x7e0, 0x1f, 0x0 } },
+      { HAL_PIXEL_FORMAT_BGRA_8888, { 0xff0000, 0xff00, 0xff, 0xff000000 } },
+      { 0, 0, { 0, 0, 0, 0 } }
+   };
+   int count, i, j;
+
+   count = 0;
+   for (i = 0; visuals[i].format; i++) {
+      int format_count = 0;
+
+      for (j = 0; dri2_dpy->driver_configs[j]; j++) {
+         const EGLint surface_type = EGL_WINDOW_BIT | EGL_PBUFFER_BIT;
+         struct dri2_egl_config *dri2_conf;
+         unsigned int double_buffered = 0;
+
+         dri2_dpy->core->getConfigAttrib(dri2_dpy->driver_configs[j],
+            __DRI_ATTRIB_DOUBLE_BUFFER, &double_buffered);
+
+         /* support only double buffered configs */
+         if (!double_buffered)
+            continue;
+
+         dri2_conf = dri2_add_config(dpy, dri2_dpy->driver_configs[j],
+               count + 1, surface_type, NULL, visuals[i].rgba_masks);
+         if (dri2_conf) {
+            dri2_conf->base.NativeVisualID = visuals[i].format;
+            dri2_conf->base.NativeVisualType = visuals[i].format;
+            count++;
+            format_count++;
+         }
+      }
+
+      if (!format_count) {
+         _eglLog(_EGL_DEBUG, "No DRI config supports native format 0x%x",
+               visuals[i].format);
+      }
+   }
+
+   /* post-process configs */
+   for (i = 0; i < dpy->Configs->Size; i++) {
+      struct dri2_egl_config *dri2_conf = dri2_egl_config(dpy->Configs->Elements[i]);
+
+      /* there is no front buffer so no OpenGL */
+      dri2_conf->base.RenderableType &= ~EGL_OPENGL_BIT;
+      dri2_conf->base.Conformant &= ~EGL_OPENGL_BIT;
+   }
+
+   return (count != 0);
+}
+
+static int
+droid_open_device(void)
+{
+   const hw_module_t *mod;
+   int fd = -1, err;
+
+   err = hw_get_module(GRALLOC_HARDWARE_MODULE_ID, &mod);
+   if (!err) {
+      const gralloc_module_t *gr = (gralloc_module_t *) mod;
+
+      err = -EINVAL;
+      if (gr->perform)
+         err = gr->perform(gr, GRALLOC_MODULE_PERFORM_GET_DRM_FD, &fd);
+   }
+   if (err || fd < 0) {
+      _eglLog(_EGL_WARNING, "fail to get drm fd");
+      fd = -1;
+   }
+
+   return (fd >= 0) ? dup(fd) : -1;
+}
+
+/* support versions < JellyBean */
+#ifndef ALOGW
+#define ALOGW LOGW
+#endif
+#ifndef ALOGD
+#define ALOGD LOGD
+#endif
+#ifndef ALOGI
+#define ALOGI LOGI
+#endif
+
+static void
+droid_log(EGLint level, const char *msg)
+{
+   switch (level) {
+   case _EGL_DEBUG:
+      ALOGD("%s", msg);
+      break;
+   case _EGL_INFO:
+      ALOGI("%s", msg);
+      break;
+   case _EGL_WARNING:
+      ALOGW("%s", msg);
+      break;
+   case _EGL_FATAL:
+      LOG_FATAL("%s", msg);
+      break;
+   default:
+      break;
+   }
+}
+
+static struct dri2_egl_display_vtbl droid_display_vtbl = {
+   .authenticate = NULL,
+   .create_window_surface = droid_create_window_surface,
+   .create_pixmap_surface = dri2_fallback_create_pixmap_surface,
+   .create_pbuffer_surface = droid_create_pbuffer_surface,
+   .destroy_surface = droid_destroy_surface,
+   .create_image = droid_create_image_khr,
+   .swap_interval = dri2_fallback_swap_interval,
+   .swap_buffers = droid_swap_buffers,
+   .swap_buffers_with_damage = dri2_fallback_swap_buffers_with_damage,
+   .swap_buffers_region = dri2_fallback_swap_buffers_region,
+   .post_sub_buffer = dri2_fallback_post_sub_buffer,
+   .copy_buffers = dri2_fallback_copy_buffers,
+   .query_buffer_age = dri2_fallback_query_buffer_age,
+   .create_wayland_buffer_from_image = dri2_fallback_create_wayland_buffer_from_image,
+   .get_sync_values = dri2_fallback_get_sync_values,
+};
+
+EGLBoolean
+dri2_initialize_android(_EGLDriver *drv, _EGLDisplay *dpy)
+{
+   struct dri2_egl_display *dri2_dpy;
+   const char *err;
+
+   _eglSetLogProc(droid_log);
+
+   loader_set_logger(_eglLog);
+
+   dri2_dpy = calloc(1, sizeof(*dri2_dpy));
+   if (!dri2_dpy)
+      return _eglError(EGL_BAD_ALLOC, "eglInitialize");
+
+   dpy->DriverData = (void *) dri2_dpy;
+
+   dri2_dpy->fd = droid_open_device();
+   if (dri2_dpy->fd < 0) {
+      err = "DRI2: failed to open device";
+      goto cleanup_display;
+   }
+
+   dri2_dpy->driver_name = loader_get_driver_for_fd(dri2_dpy->fd, 0);
+   if (dri2_dpy->driver_name == NULL) {
+      err = "DRI2: failed to get driver name";
+      goto cleanup_device;
+   }
+
+   if (!dri2_load_driver(dpy)) {
+      err = "DRI2: failed to load driver";
+      goto cleanup_driver_name;
+   }
+
+   dri2_dpy->dri2_loader_extension.base.name = __DRI_DRI2_LOADER;
+   dri2_dpy->dri2_loader_extension.base.version = 3;
+   dri2_dpy->dri2_loader_extension.getBuffers = NULL;
+   dri2_dpy->dri2_loader_extension.flushFrontBuffer = droid_flush_front_buffer;
+   dri2_dpy->dri2_loader_extension.getBuffersWithFormat =
+      droid_get_buffers_with_format;
+
+   dri2_dpy->extensions[0] = &dri2_dpy->dri2_loader_extension.base;
+   dri2_dpy->extensions[1] = &image_lookup_extension.base;
+   dri2_dpy->extensions[2] = &use_invalidate.base;
+   dri2_dpy->extensions[3] = NULL;
+
+   if (!dri2_create_screen(dpy)) {
+      err = "DRI2: failed to create screen";
+      goto cleanup_driver;
+   }
+
+   if (!droid_add_configs_for_visuals(drv, dpy)) {
+      err = "DRI2: failed to add configs";
+      goto cleanup_screen;
+   }
+
+   dpy->Extensions.ANDROID_image_native_buffer = EGL_TRUE;
+   dpy->Extensions.KHR_image_base = EGL_TRUE;
+
+   /* we're supporting EGL 1.4 */
+   dpy->VersionMajor = 1;
+   dpy->VersionMinor = 4;
+
+   /* Fill vtbl last to prevent accidentally calling virtual function during
+    * initialization.
+    */
+   dri2_dpy->vtbl = &droid_display_vtbl;
+
+   return EGL_TRUE;
+
+cleanup_screen:
+   dri2_dpy->core->destroyScreen(dri2_dpy->dri_screen);
+cleanup_driver:
+   dlclose(dri2_dpy->driver);
+cleanup_driver_name:
+   free(dri2_dpy->driver_name);
+cleanup_device:
+   close(dri2_dpy->fd);
+cleanup_display:
+   free(dri2_dpy);
+
+   return _eglError(EGL_NOT_INITIALIZED, err);
+}
--- mesa-10.5.2.orig/src/egl/main/Android.mk
+++ mesa-10.5.2/src/egl/main/Android.mk
@@ -0,0 +1,162 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# Android.mk for libGLES_mesa
+
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/Makefile.sources
+
+SOURCES := \
+	${LIBEGL_C_FILES}
+
+# ---------------------------------------
+# Build libGLES_mesa
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(SOURCES)
+
+LOCAL_CFLAGS := \
+	-D_EGL_NATIVE_PLATFORM=_EGL_PLATFORM_ANDROID \
+	-D_EGL_DRIVER_SEARCH_DIR=\"/system/lib/egl\" \
+	-D_EGL_OS_UNIX=1
+
+LOCAL_STATIC_LIBRARIES :=
+
+LOCAL_SHARED_LIBRARIES := \
+	libglapi \
+	libdl \
+	libhardware \
+	liblog \
+	libcutils \
+	libgralloc_drm \
+
+ifeq ($(shell echo "$(MESA_ANDROID_VERSION) >= 4.2" | bc),1)
+LOCAL_SHARED_LIBRARIES += libsync
+endif
+
+# add libdrm if there are hardware drivers
+ifneq ($(MESA_GPU_DRIVERS),swrast)
+LOCAL_SHARED_LIBRARIES += libdrm
+endif
+
+ifeq ($(strip $(MESA_BUILD_CLASSIC)),true)
+LOCAL_CFLAGS += -D_EGL_BUILT_IN_DRIVER_DRI2
+LOCAL_STATIC_LIBRARIES += libmesa_egl_dri2
+
+# require i915_dri and/or i965_dri
+LOCAL_REQUIRED_MODULES += \
+	$(addsuffix _dri, $(filter i915 i965, $(MESA_GPU_DRIVERS)))
+endif # MESA_BUILD_CLASSIC
+
+ifeq ($(strip $(MESA_BUILD_GALLIUM)),true)
+
+LOCAL_CFLAGS += -D_EGL_BUILT_IN_DRIVER_GALLIUM
+
+gallium_DRIVERS :=
+
+# swrast
+gallium_DRIVERS += libmesa_pipe_softpipe libmesa_winsys_sw_android
+
+# freedreno
+ifneq ($(filter freedreno, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_winsys_freedreno libmesa_pipe_freedreno
+LOCAL_SHARED_LIBRARIES += libdrm_freedreno
+endif
+
+# i915g
+ifneq ($(filter i915g, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_winsys_i915 libmesa_pipe_i915
+LOCAL_SHARED_LIBRARIES += libdrm_intel
+endif
+
+# ilo
+ifneq ($(filter ilo, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_winsys_intel libmesa_pipe_ilo
+LOCAL_SHARED_LIBRARIES += libdrm_intel
+endif
+
+# nouveau
+ifneq ($(filter nouveau, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS +=  libmesa_winsys_nouveau libmesa_pipe_nouveau
+LOCAL_SHARED_LIBRARIES += libdrm_nouveau
+LOCAL_SHARED_LIBRARIES += libstlport
+endif
+
+# r300g/r600g/radeonsi
+ifneq ($(filter r300g r600g radeonsi, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_winsys_radeon
+LOCAL_SHARED_LIBRARIES += libdrm_radeon
+ifneq ($(filter r300g, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_pipe_r300
+endif # r300g
+ifneq ($(filter r600g radeonsi, $(MESA_GPU_DRIVERS)),)
+ifneq ($(filter r600g, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_pipe_r600
+LOCAL_SHARED_LIBRARIES += libstlport
+endif # r600g
+ifneq ($(filter radeonsi, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_pipe_radeonsi
+endif # radeonsi
+gallium_DRIVERS += libmesa_pipe_radeon
+endif # r600g || radeonsi
+endif # r300g || r600g || radeonsi
+
+# vmwgfx
+ifneq ($(filter vmwgfx, $(MESA_GPU_DRIVERS)),)
+gallium_DRIVERS += libmesa_winsys_svga libmesa_pipe_svga
+endif
+
+#
+# Notes about the order here:
+#
+#  * libmesa_st_egl depends on libmesa_winsys_sw_android in $(gallium_DRIVERS)
+#  * libmesa_pipe_r300 in $(gallium_DRIVERS) depends on libmesa_st_mesa and
+#    libmesa_glsl
+#  * libmesa_st_mesa depends on libmesa_glsl
+#  * libmesa_glsl depends on libmesa_glsl_utils
+#
+LOCAL_STATIC_LIBRARIES := \
+	libmesa_egl_gallium \
+	libmesa_st_egl \
+	$(gallium_DRIVERS) \
+	libmesa_st_mesa \
+	libmesa_util \
+	libmesa_glsl \
+	libmesa_glsl_utils \
+	libmesa_gallium \
+	$(LOCAL_STATIC_LIBRARIES)
+
+endif # MESA_BUILD_GALLIUM
+
+LOCAL_STATIC_LIBRARIES := \
+	$(LOCAL_STATIC_LIBRARIES) \
+	libmesa_loader
+
+LOCAL_MODULE := libGLES_mesa
+LOCAL_MODULE_PATH := $(TARGET_OUT_SHARED_LIBRARIES)/egl
+
+include $(MESA_COMMON_MK)
+include $(BUILD_SHARED_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/Android.common.mk
+++ mesa-10.5.2/src/gallium/Android.common.mk
@@ -0,0 +1,32 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# src/gallium/Android.common.mk
+
+LOCAL_C_INCLUDES += \
+	$(GALLIUM_TOP)/include \
+	$(GALLIUM_TOP)/auxiliary \
+	$(GALLIUM_TOP)/winsys \
+	$(GALLIUM_TOP)/drivers
+
+include $(MESA_COMMON_MK)
--- mesa-10.5.2.orig/src/gallium/Android.mk
+++ mesa-10.5.2/src/gallium/Android.mk
@@ -0,0 +1,88 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# src/gallium/Android.mk
+
+GALLIUM_TOP := $(call my-dir)
+GALLIUM_COMMON_MK := $(GALLIUM_TOP)/Android.common.mk
+
+SUBDIRS := auxiliary
+
+#
+# Gallium drivers and their respective winsys
+#
+
+# swrast
+SUBDIRS += winsys/sw/android drivers/softpipe
+
+# freedreno
+ifneq ($(filter freedreno, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += winsys/freedreno/drm drivers/freedreno
+endif
+
+# i915g
+ifneq ($(filter i915g, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += winsys/i915/drm drivers/i915
+endif
+
+# ilo
+ifneq ($(filter ilo, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += winsys/intel/drm drivers/ilo
+endif
+
+# nouveau
+ifneq ($(filter nouveau, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += \
+	winsys/nouveau/drm \
+	drivers/nouveau
+endif
+
+# r300g/r600g/radeonsi
+ifneq ($(filter r300g r600g radeonsi, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += winsys/radeon/drm
+ifneq ($(filter r300g, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += drivers/r300
+endif
+ifneq ($(filter r600g radeonsi, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += drivers/radeon
+ifneq ($(filter r600g, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += drivers/r600
+endif
+ifneq ($(filter radeonsi, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += drivers/radeonsi
+endif
+endif
+endif
+
+# vmwgfx
+ifneq ($(filter vmwgfx, $(MESA_GPU_DRIVERS)),)
+SUBDIRS += winsys/svga/drm drivers/svga
+endif
+
+#
+# Gallium state trackers and their users (targets)
+#
+SUBDIRS += state_trackers/egl targets/egl-static
+
+mkfiles := $(patsubst %,$(GALLIUM_TOP)/%/Android.mk,$(SUBDIRS))
+include $(mkfiles)
--- mesa-10.5.2.orig/src/gallium/auxiliary/Android.mk
+++ mesa-10.5.2/src/gallium/auxiliary/Android.mk
@@ -0,0 +1,58 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES and GENERATED_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(C_SOURCES) \
+	$(VL_STUB_SOURCES)
+
+LOCAL_C_INCLUDES := \
+	$(GALLIUM_TOP)/auxiliary/util \
+	$(MESA_TOP)/src
+
+LOCAL_MODULE := libmesa_gallium
+
+# generate sources
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+intermediates := $(call local-intermediates-dir)
+LOCAL_GENERATED_SOURCES := $(addprefix $(intermediates)/, $(GENERATED_SOURCES))
+
+$(LOCAL_GENERATED_SOURCES): PRIVATE_PYTHON := $(MESA_PYTHON2)
+$(LOCAL_GENERATED_SOURCES): PRIVATE_CUSTOM_TOOL = $(PRIVATE_PYTHON) $^ > $@
+
+$(intermediates)/indices/u_indices_gen.c \
+$(intermediates)/indices/u_unfilled_gen.c \
+$(intermediates)/util/u_format_srgb.c: $(intermediates)/%.c: $(LOCAL_PATH)/%.py
+	$(transform-generated-source)
+
+$(intermediates)/util/u_format_table.c: $(intermediates)/%.c: $(LOCAL_PATH)/%.py $(LOCAL_PATH)/util/u_format.csv
+	$(transform-generated-source)
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/auxiliary/gallivm/f.cpp
+++ mesa-10.5.2/src/gallium/auxiliary/gallivm/f.cpp
@@ -0,0 +1,101 @@
+/**************************************************************************
+ *
+ * (C) Copyright VMware, Inc 2010.
+ * (C) Copyright John Maddock 2006.
+ * Use, modification and distribution are subject to the
+ * Boost Software License, Version 1.0. (See accompanying file
+ * LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
+ *
+ **************************************************************************/
+
+
+/*
+ * This file allows to compute the minimax polynomial coefficients we use
+ * for fast exp2/log2.
+ *
+ * How to use this source:
+ *
+ * - Download and build the NTL library from
+ *   http://shoup.net/ntl/download.html , or install libntl-dev package if on
+ *   Debian.
+ *
+ * - Download boost source code matching to your distro. 
+ *
+ * - Goto libs/math/minimax and replace f.cpp with this file.
+ *
+ * - Build as
+ *
+ *   g++ -o minimax -I /path/to/ntl/include main.cpp f.cpp /path/to/ntl/src/ntl.a
+ *
+ * - Run as 
+ *
+ *    ./minimax
+ *
+ * - For example, to compute exp2 5th order polynomial between [0, 1] do:
+ *
+ *    variant 0
+ *    range 0 1
+ *    order 5 0
+ *    step 200
+ *    info
+ *
+ *  and take the coefficients from the P = { ... } array.
+ *
+ * - To compute log2 4th order polynomial between [0, 1/9] do:
+ *
+ *    variant 1
+ *    range 0 0.111111112
+ *    order 4 0
+ *    step 200
+ *    info
+ *
+ * - For more info see
+ * http://www.boost.org/doc/libs/1_47_0/libs/math/doc/sf_and_dist/html/math_toolkit/toolkit/internals2/minimax.html
+ */
+
+#define L22
+#include <boost/math/bindings/rr.hpp>
+#include <boost/math/tools/polynomial.hpp>
+
+#include <cmath>
+
+boost::math::ntl::RR exp2(const boost::math::ntl::RR& x)
+{
+      return exp(x*log(2.0));
+}
+
+boost::math::ntl::RR log2(const boost::math::ntl::RR& x)
+{
+      return log(x)/log(2.0);
+}
+
+boost::math::ntl::RR f(const boost::math::ntl::RR& x, int variant)
+{
+   switch(variant)
+   {
+   case 0:
+      return exp2(x);
+
+   case 1:
+      return log2((1.0 + sqrt(x))/(1.0 - sqrt(x)))/sqrt(x);
+   }
+
+   return 0;
+}
+
+
+void show_extra(
+   const boost::math::tools::polynomial<boost::math::ntl::RR>& n, 
+   const boost::math::tools::polynomial<boost::math::ntl::RR>& d, 
+   const boost::math::ntl::RR& x_offset, 
+   const boost::math::ntl::RR& y_offset, 
+   int variant)
+{
+   switch(variant)
+   {
+   default:
+      // do nothing here...
+      ;
+   }
+}
+
--- mesa-10.5.2.orig/src/gallium/drivers/freedreno/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/freedreno/.dir-locals.el
@@ -0,0 +1,8 @@
+((prog-mode
+  (indent-tabs-mode . true)
+  (tab-width . 4)
+  (c-basic-offset . 4)
+  (c-file-style . "k&r")
+  (fill-column . 78)
+  )
+ )
--- mesa-10.5.2.orig/src/gallium/drivers/freedreno/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/freedreno/Android.mk
@@ -0,0 +1,44 @@
+# Copyright (C) 2014 Emil Velikov <emil.l.velikov@gmail.com>
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(C_SOURCES) \
+	$(a2xx_SOURCES) \
+	$(a3xx_SOURCES)
+
+LOCAL_CFLAGS := \
+	-Wno-packed-bitfield-compat
+
+LOCAL_C_INCLUDES := \
+	$(LOCAL_PATH)/ir3 \
+	$(TARGET_OUT_HEADERS)/libdrm \
+	$(TARGET_OUT_HEADERS)/freedreno
+
+LOCAL_MODULE := libmesa_pipe_freedreno
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/i915/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/i915/Android.mk
@@ -0,0 +1,36 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_MODULE := libmesa_pipe_i915
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/ilo/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/ilo/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2013 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_C_INCLUDES := \
+	$(LOCAL_PATH)/include
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_MODULE := libmesa_pipe_ilo
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/nouveau/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/nouveau/Android.mk
@@ -0,0 +1,46 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(C_SOURCES) \
+	$(NV30_C_SOURCES) \
+	$(NV50_CODEGEN_SOURCES) \
+	$(NV50_C_SOURCES) \
+	$(NVC0_CODEGEN_SOURCES) \
+	$(NVC0_C_SOURCES)
+
+LOCAL_C_INCLUDES := \
+	$(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_pipe_nouveau
+
+include external/stlport/libstlport.mk
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/r300/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/r300/Android.mk
@@ -0,0 +1,43 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/glsl \
+	$(MESA_TOP)/src/mesa \
+	$(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_pipe_r300
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
--- mesa-10.5.2.orig/src/gallium/drivers/r600/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/r600/.dir-locals.el
@@ -0,0 +1,11 @@
+((prog-mode
+  (indent-tabs-mode . true)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ )
--- mesa-10.5.2.orig/src/gallium/drivers/r600/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/r600/Android.mk
@@ -0,0 +1,39 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES) $(CXX_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_pipe_r600
+
+include external/stlport/libstlport.mk
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/radeon/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/radeon/.dir-locals.el
@@ -0,0 +1,11 @@
+((prog-mode
+  (indent-tabs-mode . true)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ )
--- mesa-10.5.2.orig/src/gallium/drivers/radeon/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/radeon/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_pipe_radeon
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/radeonsi/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/radeonsi/.dir-locals.el
@@ -0,0 +1,11 @@
+((prog-mode
+  (indent-tabs-mode . true)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ )
--- mesa-10.5.2.orig/src/gallium/drivers/radeonsi/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/radeonsi/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_pipe_radeonsi
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/softpipe/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/softpipe/Android.mk
@@ -0,0 +1,37 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(C_SOURCES)
+
+LOCAL_MODULE := libmesa_pipe_softpipe
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/svga/Android.mk
+++ mesa-10.5.2/src/gallium/drivers/svga/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(LOCAL_PATH)/include
+
+LOCAL_MODULE := libmesa_pipe_svga
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/drivers/vc4/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/vc4/.dir-locals.el
@@ -0,0 +1,12 @@
+((prog-mode
+  (indent-tabs-mode . nil)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ (makefile-mode (indent-tabs-mode . t))
+ )
--- mesa-10.5.2.orig/src/gallium/drivers/vc4/kernel/.dir-locals.el
+++ mesa-10.5.2/src/gallium/drivers/vc4/kernel/.dir-locals.el
@@ -0,0 +1,12 @@
+((prog-mode
+  (indent-tabs-mode . t)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ (makefile-mode (indent-tabs-mode . t))
+ )
--- mesa-10.5.2.orig/src/gallium/winsys/freedreno/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/freedreno/drm/Android.mk
@@ -0,0 +1,37 @@
+# Copyright (C) 2014 Emil Velikov <emil.l.velikov@gmail.com>
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := \
+	$(TARGET_OUT_HEADERS)/libdrm \
+	$(TARGET_OUT_HEADERS)/freedreno
+
+LOCAL_MODULE := libmesa_winsys_freedreno
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/i915/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/i915/drm/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_winsys_i915
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/intel/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/intel/drm/Android.mk
@@ -0,0 +1,37 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2013 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_winsys_intel
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/nouveau/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/nouveau/drm/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_winsys_nouveau
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/radeon/.dir-locals.el
+++ mesa-10.5.2/src/gallium/winsys/radeon/.dir-locals.el
@@ -0,0 +1,12 @@
+((prog-mode
+  (indent-tabs-mode . nil)
+  (tab-width . 8)
+  (c-basic-offset . 4)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  (eval . (progn
+	    (c-set-offset 'innamespace '0)
+	    (c-set-offset 'inline-open '0)))
+  )
+ (makefile-mode (indent-tabs-mode . t))
+ )
--- mesa-10.5.2.orig/src/gallium/winsys/radeon/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/radeon/drm/Android.mk
@@ -0,0 +1,38 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_C_INCLUDES := $(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_winsys_radeon
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/svga/drm/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/svga/drm/Android.mk
@@ -0,0 +1,43 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+# get C_SOURCES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := $(C_SOURCES)
+
+LOCAL_CFLAGS := -D_FILE_OFFSET_BITS=64
+
+LOCAL_C_INCLUDES := \
+	$(GALLIUM_TOP)/drivers/svga \
+	$(GALLIUM_TOP)/drivers/svga/include \
+	$(TARGET_OUT_HEADERS)/libdrm
+
+LOCAL_MODULE := libmesa_winsys_svga
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/sw/android/Android.mk
+++ mesa-10.5.2/src/gallium/winsys/sw/android/Android.mk
@@ -0,0 +1,34 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	android_sw_winsys.cpp
+
+LOCAL_MODULE := libmesa_winsys_sw_android
+
+include $(GALLIUM_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/gallium/winsys/sw/android/android_sw_winsys.cpp
+++ mesa-10.5.2/src/gallium/winsys/sw/android/android_sw_winsys.cpp
@@ -0,0 +1,264 @@
+/*
+ * Mesa 3-D graphics library
+ *
+ * Copyright (C) 2010-2011 LunarG Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included
+ * in all copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Chia-I Wu <olv@lunarg.com>
+ */
+
+#include "pipe/p_compiler.h"
+#include "pipe/p_state.h"
+#include "util/u_memory.h"
+#include "util/u_format.h"
+#include "state_tracker/sw_winsys.h"
+
+#include <hardware/gralloc.h>
+#include <utils/Errors.h>
+
+#if ANDROID_VERSION < 0x0300
+#include <private/ui/sw_gralloc_handle.h>
+#endif
+
+#include "android_sw_winsys.h"
+
+struct android_sw_winsys
+{
+   struct sw_winsys base;
+
+   const gralloc_module_t *grmod;
+};
+
+struct android_sw_displaytarget
+{
+   buffer_handle_t handle;
+   int stride;
+   int width, height;
+   int usage; /* gralloc usage */
+
+   void *mapped;
+};
+
+static INLINE struct android_sw_winsys *
+android_sw_winsys(struct sw_winsys *ws)
+{
+   return (struct android_sw_winsys *) ws;
+}
+
+static INLINE struct android_sw_displaytarget *
+android_sw_displaytarget(struct sw_displaytarget *dt)
+{
+   return (struct android_sw_displaytarget *) dt;
+}
+
+namespace android {
+
+static void
+android_displaytarget_display(struct sw_winsys *ws,
+                              struct sw_displaytarget *dt,
+                              void *context_private,
+                              struct pipe_box *box)
+{
+}
+
+static struct sw_displaytarget *
+android_displaytarget_create(struct sw_winsys *ws,
+                             unsigned tex_usage,
+                             enum pipe_format format,
+                             unsigned width, unsigned height,
+                             unsigned alignment,
+                             unsigned *stride)
+{
+   return NULL;
+}
+
+static void
+android_displaytarget_destroy(struct sw_winsys *ws,
+                              struct sw_displaytarget *dt)
+{
+   struct android_sw_displaytarget *adt = android_sw_displaytarget(dt);
+
+   assert(!adt->mapped);
+   FREE(adt);
+}
+
+static void
+android_displaytarget_unmap(struct sw_winsys *ws,
+                            struct sw_displaytarget *dt)
+{
+   struct android_sw_winsys *droid = android_sw_winsys(ws);
+   struct android_sw_displaytarget *adt = android_sw_displaytarget(dt);
+
+#if ANDROID_VERSION < 0x0300
+   /* try sw_gralloc first */
+   if (adt->mapped && sw_gralloc_handle_t::validate(adt->handle) >= 0) {
+      adt->mapped = NULL;
+      return;
+   }
+#endif
+
+   if (adt->mapped) {
+      droid->grmod->unlock(droid->grmod, adt->handle);
+      adt->mapped = NULL;
+   }
+}
+
+static void *
+android_displaytarget_map(struct sw_winsys *ws,
+                          struct sw_displaytarget *dt,
+                          unsigned flags)
+{
+   struct android_sw_winsys *droid = android_sw_winsys(ws);
+   struct android_sw_displaytarget *adt = android_sw_displaytarget(dt);
+
+#if ANDROID_VERSION < 0x0300
+   /* try sw_gralloc first */
+   if (sw_gralloc_handle_t::validate(adt->handle) >= 0) {
+      const sw_gralloc_handle_t *swhandle =
+         reinterpret_cast<const sw_gralloc_handle_t *>(adt->handle);
+      adt->mapped = reinterpret_cast<void *>(swhandle->base);
+
+      return adt->mapped;
+   }
+#endif
+
+   if (!adt->mapped) {
+      /* lock the buffer for CPU access */
+      droid->grmod->lock(droid->grmod, adt->handle,
+            adt->usage, 0, 0, adt->width, adt->height, &adt->mapped);
+   }
+
+   return adt->mapped;
+}
+
+static struct sw_displaytarget *
+android_displaytarget_from_handle(struct sw_winsys *ws,
+                                  const struct pipe_resource *templ,
+                                  struct winsys_handle *whandle,
+                                  unsigned *stride)
+{
+   struct android_winsys_handle *ahandle =
+      (struct android_winsys_handle *) whandle;
+   struct android_sw_displaytarget *adt;
+
+   adt = CALLOC_STRUCT(android_sw_displaytarget);
+   if (!adt)
+      return NULL;
+
+   adt->handle = ahandle->handle;
+   adt->stride = ahandle->stride;
+   adt->width = templ->width0;
+   adt->height = templ->height0;
+
+   if (templ->bind & (PIPE_BIND_RENDER_TARGET | PIPE_BIND_TRANSFER_WRITE))
+      adt->usage |= GRALLOC_USAGE_SW_WRITE_OFTEN;
+   if (templ->bind & (PIPE_BIND_SAMPLER_VIEW | PIPE_BIND_TRANSFER_READ))
+      adt->usage |= GRALLOC_USAGE_SW_READ_OFTEN;
+
+   if (stride)
+      *stride = adt->stride;
+
+   return reinterpret_cast<struct sw_displaytarget *>(adt);
+}
+
+static boolean
+android_displaytarget_get_handle(struct sw_winsys *ws,
+                                 struct sw_displaytarget *dt,
+                                 struct winsys_handle *whandle)
+{
+   return FALSE;
+}
+
+static boolean
+android_is_displaytarget_format_supported(struct sw_winsys *ws,
+                                          unsigned tex_usage,
+                                          enum pipe_format format)
+{
+   struct android_sw_winsys *droid = android_sw_winsys(ws);
+   int fmt = -1;
+
+   switch (format) {
+   case PIPE_FORMAT_R8G8B8A8_UNORM:
+      fmt = HAL_PIXEL_FORMAT_RGBA_8888;
+      break;
+   case PIPE_FORMAT_R8G8B8X8_UNORM:
+      fmt = HAL_PIXEL_FORMAT_RGBX_8888;
+      break;
+   case PIPE_FORMAT_R8G8B8_UNORM:
+      fmt = HAL_PIXEL_FORMAT_RGB_888;
+      break;
+   case PIPE_FORMAT_B5G6R5_UNORM:
+      fmt = HAL_PIXEL_FORMAT_RGB_565;
+      break;
+   case PIPE_FORMAT_B8G8R8A8_UNORM:
+      fmt = HAL_PIXEL_FORMAT_BGRA_8888;
+      break;
+   default:
+      break;
+   }
+
+   return (fmt != -1);
+}
+
+static void
+android_destroy(struct sw_winsys *ws)
+{
+   struct android_sw_winsys *droid = android_sw_winsys(ws);
+
+   FREE(droid);
+}
+
+}; /* namespace android */
+
+using namespace android;
+
+struct sw_winsys *
+android_create_sw_winsys(void)
+{
+   struct android_sw_winsys *droid;
+   const hw_module_t *mod;
+
+   droid = CALLOC_STRUCT(android_sw_winsys);
+   if (!droid)
+      return NULL;
+
+   if (hw_get_module(GRALLOC_HARDWARE_MODULE_ID, &mod)) {
+      FREE(droid);
+      return NULL;
+   }
+
+   droid->grmod = (const gralloc_module_t *) mod;
+
+   droid->base.destroy = android_destroy;
+   droid->base.is_displaytarget_format_supported =
+      android_is_displaytarget_format_supported;
+
+   droid->base.displaytarget_create = android_displaytarget_create;
+   droid->base.displaytarget_destroy = android_displaytarget_destroy;
+   droid->base.displaytarget_from_handle = android_displaytarget_from_handle;
+   droid->base.displaytarget_get_handle = android_displaytarget_get_handle;
+
+   droid->base.displaytarget_map = android_displaytarget_map;
+   droid->base.displaytarget_unmap = android_displaytarget_unmap;
+   droid->base.displaytarget_display = android_displaytarget_display;
+
+   return &droid->base;
+}
--- mesa-10.5.2.orig/src/gallium/winsys/sw/android/android_sw_winsys.h
+++ mesa-10.5.2/src/gallium/winsys/sw/android/android_sw_winsys.h
@@ -0,0 +1,48 @@
+/*
+ * Mesa 3-D graphics library
+ *
+ * Copyright (C) 2010-2011 LunarG Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included
+ * in all copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Chia-I Wu <olv@lunarg.com>
+ */
+
+#ifndef ANDROID_SW_WINSYS
+#define ANDROID_SW_WINSYS
+
+#include <sys/cdefs.h>
+#include <hardware/gralloc.h>
+
+__BEGIN_DECLS
+
+struct sw_winsys;
+
+struct android_winsys_handle {
+   buffer_handle_t handle;
+   int stride;
+};
+
+struct sw_winsys *
+android_create_sw_winsys(void);
+
+__END_DECLS
+
+#endif /* ANDROID_SW_WINSYS */
--- mesa-10.5.2.orig/src/glsl/Android.gen.mk
+++ mesa-10.5.2/src/glsl/Android.gen.mk
@@ -0,0 +1,79 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# included by glsl Android.mk for source generation
+
+ifeq ($(LOCAL_MODULE_CLASS),)
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+endif
+
+intermediates := $(call local-intermediates-dir)
+
+sources := \
+	glsl_lexer.cpp \
+	glsl_parser.cpp \
+	glcpp/glcpp-lex.c \
+	glcpp/glcpp-parse.c
+
+LOCAL_SRC_FILES := $(filter-out $(sources), $(LOCAL_SRC_FILES))
+
+LOCAL_C_INCLUDES += $(intermediates) $(intermediates)/glcpp $(MESA_TOP)/src/glsl/glcpp
+
+sources := $(addprefix $(intermediates)/, $(sources))
+LOCAL_GENERATED_SOURCES += $(sources)
+
+define local-l-or-ll-to-c-or-cpp
+	@mkdir -p $(dir $@)
+	@echo "Mesa Lex: $(PRIVATE_MODULE) <= $<"
+	$(hide) $(LEX) --nounistd -o$@ $<
+endef
+
+define glsl_local-y-to-c-and-h
+	@mkdir -p $(dir $@)
+	@echo "Mesa Yacc: $(PRIVATE_MODULE) <= $<"
+	$(hide) $(YACC) -o $@ -p "glcpp_parser_" $<
+endef
+
+define local-yy-to-cpp-and-h
+	@mkdir -p $(dir $@)
+	@echo "Mesa Yacc: $(PRIVATE_MODULE) <= $<"
+	$(hide) $(YACC) -p "_mesa_glsl_" -o $@ $<
+	touch $(@:$1=$(YACC_HEADER_SUFFIX))
+	echo '#ifndef '$(@F:$1=_h) > $(@:$1=.h)
+	echo '#define '$(@F:$1=_h) >> $(@:$1=.h)
+	cat $(@:$1=$(YACC_HEADER_SUFFIX)) >> $(@:$1=.h)
+	echo '#endif' >> $(@:$1=.h)
+	rm -f $(@:$1=$(YACC_HEADER_SUFFIX))
+endef
+
+$(intermediates)/glsl_lexer.cpp: $(LOCAL_PATH)/glsl_lexer.ll
+	$(call local-l-or-ll-to-c-or-cpp)
+
+$(intermediates)/glsl_parser.cpp: $(LOCAL_PATH)/glsl_parser.yy
+	$(call local-yy-to-cpp-and-h,.cpp)
+
+$(intermediates)/glcpp/glcpp-lex.c: $(LOCAL_PATH)/glcpp/glcpp-lex.l
+	$(call local-l-or-ll-to-c-or-cpp)
+
+$(intermediates)/glcpp/glcpp-parse.c: $(LOCAL_PATH)/glcpp/glcpp-parse.y
+	$(call glsl_local-y-to-c-and-h)
--- mesa-10.5.2.orig/src/glsl/Android.mk
+++ mesa-10.5.2/src/glsl/Android.mk
@@ -0,0 +1,72 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# Android.mk for glsl
+
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/Makefile.sources
+
+# ---------------------------------------
+# Build libmesa_glsl
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(LIBGLCPP_FILES) \
+	$(LIBGLSL_FILES)
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/mesa
+
+LOCAL_MODULE := libmesa_glsl
+
+include external/stlport/libstlport.mk
+include $(LOCAL_PATH)/Android.gen.mk
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+# ---------------------------------------
+# Build glsl_compiler
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(GLSL_COMPILER_CXX_FILES)
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/mesa
+
+LOCAL_STATIC_LIBRARIES := libmesa_glsl libmesa_glsl_utils libmesa_util
+
+LOCAL_MODULE_TAGS := eng
+LOCAL_MODULE := glsl_compiler
+
+include $(MESA_COMMON_MK)
+include $(BUILD_EXECUTABLE)
--- mesa-10.5.2.orig/src/glsl/nir/README
+++ mesa-10.5.2/src/glsl/nir/README
@@ -0,0 +1,118 @@
+New IR, or NIR, is an IR for Mesa intended to sit below GLSL IR and Mesa IR.
+Its design inherits from the various IR's that Mesa has used in the past, as
+well as Direct3D assembly, and it includes a few new ideas as well. It is a
+flat (in terms of using instructions instead of expressions), typeless IR,
+similar to TGSI and Mesa IR.  It also supports SSA (although it doesn't require
+it).
+
+Variables
+=========
+
+NIR includes support for source-level GLSL variables through a structure mostly
+copied from GLSL IR. These will be used for linking and conversion from GLSL IR
+(and later, from an AST), but for the most part, they will be lowered to
+registers (see below) and loads/stores.
+
+Registers
+=========
+
+Registers are light-weight; they consist of a structure that only contains its
+size, its index for liveness analysis, and an optional name for debugging. In
+addition, registers can be local to a function or global to the entire shader;
+the latter will be used in ARB_shader_subroutine for passing parameters and
+getting return values from subroutines. Registers can also be an array, in which
+case they can be accessed indirectly. Each ALU instruction (add, subtract, etc.)
+works directly with registers or SSA values (see below).
+
+SSA
+========
+
+Everywhere a register can be loaded/stored, an SSA value can be used instead.
+The only exception is that arrays/indirect addressing are not supported with
+SSA; although research has been done on extensions of SSA to arrays before, it's
+usually for the purpose of parallelization (which we're not interested in), and
+adds some overhead in the form of adding copies or extra arrays (which is much
+more expensive than introducing copies between non-array registers). SSA uses
+point directly to their corresponding definition, which in turn points to the
+instruction it is part of. This creates an implicit use-def chain and avoids the
+need for an external structure for each SSA register.
+
+Functions
+=========
+
+Support for function calls is mostly similar to GLSL IR. Each shader contains a
+list of functions, and each function has a list of overloads. Each overload
+contains a list of parameters, and may contain an implementation which specifies
+the variables that correspond to the parameters and return value. Inlining a
+function, assuming it has a single return point, is as simple as copying its
+instructions, registers, and local variables into the target function and then
+inserting copies to and from the new parameters as appropriate. After functions
+are inlined and any non-subroutine functions are deleted, parameters and return
+variables will be converted to global variables and then global registers. We
+don't do this lowering earlier (i.e. the fortranizer idea) for a few reasons:
+
+- If we want to do optimizations before link time, we need to have the function
+signature available during link-time.
+
+- If we do any inlining before link time, then we might wind up with the
+inlined function and the non-inlined function using the same global
+variables/registers which would preclude optimization.
+
+Intrinsics
+=========
+
+Any operation (other than function calls and textures) which touches a variable
+or is not referentially transparent is represented by an intrinsic. Intrinsics
+are similar to the idea of a "builtin function," i.e. a function declaration
+whose implementation is provided by the backend, except they are more powerful
+in the following ways:
+
+- They can also load and store registers when appropriate, which limits the
+number of variables needed in later stages of the IR while obviating the need
+for a separate load/store variable instruction.
+
+- Intrinsics can be marked as side-effect free, which permits them to be
+treated like any other instruction when it comes to optimizations. This allows
+load intrinsics to be represented as intrinsics while still being optimized
+away by dead code elimination, common subexpression elimination, etc.
+
+Intrinsics are used for:
+
+- Atomic operations
+- Memory barriers
+- Subroutine calls
+- Geometry shader emitVertex and endPrimitive
+- Loading and storing variables (before lowering)
+- Loading and storing uniforms, shader inputs and outputs, etc (after lowering)
+- Copying variables (cases where in GLSL the destination is a structure or
+array)
+- The kitchen sink
+- ...
+
+Textures
+=========
+
+Unfortunately, there are far too many texture operations to represent each one
+of them with an intrinsic, so there's a special texture instruction similar to
+the GLSL IR one. The biggest difference is that, while the texture instruction
+has a sampler dereference field used just like in GLSL IR, this gets lowered to
+a texture unit index (with a possible indirect offset) while the type
+information of the original sampler is kept around for backends. Also, all the
+non-constant sources are stored in a single array to make it easier for
+optimization passes to iterate over all the sources.
+
+Control Flow
+=========
+
+Like in GLSL IR, control flow consists of a tree of "control flow nodes", which
+include if statements and loops, and jump instructions (break, continue, and
+return). Unlike GLSL IR, though, the leaves of the tree aren't statements but
+basic blocks. Each basic block also keeps track of its successors and
+predecessors, and function implementations keep track of the beginning basic
+block (the first basic block of the function) and the ending basic block (a fake
+basic block that every return statement points to). Together, these elements
+make up the control flow graph, in this case a redundant piece of information on
+top of the control flow tree that will be used by almost all the optimizations.
+There are helper functions to add and remove control flow nodes that also update
+the control flow graph, and so usually it doesn't need to be touched by passes
+that modify control flow nodes.
--- mesa-10.5.2.orig/src/loader/Android.mk
+++ mesa-10.5.2/src/loader/Android.mk
@@ -0,0 +1,46 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2014 Emil Velikov <emil.l.velikov@gmail.com>
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/Makefile.sources
+
+# ---------------------------------------
+# Build libmesa_loader
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(LOADER_C_FILES)
+
+# swrast only
+ifeq ($(MESA_GPU_DRIVERS),swrast)
+LOCAL_CFLAGS += -D__NOT_HAVE_DRM_H
+else
+LOCAL_C_INCLUDES += $(TARGET_OUT_HEADERS)/libdrm
+endif
+
+LOCAL_MODULE := libmesa_loader
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/mapi/Android.mk
+++ mesa-10.5.2/src/mapi/Android.mk
@@ -0,0 +1,78 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# Android.mk for glapi
+
+LOCAL_PATH := $(call my-dir)
+
+mapi_abi_headers :=
+
+# ---------------------------------------
+# Build libglapi
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+abi_header := shared-glapi/glapi_mapi_tmp.h
+
+LOCAL_SRC_FILES := \
+	entry.c \
+	mapi_glapi.c \
+	stub.c \
+	table.c \
+	u_current.c \
+	u_execmem.c
+
+LOCAL_CFLAGS := \
+	-DMAPI_MODE_GLAPI \
+	-DMAPI_ABI_HEADER=\"$(abi_header)\"
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mapi
+
+LOCAL_MODULE := libglapi
+
+LOCAL_MODULE_CLASS := SHARED_LIBRARIES
+intermediates := $(call local-intermediates-dir)
+abi_header := $(intermediates)/$(abi_header)
+LOCAL_GENERATED_SOURCES := $(abi_header)
+
+$(abi_header): PRIVATE_PRINTER := shared-glapi
+
+mapi_abi_headers += $(abi_header)
+
+include $(MESA_COMMON_MK)
+include $(BUILD_SHARED_LIBRARY)
+
+
+mapi_abi_deps := \
+	$(wildcard $(LOCAL_PATH)/glapi/gen/*.py) \
+	$(wildcard $(LOCAL_PATH)/glapi/gen/*.xml) \
+	$(LOCAL_PATH)/mapi_abi.py
+
+$(mapi_abi_headers): PRIVATE_SCRIPT := $(MESA_PYTHON2) $(LOCAL_PATH)/mapi_abi.py
+$(mapi_abi_headers): PRIVATE_APIXML := $(LOCAL_PATH)/glapi/gen/gl_and_es_API.xml
+$(mapi_abi_headers): $(mapi_abi_deps)
+	@mkdir -p $(dir $@)
+	@echo "target $(PRIVATE_PRINTER): $(PRIVATE_MODULE) <= $(PRIVATE_APIXML)"
+	$(hide) $(PRIVATE_SCRIPT) --printer $(PRIVATE_PRINTER) --mode lib $(PRIVATE_APIXML) > $@
--- mesa-10.5.2.orig/src/mapi/glapi/gen/next_available_offset.sh
+++ mesa-10.5.2/src/mapi/glapi/gen/next_available_offset.sh
@@ -0,0 +1,39 @@
+#!/usr/bin/env bash
+#
+# (C) Copyright IBM Corporation 2004
+# All Rights Reserved.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# on the rights to use, copy, modify, merge, publish, distribute, sub
+# license, and/or sell copies of the Software, and to permit persons to whom
+# the Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice (including the next
+# paragraph) shall be included in all copies or substantial portions of the
+# Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.  IN NO EVENT SHALL
+# IBM AND/OR ITS SUPPLIERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+# IN THE SOFTWARE.
+#
+# Authors:
+#    Ian Romanick <idr@us.ibm.com>
+
+# Trivial shell script to search the API definition file and print out the
+# next numerically available API entry-point offset.  This could probably
+# be made smarter, but it would be better to use the existin Python
+# framework to do that.  This is just a quick-and-dirty hack.
+
+num=$(grep 'offset="' gl_API.xml |\
+    sed 's/.\+ offset="//g;s/".*$//g' |\
+    grep -v '?' |\
+    sort -rn |\
+    head -1)
+    
+echo $((num + 1))
--- mesa-10.5.2.orig/src/mapi/mapi.c
+++ mesa-10.5.2/src/mapi/mapi.c
@@ -0,0 +1,190 @@
+/*
+ * Mesa 3-D graphics library
+ *
+ * Copyright (C) 2010 LunarG Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included
+ * in all copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Chia-I Wu <olv@lunarg.com>
+ */
+
+#include <stdlib.h>
+#include <string.h>
+
+#include "u_current.h"
+#include "u_thread.h"
+#include "mapi.h"
+#include "stub.h"
+#include "table.h"
+
+/* dynamic stubs will run out before this array */
+static const struct mapi_stub *mapi_stub_map[MAPI_TABLE_NUM_SLOTS];
+static int mapi_num_stubs;
+
+static const struct mapi_stub *
+get_stub(const char *name, const struct mapi_stub *alias)
+{
+   const struct mapi_stub *stub;
+
+   stub = stub_find_public(name);
+   if (!stub) {
+      struct mapi_stub *dyn = stub_find_dynamic(name, 1);
+      if (dyn) {
+         stub_fix_dynamic(dyn, alias);
+         stub = dyn;
+      }
+   }
+
+   return stub;
+}
+
+/**
+ * Initialize mapi.  spec consists of NULL-separated strings.  The first string
+ * denotes the version.  It is followed by variable numbers of entries.  Each
+ * entry can have multiple names.  An empty name terminates an entry.  An empty
+ * entry terminates the spec.  A spec of two entries, Foo and Bar, is as
+ * follows
+ *
+ *   "1\0"
+ *   "Foo\0"
+ *   "FooEXT\0"
+ *   "\0"
+ *   "Bar\0"
+ *   "\0"
+ */
+void
+mapi_init(const char *spec)
+{
+   static mtx_t mutex = _MTX_INITIALIZER_NP;
+   const char *p;
+   int ver, count;
+
+   mtx_lock(&mutex);
+
+   /* already initialized */
+   if (mapi_num_stubs) {
+      mtx_unlock(&mutex);
+      return;
+   }
+
+   count = 0;
+   p = spec;
+
+   /* parse version string */
+   ver = atoi(p);
+   if (ver != 1) {
+      mtx_unlock(&mutex);
+      return;
+   }
+   p += strlen(p) + 1;
+
+   while (*p) {
+      const struct mapi_stub *stub;
+
+      stub = get_stub(p, NULL);
+      /* out of dynamic entries */
+      if (!stub)
+         break;
+      p += strlen(p) + 1;
+
+      while (*p) {
+         get_stub(p, stub);
+         p += strlen(p) + 1;
+      }
+
+      mapi_stub_map[count++] = stub;
+      p++;
+   }
+
+   mapi_num_stubs = count;
+
+   mtx_unlock(&mutex);
+}
+
+/**
+ * Return the address of an entry.  Optionally generate the entry if it does
+ * not exist.
+ */
+mapi_proc
+mapi_get_proc_address(const char *name)
+{
+   const struct mapi_stub *stub;
+
+   stub = stub_find_public(name);
+   if (!stub)
+      stub = stub_find_dynamic(name, 0);
+
+   return (stub) ? (mapi_proc) stub_get_addr(stub) : NULL;
+}
+
+/**
+ * Create a dispatch table.
+ */
+struct mapi_table *
+mapi_table_create(void)
+{
+   const struct mapi_table *noop = table_get_noop();
+   struct mapi_table *tbl;
+
+   tbl = malloc(MAPI_TABLE_SIZE);
+   if (tbl)
+      memcpy(tbl, noop, MAPI_TABLE_SIZE);
+
+   return tbl;
+}
+
+/**
+ * Destroy a dispatch table.
+ */
+void
+mapi_table_destroy(struct mapi_table *tbl)
+{
+   free(tbl);
+}
+
+/**
+ * Fill a dispatch table.  The order of the procs is determined when mapi_init
+ * is called.
+ */
+void
+mapi_table_fill(struct mapi_table *tbl, const mapi_proc *procs)
+{
+   const struct mapi_table *noop = table_get_noop();
+   int i;
+
+   for (i = 0; i < mapi_num_stubs; i++) {
+      const struct mapi_stub *stub = mapi_stub_map[i];
+      int slot = stub_get_slot(stub);
+      mapi_func func = (mapi_func) procs[i];
+
+      if (!func)
+         func = table_get_func(noop, slot);
+      table_set_func(tbl, slot, func);
+   }
+}
+
+/**
+ * Make a dispatch table current.
+ */
+void
+mapi_table_make_current(const struct mapi_table *tbl)
+{
+   u_current_set_table(tbl);
+}
--- mesa-10.5.2.orig/src/mapi/mapi.h
+++ mesa-10.5.2/src/mapi/mapi.h
@@ -0,0 +1,65 @@
+/*
+ * Mesa 3-D graphics library
+ *
+ * Copyright (C) 2010 LunarG Inc.
+ *
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
+ *
+ * The above copyright notice and this permission notice shall be included
+ * in all copies or substantial portions of the Software.
+ *
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+ * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
+ *
+ * Authors:
+ *    Chia-I Wu <olv@lunarg.com>
+ */
+
+#ifndef _MAPI_H_
+#define _MAPI_H_
+
+#include "u_compiler.h"
+
+#ifdef _WIN32
+#ifdef MAPI_DLL_EXPORTS
+#define MAPI_EXPORT __declspec(dllexport)
+#else
+#define MAPI_EXPORT __declspec(dllimport)
+#endif
+#else /* _WIN32 */
+#define MAPI_EXPORT PUBLIC
+#endif
+
+typedef void (*mapi_proc)(void);
+
+struct mapi_table;
+
+MAPI_EXPORT void
+mapi_init(const char *spec);
+
+MAPI_EXPORT mapi_proc
+mapi_get_proc_address(const char *name);
+
+MAPI_EXPORT struct mapi_table *
+mapi_table_create(void);
+
+MAPI_EXPORT void
+mapi_table_destroy(struct mapi_table *tbl);
+
+MAPI_EXPORT void
+mapi_table_fill(struct mapi_table *tbl, const mapi_proc *procs);
+
+MAPI_EXPORT void
+mapi_table_make_current(const struct mapi_table *tbl);
+
+#endif /* _MAPI_H_ */
--- mesa-10.5.2.orig/src/mesa/Android.gen.mk
+++ mesa-10.5.2/src/mesa/Android.gen.mk
@@ -0,0 +1,126 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# included by core mesa Android.mk for source generation
+
+ifeq ($(LOCAL_MODULE_CLASS),)
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+endif
+
+intermediates := $(call local-intermediates-dir)
+
+# This is the list of auto-generated files: sources and headers
+sources := \
+	main/enums.c \
+	main/api_exec.c \
+	main/dispatch.h \
+	main/remap_helper.h \
+	main/get_hash.h
+
+LOCAL_SRC_FILES := $(filter-out $(sources), $(LOCAL_SRC_FILES))
+
+LOCAL_C_INCLUDES += $(intermediates)/main
+
+ifeq ($(strip $(MESA_ENABLE_ASM)),true)
+ifeq ($(TARGET_ARCH),x86)
+sources += x86/matypes.h
+LOCAL_C_INCLUDES += $(intermediates)/x86
+endif
+endif
+
+sources += main/git_sha1.h
+
+sources := $(addprefix $(intermediates)/, $(sources))
+
+LOCAL_GENERATED_SOURCES += $(sources)
+
+glapi := $(MESA_TOP)/src/mapi/glapi/gen
+
+dispatch_deps := \
+	$(wildcard $(glapi)/*.py) \
+	$(wildcard $(glapi)/*.xml)
+
+define es-gen
+	@mkdir -p $(dir $@)
+	@echo "Gen ES: $(PRIVATE_MODULE) <= $(notdir $(@))"
+	$(hide) $(PRIVATE_SCRIPT) $(1) $(PRIVATE_XML) > $@
+endef
+
+$(intermediates)/main/git_sha1.h:
+	@mkdir -p $(dir $@)
+	@echo "GIT-SHA1: $(PRIVATE_MODULE) <= git"
+	$(hide) touch $@
+	$(hide) if which git > /dev/null; then \
+			git --git-dir $(PRIVATE_PATH)/../../.git log -n 1 --oneline | \
+			sed 's/^\([^ ]*\) .*/#define MESA_GIT_SHA1 "git-\1"/' \
+			> $@; \
+		fi
+
+matypes_deps := \
+	$(BUILD_OUT_EXECUTABLES)/mesa_gen_matypes$(BUILD_EXECUTABLE_SUFFIX) \
+	$(LOCAL_PATH)/main/mtypes.h \
+	$(LOCAL_PATH)/tnl/t_context.h
+
+$(intermediates)/x86/matypes.h: $(matypes_deps) 
+	@mkdir -p $(dir $@)
+	@echo "MATYPES: $(PRIVATE_MODULE) <= $(notdir $@)"
+	$(hide) $< > $@
+
+$(intermediates)/main/dispatch.h: PRIVATE_SCRIPT := $(MESA_PYTHON2) $(glapi)/gl_table.py
+$(intermediates)/main/dispatch.h: PRIVATE_XML := -f $(glapi)/gl_and_es_API.xml
+
+$(intermediates)/main/dispatch.h: $(dispatch_deps)
+	$(call es-gen, $* -m remap_table)
+
+$(intermediates)/main/remap_helper.h: PRIVATE_SCRIPT := $(MESA_PYTHON2) $(glapi)/remap_helper.py
+$(intermediates)/main/remap_helper.h: PRIVATE_XML := -f $(glapi)/gl_and_es_API.xml
+
+$(intermediates)/main/remap_helper.h: $(dispatch_deps)
+	$(call es-gen, $*)
+
+$(intermediates)/main/enums.c: PRIVATE_SCRIPT :=$(MESA_PYTHON2) $(glapi)/gl_enums.py
+$(intermediates)/main/enums.c: PRIVATE_XML := -f $(glapi)/gl_and_es_API.xml
+
+$(intermediates)/main/enums.c: $(dispatch_deps)
+	$(call es-gen)
+
+$(intermediates)/main/api_exec.c: PRIVATE_SCRIPT := $(MESA_PYTHON2) $(glapi)/gl_genexec.py
+$(intermediates)/main/api_exec.c: PRIVATE_XML := -f $(glapi)/gl_and_es_API.xml
+
+$(intermediates)/main/api_exec.c: $(dispatch_deps)
+	$(call es-gen)
+
+GET_HASH_GEN := $(LOCAL_PATH)/main/get_hash_generator.py
+
+$(intermediates)/main/get_hash.h: $(glapi)/gl_and_es_API.xml \
+               $(LOCAL_PATH)/main/get_hash_params.py $(GET_HASH_GEN)
+	@$(MESA_PYTHON2) $(GET_HASH_GEN) -f $< > $@
+
+FORMAT_INFO := $(LOCAL_PATH)/main/format_info.py
+format_info_deps := \
+	$(LOCAL_PATH)/main/formats.csv \
+	$(LOCAL_PATH)/main/format_parser.py \
+	$(FORMAT_INFO)
+
+$(intermediates)/main/format_info.h: $(format_info_deps)
+	@$(MESA_PYTHON2) $(FORMAT_INFO) $< > $@
--- mesa-10.5.2.orig/src/mesa/Android.libmesa_dricore.mk
+++ mesa-10.5.2/src/mesa/Android.libmesa_dricore.mk
@@ -0,0 +1,76 @@
+# Copyright 2012 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# ----------------------------------------------------------------------
+# libmesa_dricore.a
+# ----------------------------------------------------------------------
+
+ifeq ($(strip $(MESA_BUILD_CLASSIC)),true)
+
+LOCAL_PATH := $(call my-dir)
+
+# Import the following variables:
+#     MESA_FILES
+#     X86_FILES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := libmesa_dricore
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+
+LOCAL_SRC_FILES := \
+	$(MESA_FILES)
+
+ifeq ($(strip $(MESA_ENABLE_ASM)),true)
+ifeq ($(TARGET_ARCH),x86)
+	LOCAL_SRC_FILES += $(X86_FILES)
+endif # x86
+endif # MESA_ENABLE_ASM
+
+ifeq ($(ARCH_X86_HAVE_SSE4_1),true)
+LOCAL_SRC_FILES += \
+	$(SRCDIR)main/streaming-load-memcpy.c \
+	$(SRCDIR)main/sse_minmax.c
+LOCAL_CFLAGS := -msse4.1
+endif
+
+ifeq ($(ARCH_X86_HAVE_SSE4_1),true)
+LOCAL_CFLAGS += \
+       -DUSE_SSE41
+endif
+
+LOCAL_C_INCLUDES := \
+	$(call intermediates-dir-for STATIC_LIBRARIES,libmesa_program,,) \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/glsl \
+	$(MESA_TOP)/src/gallium/auxiliary
+
+LOCAL_WHOLE_STATIC_LIBRARIES := \
+	libmesa_program
+
+include $(LOCAL_PATH)/Android.gen.mk
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+endif # MESA_BUILD_CLASSIC
--- mesa-10.5.2.orig/src/mesa/Android.libmesa_glsl_utils.mk
+++ mesa-10.5.2/src/mesa/Android.libmesa_glsl_utils.mk
@@ -0,0 +1,72 @@
+# Copyright 2012 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+#
+# The libmesa_glsl_utils libraries allow us to avoid a circular dependency
+# between core mesa and glsl.
+#
+
+# ---------------------------------------
+# libmesa_glsl_utils.a for target
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := libmesa_glsl_utils
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/glsl \
+	$(MESA_TOP)/src/mapi
+
+LOCAL_SRC_FILES := \
+	main/imports.c \
+	program/prog_hash_table.c \
+	program/symbol_table.c
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+# ---------------------------------------
+# libmesa_glsl_utils.a for host
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := libmesa_glsl_utils
+LOCAL_IS_HOST_MODULE := true
+LOCAL_CFLAGS := -D_POSIX_C_SOURCE=199309L
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/glsl \
+	$(MESA_TOP)/src/mapi
+
+LOCAL_SRC_FILES := \
+	main/imports.c \
+	program/prog_hash_table.c \
+	program/symbol_table.c
+
+include $(MESA_COMMON_MK)
+include $(BUILD_HOST_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/mesa/Android.libmesa_st_mesa.mk
+++ mesa-10.5.2/src/mesa/Android.libmesa_st_mesa.mk
@@ -0,0 +1,69 @@
+# Copyright 2012 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# ----------------------------------------------------------------------
+# libmesa_st_mesa.a
+# ----------------------------------------------------------------------
+
+ifeq ($(strip $(MESA_BUILD_GALLIUM)),true)
+
+LOCAL_PATH := $(call my-dir)
+
+# Import variables:
+# 	MESA_GALLIUM_FILES.
+# 	X86_FILES
+include $(LOCAL_PATH)/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := libmesa_st_mesa
+
+LOCAL_SRC_FILES := \
+	$(MESA_GALLIUM_FILES)
+
+ifeq ($(strip $(MESA_ENABLE_ASM)),true)
+ifeq ($(TARGET_ARCH),x86)
+	LOCAL_SRC_FILES += $(X86_FILES)
+endif # x86
+endif # MESA_ENABLE_ASM
+
+ifeq ($(ARCH_X86_HAVE_SSE4_1),true)
+LOCAL_CFLAGS := \
+       -DUSE_SSE41
+endif
+
+LOCAL_C_INCLUDES := \
+	$(call intermediates-dir-for STATIC_LIBRARIES,libmesa_program,,) \
+	$(MESA_TOP)/src/gallium/auxiliary \
+	$(MESA_TOP)/src/gallium/include \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/glsl \
+	$(MESA_TOP)/src/mapi
+
+LOCAL_WHOLE_STATIC_LIBRARIES := \
+	libmesa_program
+
+include $(LOCAL_PATH)/Android.gen.mk
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+endif # MESA_BUILD_GALLIUM
--- mesa-10.5.2.orig/src/mesa/Android.mesa_gen_matypes.mk
+++ mesa-10.5.2/src/mesa/Android.mesa_gen_matypes.mk
@@ -0,0 +1,49 @@
+# Copyright 2012 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG Inc.
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+# ---------------------------------------------------------------------
+# host executable: mesa_gen_matypes
+# ---------------------------------------------------------------------
+
+ifeq ($(strip $(MESA_ENABLE_ASM)),true)
+ifeq ($(TARGET_ARCH),x86)
+
+LOCAL_PATH := $(call my-dir)
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := mesa_gen_matypes
+LOCAL_IS_HOST_MODULE := true
+LOCAL_CFLAGS := -D_POSIX_C_SOURCE=199309L
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/glsl
+
+LOCAL_SRC_FILES := \
+	x86/gen_matypes.c
+
+include $(MESA_COMMON_MK)
+include $(BUILD_HOST_EXECUTABLE)
+
+endif # x86
+endif # MESA_ENABLE_ASM
--- mesa-10.5.2.orig/src/mesa/Android.mk
+++ mesa-10.5.2/src/mesa/Android.mk
@@ -0,0 +1,28 @@
+# Copyright 2012 Intel Corporation
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/Android.mesa_gen_matypes.mk
+include $(LOCAL_PATH)/Android.libmesa_glsl_utils.mk
+include $(LOCAL_PATH)/Android.libmesa_dricore.mk
+include $(LOCAL_PATH)/Android.libmesa_st_mesa.mk
+
+include $(LOCAL_PATH)/program/Android.mk
--- mesa-10.5.2.orig/src/mesa/drivers/dri/Android.mk
+++ mesa-10.5.2/src/mesa/drivers/dri/Android.mk
@@ -0,0 +1,74 @@
+#
+# Copyright (C) 2011 Intel Corporation
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+#
+
+LOCAL_PATH := $(call my-dir)
+
+# Import mesa_dri_common_INCLUDES.
+include $(LOCAL_PATH)/common/Makefile.sources
+
+#-----------------------------------------------
+# Variables common to all DRI drivers
+
+MESA_DRI_MODULE_PATH := $(TARGET_OUT_SHARED_LIBRARIES)/dri
+MESA_DRI_MODULE_UNSTRIPPED_PATH := $(TARGET_OUT_SHARED_LIBRARIES_UNSTRIPPED)/dri
+
+MESA_DRI_CFLAGS := \
+	-DHAVE_ANDROID_PLATFORM
+
+MESA_DRI_C_INCLUDES := \
+	$(MESA_TOP)/src \
+	$(call intermediates-dir-for,STATIC_LIBRARIES,libmesa_dri_common) \
+	$(addprefix $(MESA_TOP)/, $(mesa_dri_common_INCLUDES)) \
+	$(TARGET_OUT_HEADERS)/libdrm \
+	external/expat/lib
+
+MESA_DRI_WHOLE_STATIC_LIBRARIES := \
+	libmesa_glsl \
+	libmesa_megadriver_stub \
+	libmesa_dri_common \
+	libmesa_dricore
+
+MESA_DRI_SHARED_LIBRARIES := \
+	libcutils \
+	libdl \
+	libdrm \
+	libexpat \
+	libglapi \
+	liblog
+
+# All DRI modules must add this to LOCAL_GENERATED_SOURCES.
+MESA_DRI_OPTIONS_H := $(call intermediates-dir-for,STATIC_LIBRARIES,libmesa_dri_common)/xmlpool/options.h
+
+#-----------------------------------------------
+# Build drivers and libmesa_dri_common
+
+SUBDIRS := common
+
+ifneq ($(filter i915, $(MESA_GPU_DRIVERS)),)
+	SUBDIRS += i915
+endif
+
+ifneq ($(filter i965, $(MESA_GPU_DRIVERS)),)
+	SUBDIRS += i965
+endif
+
+include $(foreach d, $(SUBDIRS), $(LOCAL_PATH)/$(d)/Android.mk)
--- mesa-10.5.2.orig/src/mesa/drivers/dri/common/Android.mk
+++ mesa-10.5.2/src/mesa/drivers/dri/common/Android.mk
@@ -0,0 +1,105 @@
+#
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2011 Intel Corporation
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+#
+
+#
+# Build libmesa_dri_common
+#
+
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+
+include $(LOCAL_PATH)/Makefile.sources
+
+LOCAL_MODULE := libmesa_dri_common
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+
+intermediates := $(call local-intermediates-dir)
+
+LOCAL_C_INCLUDES := \
+    $(intermediates) \
+    $(MESA_DRI_C_INCLUDES)
+
+LOCAL_SRC_FILES := $(DRI_COMMON_FILES)
+
+LOCAL_GENERATED_SOURCES := \
+    $(intermediates)/xmlpool/options.h
+
+#
+# Generate options.h from gettext translations.
+#
+
+MESA_DRI_OPTIONS_LANGS := de es nl fr sv
+POT := $(intermediates)/xmlpool.pot
+
+$(POT): $(LOCAL_PATH)/xmlpool/t_options.h
+	@mkdir -p $(dir $@)
+	xgettext -L C --from-code utf-8 -o $@ $<
+
+$(intermediates)/xmlpool/%.po: $(LOCAL_PATH)/xmlpool/%.po $(POT)
+	lang=$(basename $(notdir $@)); \
+	mkdir -p $(dir $@); \
+	if [ -f $< ]; then \
+		msgmerge -o $@ $^; \
+	else \
+		msginit -i $(POT) \
+			-o $@ \
+			--locale=$$lang \
+			--no-translator; \
+		sed -i -e 's/charset=.*\\n/charset=UTF-8\\n/' $@; \
+	fi
+
+$(intermediates)/xmlpool/%/LC_MESSAGES/options.mo: $(intermediates)/xmlpool/%.po
+	mkdir -p $(dir $@)
+	msgfmt -o $@ $<
+
+$(intermediates)/xmlpool/options.h: PRIVATE_SCRIPT := $(LOCAL_PATH)/xmlpool/gen_xmlpool.py
+$(intermediates)/xmlpool/options.h: PRIVATE_LOCALEDIR := $(intermediates)/xmlpool
+$(intermediates)/xmlpool/options.h: PRIVATE_TEMPLATE_HEADER := $(LOCAL_PATH)/xmlpool/t_options.h
+$(intermediates)/xmlpool/options.h: PRIVATE_MO_FILES := $(MESA_DRI_OPTIONS_LANGS:%=$(intermediates)/xmlpool/%/LC_MESSAGES/options.mo)
+.SECONDEXPANSION:
+$(intermediates)/xmlpool/options.h: $$(PRIVATE_SCRIPT) $$(PRIVATE_TEMPLATE_HEADER) $$(PRIVATE_MO_FILES)
+	mkdir -p $(dir $@)
+	mkdir -p $(PRIVATE_LOCALEDIR)
+	$(MESA_PYTHON2) $(PRIVATE_SCRIPT) $(PRIVATE_TEMPLATE_HEADER) \
+		$(PRIVATE_LOCALEDIR) $(MESA_DRI_OPTIONS_LANGS) > $@
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+#
+# Build libmesa_megadriver_stub
+#
+
+include $(CLEAR_VARS)
+include $(LOCAL_PATH)/Makefile.sources
+
+LOCAL_MODULE := libmesa_megadriver_stub
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+LOCAL_C_INCLUDES := \
+    $(MESA_DRI_C_INCLUDES)
+
+LOCAL_SRC_FILES := $(megadriver_stub_FILES)
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/mesa/drivers/dri/gen-symbol-redefs.py
+++ mesa-10.5.2/src/mesa/drivers/dri/gen-symbol-redefs.py
@@ -0,0 +1,68 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+# Copyright © 2013 Intel Corporation
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice (including the next
+# paragraph) shall be included in all copies or substantial portions of the
+# Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
+# IN THE SOFTWARE.
+
+import sys
+import argparse
+import re
+import subprocess
+
+# Example usages:
+# ./gen-symbol-redefs.py i915/.libs/libi915_dri.a old_ i915 i830
+# ./gen-symbol-redefs.py r200/.libs/libr200_dri.a r200_ r200
+
+argparser = argparse.ArgumentParser(description="Generates #defines to hide driver global symbols outside of a driver's namespace.")
+argparser.add_argument("file",
+                    metavar = 'file',
+                    help='libdrivername.a file to read')
+argparser.add_argument("newprefix",
+                    metavar = 'newprefix',
+                    help='New prefix to give non-driver global symbols')
+argparser.add_argument('prefixes',
+                       metavar='prefix',
+                       nargs='*',
+                       help='driver-specific prefixes')
+args = argparser.parse_args()
+
+stdout = subprocess.check_output(['nm', args.file])
+
+for line in stdout.splitlines():
+    m = re.match("[0-9a-z]+ [BT] (.*)", line)
+    if not m:
+        continue
+
+    symbol = m.group(1)
+
+    has_good_prefix = re.match(args.newprefix, symbol) != None
+    for prefix in args.prefixes:
+        if re.match(prefix, symbol):
+            has_good_prefix = True
+            break
+    if has_good_prefix:
+        continue
+
+    # This is the single public entrypoint.
+    if re.match("__driDriverGetExtensions", symbol):
+        continue
+
+    print '#define {0:35} {1}{0}'.format(symbol, args.newprefix)
--- mesa-10.5.2.orig/src/mesa/drivers/dri/i915/Android.mk
+++ mesa-10.5.2/src/mesa/drivers/dri/i915/Android.mk
@@ -0,0 +1,56 @@
+#
+# Copyright (C) 2011 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+#
+
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := i915_dri
+LOCAL_MODULE_PATH := $(MESA_DRI_MODULE_PATH)
+LOCAL_UNSTRIPPED_PATH := $(MESA_DRI_MODULE_UNSTRIPPED_PATH)
+
+# Import variables i915_FILES.
+include $(LOCAL_PATH)/Makefile.sources
+
+LOCAL_CFLAGS := \
+	$(MESA_DRI_CFLAGS) \
+	-DI915
+
+LOCAL_C_INCLUDES := \
+	$(MESA_DRI_C_INCLUDES)
+
+LOCAL_SRC_FILES := \
+	$(i915_FILES)
+
+LOCAL_WHOLE_STATIC_LIBRARIES := \
+	$(MESA_DRI_WHOLE_STATIC_LIBRARIES)
+
+LOCAL_SHARED_LIBRARIES := \
+	$(MESA_DRI_SHARED_LIBRARIES) \
+	libdrm_intel
+
+LOCAL_GENERATED_SOURCES := \
+	$(MESA_DRI_OPTIONS_H)
+
+include $(MESA_COMMON_MK)
+include $(BUILD_SHARED_LIBRARY)
--- mesa-10.5.2.orig/src/mesa/drivers/dri/i965/Android.mk
+++ mesa-10.5.2/src/mesa/drivers/dri/i965/Android.mk
@@ -0,0 +1,60 @@
+#
+# Copyright (C) 2011 Intel Corporation
+# Copyright (C) 2010-2011 Chia-I Wu <olvaffe@gmail.com>
+# Copyright (C) 2010-2011 LunarG
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+#
+
+LOCAL_PATH := $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := i965_dri
+LOCAL_MODULE_PATH := $(MESA_DRI_MODULE_PATH)
+LOCAL_UNSTRIPPED_PATH := $(MESA_DRI_MODULE_UNSTRIPPED_PATH)
+
+# Import variables i965_FILES.
+include $(LOCAL_PATH)/Makefile.sources
+
+LOCAL_CFLAGS := \
+	$(MESA_DRI_CFLAGS)
+
+ifeq ($(ARCH_X86_HAVE_SSE4_1),true)
+LOCAL_CFLAGS += \
+	-DUSE_SSE41
+endif
+
+LOCAL_C_INCLUDES := \
+	$(MESA_DRI_C_INCLUDES)
+
+LOCAL_SRC_FILES := \
+	$(i965_FILES)
+
+LOCAL_WHOLE_STATIC_LIBRARIES := \
+	$(MESA_DRI_WHOLE_STATIC_LIBRARIES)
+
+LOCAL_SHARED_LIBRARIES := \
+	$(MESA_DRI_SHARED_LIBRARIES) \
+	libdrm_intel
+
+LOCAL_GENERATED_SOURCES := \
+	$(MESA_DRI_OPTIONS_H)
+
+include $(MESA_COMMON_MK)
+include $(BUILD_SHARED_LIBRARY)
--- mesa-10.5.2.orig/src/mesa/drivers/dri/nouveau/.dir-locals.el
+++ mesa-10.5.2/src/mesa/drivers/dri/nouveau/.dir-locals.el
@@ -0,0 +1,8 @@
+((prog-mode
+  (indent-tabs-mode . true)
+  (tab-width . 8)
+  (c-basic-offset . 8)
+  (c-file-style . "stroustrup")
+  (fill-column . 78)
+  )
+ )
--- mesa-10.5.2.orig/src/mesa/drivers/dri/r200/Doxyfile
+++ mesa-10.5.2/src/mesa/drivers/dri/r200/Doxyfile
@@ -0,0 +1,232 @@
+# Doxyfile 1.3.2-Gideon
+
+#---------------------------------------------------------------------------
+# General configuration options
+#---------------------------------------------------------------------------
+PROJECT_NAME           = r200
+PROJECT_NUMBER         = $VERSION$
+OUTPUT_DIRECTORY       = 
+OUTPUT_LANGUAGE        = English
+USE_WINDOWS_ENCODING   = NO
+EXTRACT_ALL            = NO
+EXTRACT_PRIVATE        = NO
+EXTRACT_STATIC         = NO
+EXTRACT_LOCAL_CLASSES  = YES
+HIDE_UNDOC_MEMBERS     = NO
+HIDE_UNDOC_CLASSES     = NO
+HIDE_FRIEND_COMPOUNDS  = NO
+HIDE_IN_BODY_DOCS      = NO
+BRIEF_MEMBER_DESC      = YES
+REPEAT_BRIEF           = YES
+ALWAYS_DETAILED_SEC    = NO
+INLINE_INHERITED_MEMB  = NO
+FULL_PATH_NAMES        = NO
+STRIP_FROM_PATH        = 
+INTERNAL_DOCS          = NO
+CASE_SENSE_NAMES       = YES
+SHORT_NAMES            = NO
+HIDE_SCOPE_NAMES       = NO
+SHOW_INCLUDE_FILES     = YES
+JAVADOC_AUTOBRIEF      = NO
+MULTILINE_CPP_IS_BRIEF = NO
+DETAILS_AT_TOP         = NO
+INHERIT_DOCS           = YES
+INLINE_INFO            = YES
+SORT_MEMBER_DOCS       = YES
+DISTRIBUTE_GROUP_DOC   = NO
+TAB_SIZE               = 8
+GENERATE_TODOLIST      = YES
+GENERATE_TESTLIST      = YES
+GENERATE_BUGLIST       = YES
+GENERATE_DEPRECATEDLIST= YES
+ALIASES                = 
+ENABLED_SECTIONS       = 
+MAX_INITIALIZER_LINES  = 30
+OPTIMIZE_OUTPUT_FOR_C  = NO
+OPTIMIZE_OUTPUT_JAVA   = NO
+SHOW_USED_FILES        = YES
+#---------------------------------------------------------------------------
+# configuration options related to warning and progress messages
+#---------------------------------------------------------------------------
+QUIET                  = NO
+WARNINGS               = YES
+WARN_IF_UNDOCUMENTED   = YES
+WARN_IF_DOC_ERROR      = YES
+WARN_FORMAT            = "$file:$line: $text"
+WARN_LOGFILE           = 
+#---------------------------------------------------------------------------
+# configuration options related to the input files
+#---------------------------------------------------------------------------
+INPUT                  = /home/temp/Mesa/src/drv/r200
+FILE_PATTERNS          = *.c \
+                         *.cc \
+                         *.cxx \
+                         *.cpp \
+                         *.c++ \
+                         *.java \
+                         *.ii \
+                         *.ixx \
+                         *.ipp \
+                         *.i++ \
+                         *.inl \
+                         *.h \
+                         *.hh \
+                         *.hxx \
+                         *.hpp \
+                         *.h++ \
+                         *.idl \
+                         *.odl \
+                         *.cs \
+                         *.C \
+                         *.H \
+                         *.tlh \
+                         *.diff \
+                         *.patch \
+                         *.moc \
+                         *.xpm
+RECURSIVE              = yes
+EXCLUDE                = 
+EXCLUDE_SYMLINKS       = NO
+EXCLUDE_PATTERNS       = 
+EXAMPLE_PATH           = 
+EXAMPLE_PATTERNS       = *
+EXAMPLE_RECURSIVE      = NO
+IMAGE_PATH             = 
+INPUT_FILTER           = 
+FILTER_SOURCE_FILES    = NO
+#---------------------------------------------------------------------------
+# configuration options related to source browsing
+#---------------------------------------------------------------------------
+SOURCE_BROWSER         = NO
+INLINE_SOURCES         = NO
+STRIP_CODE_COMMENTS    = YES
+REFERENCED_BY_RELATION = YES
+REFERENCES_RELATION    = YES
+VERBATIM_HEADERS       = YES
+#---------------------------------------------------------------------------
+# configuration options related to the alphabetical class index
+#---------------------------------------------------------------------------
+ALPHABETICAL_INDEX     = NO
+COLS_IN_ALPHA_INDEX    = 5
+IGNORE_PREFIX          = 
+#---------------------------------------------------------------------------
+# configuration options related to the HTML output
+#---------------------------------------------------------------------------
+GENERATE_HTML          = YES
+HTML_OUTPUT            = html
+HTML_FILE_EXTENSION    = .html
+HTML_HEADER            = 
+HTML_FOOTER            = 
+HTML_STYLESHEET        = 
+HTML_ALIGN_MEMBERS     = YES
+GENERATE_HTMLHELP      = NO
+CHM_FILE               = 
+HHC_LOCATION           = 
+GENERATE_CHI           = NO
+BINARY_TOC             = NO
+TOC_EXPAND             = NO
+DISABLE_INDEX          = NO
+ENUM_VALUES_PER_LINE   = 4
+GENERATE_TREEVIEW      = NO
+TREEVIEW_WIDTH         = 250
+#---------------------------------------------------------------------------
+# configuration options related to the LaTeX output
+#---------------------------------------------------------------------------
+GENERATE_LATEX         = YES
+LATEX_OUTPUT           = latex
+LATEX_CMD_NAME         = latex
+MAKEINDEX_CMD_NAME     = makeindex
+COMPACT_LATEX          = NO
+PAPER_TYPE             = a4wide
+EXTRA_PACKAGES         = 
+LATEX_HEADER           = 
+PDF_HYPERLINKS         = NO
+USE_PDFLATEX           = NO
+LATEX_BATCHMODE        = NO
+LATEX_HIDE_INDICES     = NO
+#---------------------------------------------------------------------------
+# configuration options related to the RTF output
+#---------------------------------------------------------------------------
+GENERATE_RTF           = NO
+RTF_OUTPUT             = rtf
+COMPACT_RTF            = NO
+RTF_HYPERLINKS         = NO
+RTF_STYLESHEET_FILE    = 
+RTF_EXTENSIONS_FILE    = 
+#---------------------------------------------------------------------------
+# configuration options related to the man page output
+#---------------------------------------------------------------------------
+GENERATE_MAN           = NO
+MAN_OUTPUT             = man
+MAN_EXTENSION          = .3
+MAN_LINKS              = NO
+#---------------------------------------------------------------------------
+# configuration options related to the XML output
+#---------------------------------------------------------------------------
+GENERATE_XML           = yes
+XML_OUTPUT             = xml
+XML_SCHEMA             = 
+XML_DTD                = 
+#---------------------------------------------------------------------------
+# configuration options for the AutoGen Definitions output
+#---------------------------------------------------------------------------
+GENERATE_AUTOGEN_DEF   = NO
+#---------------------------------------------------------------------------
+# configuration options related to the Perl module output
+#---------------------------------------------------------------------------
+GENERATE_PERLMOD       = NO
+PERLMOD_LATEX          = NO
+PERLMOD_PRETTY         = YES
+PERLMOD_MAKEVAR_PREFIX = 
+#---------------------------------------------------------------------------
+# Configuration options related to the preprocessor   
+#---------------------------------------------------------------------------
+ENABLE_PREPROCESSING   = YES
+MACRO_EXPANSION        = NO
+EXPAND_ONLY_PREDEF     = NO
+SEARCH_INCLUDES        = YES
+INCLUDE_PATH           = 
+INCLUDE_FILE_PATTERNS  = 
+PREDEFINED             = 
+EXPAND_AS_DEFINED      = 
+SKIP_FUNCTION_MACROS   = YES
+#---------------------------------------------------------------------------
+# Configuration::addtions related to external references   
+#---------------------------------------------------------------------------
+TAGFILES               = 
+GENERATE_TAGFILE       = 
+ALLEXTERNALS           = NO
+EXTERNAL_GROUPS        = YES
+PERL_PATH              = /usr/bin/perl
+#---------------------------------------------------------------------------
+# Configuration options related to the dot tool   
+#---------------------------------------------------------------------------
+CLASS_DIAGRAMS         = YES
+HIDE_UNDOC_RELATIONS   = YES
+HAVE_DOT               = NO
+CLASS_GRAPH            = YES
+COLLABORATION_GRAPH    = YES
+UML_LOOK               = NO
+TEMPLATE_RELATIONS     = NO
+INCLUDE_GRAPH          = YES
+INCLUDED_BY_GRAPH      = YES
+CALL_GRAPH             = NO
+GRAPHICAL_HIERARCHY    = YES
+DOT_IMAGE_FORMAT       = png
+DOT_PATH               = 
+DOTFILE_DIRS           = 
+MAX_DOT_GRAPH_WIDTH    = 1024
+MAX_DOT_GRAPH_HEIGHT   = 1024
+MAX_DOT_GRAPH_DEPTH    = 1000
+GENERATE_LEGEND        = YES
+DOT_CLEANUP            = YES
+#---------------------------------------------------------------------------
+# Configuration::addtions related to the search engine   
+#---------------------------------------------------------------------------
+SEARCHENGINE           = NO
+CGI_NAME               = search.cgi
+CGI_URL                = 
+DOC_URL                = 
+DOC_ABSPATH            = 
+BIN_ABSPATH            = /usr/local/bin/
+EXT_DOC_PATHS          = 
--- mesa-10.5.2.orig/src/mesa/program/Android.mk
+++ mesa-10.5.2/src/mesa/program/Android.mk
@@ -0,0 +1,80 @@
+# Copyright 2012 Intel Corporation
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+define local-l-to-c
+	@mkdir -p $(dir $@)
+	@echo "Mesa Lex: $(PRIVATE_MODULE) <= $<"
+	$(hide) $(LEX) -o$@ $<
+endef
+
+define mesa_local-y-to-c-and-h
+	@mkdir -p $(dir $@)
+	@echo "Mesa Yacc: $(PRIVATE_MODULE) <= $<"
+	$(hide) $(YACC) -o $@ -p "_mesa_program_" $<
+endef
+
+# ----------------------------------------------------------------------
+# libmesa_program.a
+# ----------------------------------------------------------------------
+
+# Import the following variables:
+#     PROGRAM_FILES
+include $(MESA_TOP)/src/mesa/Makefile.sources
+
+include $(CLEAR_VARS)
+
+LOCAL_MODULE := libmesa_program
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+
+intermediates := $(call local-intermediates-dir)
+
+# TODO(chadv): In Makefile.sources, move these vars to a different list so we can
+# remove this kludge.
+generated_sources_basenames := \
+	lex.yy.c \
+	program_parse.tab.c \
+	program_parse.tab.h
+
+LOCAL_SRC_FILES := \
+	$(filter-out $(generated_sources_basenames),$(subst program/,,$(PROGRAM_FILES)))
+
+LOCAL_GENERATED_SOURCES := \
+	$(addprefix $(intermediates)/program/,$(generated_sources_basenames))
+
+$(intermediates)/program/program_parse.tab.c: $(LOCAL_PATH)/program_parse.y
+	$(mesa_local-y-to-c-and-h)
+
+$(intermediates)/program/program_parse.tab.h: $(intermediates)/program/program_parse.tab.c
+	@
+
+$(intermediates)/program/lex.yy.c: $(LOCAL_PATH)/program_lexer.l
+	$(local-l-to-c)
+
+LOCAL_C_INCLUDES := \
+	$(intermediates) \
+	$(MESA_TOP)/src \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src/mesa \
+	$(MESA_TOP)/src/glsl
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
--- mesa-10.5.2.orig/src/util/Android.mk
+++ mesa-10.5.2/src/util/Android.mk
@@ -0,0 +1,102 @@
+# Mesa 3-D graphics library
+#
+# Copyright (C) 2014 Tomasz Figa <tomasz.figa@gmail.com>
+#
+# Permission is hereby granted, free of charge, to any person obtaining a
+# copy of this software and associated documentation files (the "Software"),
+# to deal in the Software without restriction, including without limitation
+# the rights to use, copy, modify, merge, publish, distribute, sublicense,
+# and/or sell copies of the Software, and to permit persons to whom the
+# Software is furnished to do so, subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be included
+# in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
+# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+# DEALINGS IN THE SOFTWARE.
+
+LOCAL_PATH := $(call my-dir)
+
+include $(LOCAL_PATH)/Makefile.sources
+
+# ---------------------------------------
+# Build libmesa_util
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES := \
+	$(MESA_UTIL_FILES)
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mesa \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src
+
+LOCAL_MODULE := libmesa_util
+
+# Generated sources
+
+ifeq ($(LOCAL_MODULE_CLASS),)
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+endif
+
+intermediates := $(call local-intermediates-dir)
+
+# This is the list of auto-generated files: sources and headers
+sources := $(addprefix $(intermediates)/, $(MESA_UTIL_GENERATED_FILES))
+
+LOCAL_GENERATED_SOURCES += $(sources)
+
+FORMAT_SRGB := $(LOCAL_PATH)/format_srgb.py
+
+$(intermediates)/format_srgb.c: $(FORMAT_SRGB)
+	@$(MESA_PYTHON2) $(FORMAT_SRGB) $< > $@
+
+include $(MESA_COMMON_MK)
+include $(BUILD_STATIC_LIBRARY)
+
+# ---------------------------------------
+# Build host libmesa_util
+# ---------------------------------------
+
+include $(CLEAR_VARS)
+
+LOCAL_IS_HOST_MODULE := true
+LOCAL_CFLAGS := -D_POSIX_C_SOURCE=199309L
+
+LOCAL_SRC_FILES := \
+	$(MESA_UTIL_FILES)
+
+LOCAL_C_INCLUDES := \
+	$(MESA_TOP)/src/mesa \
+	$(MESA_TOP)/src/mapi \
+	$(MESA_TOP)/src
+
+LOCAL_MODULE := libmesa_util
+
+# Generated sources
+
+ifeq ($(LOCAL_MODULE_CLASS),)
+LOCAL_MODULE_CLASS := STATIC_LIBRARIES
+endif
+
+intermediates := $(call local-intermediates-dir)
+
+# This is the list of auto-generated files: sources and headers
+sources := $(addprefix $(intermediates)/, $(MESA_UTIL_GENERATED_FILES))
+
+LOCAL_GENERATED_SOURCES += $(sources)
+
+FORMAT_SRGB := $(LOCAL_PATH)/format_srgb.py
+
+$(intermediates)/format_srgb.c: $(FORMAT_SRGB)
+	@$(MESA_PYTHON2) $(FORMAT_SRGB) $< > $@
+
+include $(MESA_COMMON_MK)
+include $(BUILD_HOST_STATIC_LIBRARY)
